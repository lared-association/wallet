{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/core/database/storage/SettingsModelStorage.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/core/database/storage/SettingsModelStorage.ts","mtime":1606213958961},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgewogIGZ1bmN0aW9uIGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7CiAgICBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7CgogICAgdHJ5IHsKICAgICAgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksCiAgICAgICAgcmVzdWx0OwoKICAgIGlmIChpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkgewogICAgICB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOwoKICAgICAgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7CiAgfTsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgovKgogKiBDb3B5cmlnaHQgMjAyMCBORU0gKGh0dHBzOi8vbmVtLmlvKQogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCmltcG9ydCB7IFZlcnNpb25lZE9iamVjdFN0b3JhZ2UgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UvYmFja2VuZHMvVmVyc2lvbmVkT2JqZWN0U3RvcmFnZSc7CmltcG9ydCB7IG5ldHdvcmtDb25maWcgfSBmcm9tICdAL2NvbmZpZyc7CmV4cG9ydCB2YXIgU2V0dGluZ3NNb2RlbFN0b3JhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WZXJzaW9uZWRPYmplY3RTdG9yYSkgewogIF9pbmhlcml0cyhTZXR0aW5nc01vZGVsU3RvcmFnZSwgX1ZlcnNpb25lZE9iamVjdFN0b3JhKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTZXR0aW5nc01vZGVsU3RvcmFnZSk7CgogIGZ1bmN0aW9uIFNldHRpbmdzTW9kZWxTdG9yYWdlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNldHRpbmdzTW9kZWxTdG9yYWdlKTsKCiAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgJ3NldHRpbmdzJywgW3sKICAgICAgZGVzY3JpcHRpb246ICdVcGRhdGUgc2V0dGluZ3MgdG8gMC45LjUuMSBuZXR3b3JrJywKICAgICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZSgpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICB9LCB7CiAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIHNldHRpbmdzIGZvciAwLjkuNi4zIG5ldHdvcmsgKGFkZHJlc3MgY2hhbmdlcyknLAogICAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKGZyb20pIHsKICAgICAgICAvLyB1cGRhdGUgYWxsIHByZS0wLjkuNi54IHNldHRpbmdzCiAgICAgICAgdmFyIHByb2ZpbGVzID0gT2JqZWN0LmtleXMoZnJvbSk7CiAgICAgICAgdmFyIG1vZGlmaWVkID0gZnJvbTsKICAgICAgICBwcm9maWxlcy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIG1vZGlmaWVkW25hbWVdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZFtuYW1lXSksIHsKICAgICAgICAgICAgZXhwbG9yZXJVcmw6IG5ldHdvcmtDb25maWcuZXhwbG9yZXJVcmwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBtb2RpZmllZDsKICAgICAgfQogICAgfSwgewogICAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZSBzZXR0aW5ncyBmb3IgMC4xMC54IG5ldHdvcmsgKGFkZHJlc3MgY2hhbmdlcyknLAogICAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKGZyb20pIHsKICAgICAgICAvLyB1cGRhdGUgYWxsIHByZS0wLjEwLnggc2V0dGluZ3MKICAgICAgICB2YXIgc2V0dGluZ3MgPSBPYmplY3Qua2V5cyhmcm9tKTsKICAgICAgICB2YXIgbW9kaWZpZWQgPSBmcm9tOwogICAgICAgIHNldHRpbmdzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgbW9kaWZpZWRbbmFtZV0gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1vZGlmaWVkW25hbWVdKSwgewogICAgICAgICAgICBleHBsb3JlclVybDogbmV0d29ya0NvbmZpZy5leHBsb3JlclVybCwKICAgICAgICAgICAgZmF1Y2V0VXJsOiBuZXR3b3JrQ29uZmlnLmZhdWNldFVybAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG1vZGlmaWVkOwogICAgICB9CiAgICB9XSk7CiAgfQoKICByZXR1cm4gU2V0dGluZ3NNb2RlbFN0b3JhZ2U7Cn0oVmVyc2lvbmVkT2JqZWN0U3RvcmFnZSk7Ci8qKgogKiBTaW5nbGV0b24gaW5zdGFuY2UgYXMgd2Ugd2FudCB0byBydW4gdGhlIG1pZ3JhdGlvbiBqdXN0IG9uY2UKICovCgpTZXR0aW5nc01vZGVsU3RvcmFnZS5JTlNUQU5DRSA9IG5ldyBTZXR0aW5nc01vZGVsU3RvcmFnZSgpOw=="},{"version":3,"sources":["/home/hero/lared-wallet/src/core/database/storage/SettingsModelStorage.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;AAgBA,SAAS,sBAAT,QAAuC,iDAAvC;AAEA,SAAS,aAAT,QAA8B,UAA9B;AAEA,WAAa,oBAAb;AAAA;;AAAA;;AAMI,kCAAA;AAAA;;AAAA,6BACU,UADV,EACsB,CACd;AACI,MAAA,WAAW,EAAE,oCADjB;AAEI,MAAA,OAAO,EAAE;AAAA,eAAM,SAAN;AAAA;AAFb,KADc,EAKd;AACI,MAAA,WAAW,EAAE,uDADjB;AAEI,MAAA,OAAO,EAAE,iBAAC,IAAD,EAAc;AACnB;AACA,YAAM,QAAQ,GAAG,MAAM,CAAC,IAAP,CAAY,IAAZ,CAAjB;AAEA,YAAM,QAAQ,GAAQ,IAAtB;AACA,QAAA,QAAQ,CAAC,GAAT,CAAa,UAAC,IAAD,EAAiB;AAC1B,UAAA,QAAQ,CAAC,IAAD,CAAR,GAAc,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACP,QAAQ,CAAC,IAAD,CADD,CAAA,EACO;AACjB,YAAA,WAAW,EAAE,aAAa,CAAC;AADV,WADP,CAAd;AAIH,SALD;AAOA,eAAO,QAAP;AACH;AAfL,KALc,EAsBd;AACI,MAAA,WAAW,EAAE,sDADjB;AAEI,MAAA,OAAO,EAAE,iBAAC,IAAD,EAAc;AACnB;AACA,YAAM,QAAQ,GAAG,MAAM,CAAC,IAAP,CAAY,IAAZ,CAAjB;AAEA,YAAM,QAAQ,GAAQ,IAAtB;AACA,QAAA,QAAQ,CAAC,GAAT,CAAa,UAAC,IAAD,EAAiB;AAC1B,UAAA,QAAQ,CAAC,IAAD,CAAR,GAAc,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACP,QAAQ,CAAC,IAAD,CADD,CAAA,EACO;AACjB,YAAA,WAAW,EAAE,aAAa,CAAC,WADV;AAEjB,YAAA,SAAS,EAAE,aAAa,CAAC;AAFR,WADP,CAAd;AAKH,SAND;AAQA,eAAO,QAAP;AACH;AAhBL,KAtBc,CADtB;AA0CC;;AAhDL;AAAA,EAA0C,sBAA1C;AACI;;;;AAGc,oBAAA,CAAA,QAAA,GAAW,IAAI,oBAAJ,EAAX","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nimport { VersionedObjectStorage } from '@/core/database/backends/VersionedObjectStorage';\nimport { SettingsModel } from '@/core/database/entities/SettingsModel';\nimport { networkConfig } from '@/config';\n\nexport class SettingsModelStorage extends VersionedObjectStorage<Record<string, SettingsModel>> {\n    /**\n     * Singleton instance as we want to run the migration just once\n     */\n    public static INSTANCE = new SettingsModelStorage();\n\n    private constructor() {\n        super('settings', [\n            {\n                description: 'Update settings to 0.9.5.1 network',\n                migrate: () => undefined,\n            },\n            {\n                description: 'Update settings for 0.9.6.3 network (address changes)',\n                migrate: (from: any) => {\n                    // update all pre-0.9.6.x settings\n                    const profiles = Object.keys(from);\n\n                    const modified: any = from;\n                    profiles.map((name: string) => {\n                        modified[name] = {\n                            ...modified[name],\n                            explorerUrl: networkConfig.explorerUrl,\n                        };\n                    });\n\n                    return modified;\n                },\n            },\n            {\n                description: 'Update settings for 0.10.x network (address changes)',\n                migrate: (from: any) => {\n                    // update all pre-0.10.x settings\n                    const settings = Object.keys(from);\n\n                    const modified: any = from;\n                    settings.map((name: string) => {\n                        modified[name] = {\n                            ...modified[name],\n                            explorerUrl: networkConfig.explorerUrl,\n                            faucetUrl: networkConfig.faucetUrl,\n                        };\n                    });\n\n                    return modified;\n                },\n            },\n        ]);\n    }\n}\n"],"sourceRoot":""}]}