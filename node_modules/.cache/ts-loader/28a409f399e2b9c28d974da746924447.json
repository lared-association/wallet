{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/store/Network.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/store/Network.ts","mtime":1606213958969},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvaGVyby9sYXJlZC13YWxsZXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmltcG9ydCB7IF9fYXdhaXRlciB9IGZyb20gInRzbGliIjsKLyoKICogQ29weXJpZ2h0IDIwMjAgTkVNIChodHRwczovL25lbS5pbykKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBSZXBvc2l0b3J5RmFjdG9yeUh0dHAgfSBmcm9tICdzeW1ib2wtc2RrJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsgLy8gaW50ZXJuYWwgZGVwZW5kZW5jaWVzCgppbXBvcnQgeyAkZXZlbnRCdXMgfSBmcm9tICcuLi9ldmVudHMnOwppbXBvcnQgeyBVUkxIZWxwZXJzIH0gZnJvbSAnQC9jb3JlL3V0aWxzL1VSTEhlbHBlcnMnOwppbXBvcnQgYXBwIGZyb20gJ0AvbWFpbic7CmltcG9ydCB7IEF3YWl0TG9jayB9IGZyb20gJy4vQXdhaXRMb2NrJzsgLy8gY29uZmlndXJhdGlvbgoKaW1wb3J0IHsgVXJsVmFsaWRhdG9yIH0gZnJvbSAnQC9jb3JlL3ZhbGlkYXRpb24vdmFsaWRhdG9ycyc7CmltcG9ydCB7IE5ldHdvcmtTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9OZXR3b3JrU2VydmljZSc7CmltcG9ydCB7IE5vZGVTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9Ob2RlU2VydmljZSc7CmltcG9ydCB7IE5vZGVNb2RlbCB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZS9lbnRpdGllcy9Ob2RlTW9kZWwnOwppbXBvcnQgeyBuZXR3b3JrQ29uZmlnIH0gZnJvbSAnQC9jb25maWcnOwp2YXIgTG9jayA9IEF3YWl0TG9jay5jcmVhdGUoKTsgLy8vIGVuZC1yZWdpb24gY3VzdG9tIHR5cGVzCgp2YXIgc3RhdGljUGVlck5vZGVzID0gW3sKICBub2RlUHVibGljS2V5OiAnQkU2MEJFNDI2ODcyQjNDQjQ2RkUyQzlCQUE1MjE3MzFFQTUyQzBENTdFMDA0RkM3Qzg0MjkzODg3QUMzQkFEMCcsCiAgaG9zdDogJ2JlYWNvbi0wMS5hcC1ub3J0aGVhc3QtMS4wLjEwLjAueC5zeW1ib2xkZXYubmV0d29yaycKfSwgewogIG5vZGVQdWJsaWNLZXk6ICdFRTM1NkE1NTU4MDIwMDNDNTY2NkQ4NDg1MTg1Q0RDMzg0NEY5NTAyRkFGMjRCNTg5QkRDNEQ2RTkxNDgwMjJGJywKICBob3N0OiAnYmVhY29uLTAxLmV1LWNlbnRyYWwtMS4wLjEwLjAueC5zeW1ib2xkZXYubmV0d29yaycKfSwgewogIG5vZGVQdWJsaWNLZXk6ICc4MTg5MDU5MkY5NjBBQUVCREE3NjEyQzg5MTdGQTlDMjY3QTg0NUQ3OEQ3NEQ0QjM2NTFBRjA5M0U2Nzc1MDAxJywKICBob3N0OiAnYmVhY29uLTAxLnVzLXdlc3QtMi4wLjEwLjAueC5zeW1ib2xkZXYubmV0d29yaycKfSwgewogIG5vZGVQdWJsaWNLZXk6ICcyQUY1MkM1QUE5QTVFMTNERDU0OEE1NzdERUJGMjFFN0QzQ0MyODVBMUIwNzk4RjRENDUwMjM5Q0RERTVBMTY5JywKICBob3N0OiAnYmVhY29uLTAxLmFwLXNvdXRoZWFzdC0xLjAuMTAuMC54LnN5bWJvbGRldi5uZXR3b3JrJwp9LCB7CiAgbm9kZVB1YmxpY0tleTogJ0Q3NEI4OUVFOTM3OERFQkQ1MTBBNDEzOUY4RThCMTBCODc4RTEyOTU2MDU5Q0Q5RTEzMjUzQ0YzQUQ3M0JERUInLAogIGhvc3Q6ICdiZWFjb24tMDEudXMtd2VzdC0xLjAuMTAuMC54LnN5bWJvbGRldi5uZXR3b3JrJwp9LCB7CiAgbm9kZVB1YmxpY0tleTogJzkzOEQ2QzFCQkRCMDlGM0YxQjlEOTVEMkQ5MDJBOTRDOTVFM0FBNkYxMDY5QTgwNTgzMUQ5RTI3MkRDRjkyN0YnLAogIGhvc3Q6ICdiZWFjb24tMDEuZXUtd2VzdC0xLjAuMTAuMC54LnN5bWJvbGRldi5uZXR3b3JrJwp9LCB7CiAgbm9kZVB1YmxpY0tleTogJzJBNDBGNzg5NUY1NjM4OUJFNDBDMDYzQjg5N0U5RTY2RTY0NzA1RDU1QjE5RkM0M0M4Q0VCNUY3RjE0QUJFNTknLAogIGhvc3Q6ICdiZWFjb24tMDEudXMtZWFzdC0xLjAuMTAuMC54LnN5bWJvbGRldi5uZXR3b3JrJwp9XTsKdmFyIGRlZmF1bHRQZWVyID0gVVJMSGVscGVycy5mb3JtYXRVcmwobmV0d29ya0NvbmZpZy5kZWZhdWx0Tm9kZVVybCk7CnZhciBuZXR3b3JrU3RhdGUgPSB7CiAgaW5pdGlhbGl6ZWQ6IGZhbHNlLAogIGN1cnJlbnRQZWVyOiBkZWZhdWx0UGVlciwKICBjdXJyZW50UGVlckluZm86IG5ldyBOb2RlTW9kZWwoZGVmYXVsdFBlZXIudXJsLCBkZWZhdWx0UGVlci51cmwsIHRydWUpLAogIG5ldHdvcmtUeXBlOiBuZXR3b3JrQ29uZmlnLmRlZmF1bHROZXR3b3JrVHlwZSwKICBnZW5lcmF0aW9uSGFzaDogdW5kZWZpbmVkLAogIG5ldHdvcmtNb2RlbDogdW5kZWZpbmVkLAogIG5ldHdvcmtDb25maWd1cmF0aW9uOiBuZXR3b3JrQ29uZmlnLm5ldHdvcmtDb25maWd1cmF0aW9uRGVmYXVsdHMsCiAgcmVwb3NpdG9yeUZhY3Rvcnk6IE5ldHdvcmtTZXJ2aWNlLmNyZWF0ZVJlcG9zaXRvcnlGYWN0b3J5KG5ldHdvcmtDb25maWcuZGVmYXVsdE5vZGVVcmwpLAogIGxpc3RlbmVyOiB1bmRlZmluZWQsCiAgdHJhbnNhY3Rpb25GZWVzOiB1bmRlZmluZWQsCiAgaXNDb25uZWN0ZWQ6IGZhbHNlLAogIGtub3dOb2RlczogW10sCiAgY3VycmVudEhlaWdodDogMCwKICBzdWJzY3JpcHRpb25zOiBbXSwKICByZW50YWxGZWVFc3RpbWF0aW9uOiB1bmRlZmluZWQsCiAgZXBvY2hBZGp1c3RtZW50OiBuZXR3b3JrQ29uZmlnLm5ldHdvcmtDb25maWd1cmF0aW9uRGVmYXVsdHMuZXBvY2hBZGp1c3RtZW50LAogIG5ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZTogZmFsc2UsCiAgcGVlck5vZGVzOiBbXSwKICBzZWxlY3RlZFBlZXJOb2RlOiBudWxsCn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBuZXR3b3JrU3RhdGUsCiAgZ2V0dGVyczogewogICAgZ2V0SW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uIGdldEluaXRpYWxpemVkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pbml0aWFsaXplZDsKICAgIH0sCiAgICBzdWJzY3JpcHRpb25zOiBmdW5jdGlvbiBzdWJzY3JpcHRpb25zKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdWJzY3JpcHRpb25zOwogICAgfSwKICAgIG5ldHdvcmtUeXBlOiBmdW5jdGlvbiBuZXR3b3JrVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmV0d29ya1R5cGU7CiAgICB9LAogICAgZXBvY2hBZGp1c3RtZW50OiBmdW5jdGlvbiBlcG9jaEFkanVzdG1lbnQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmVwb2NoQWRqdXN0bWVudDsKICAgIH0sCiAgICBnZW5lcmF0aW9uSGFzaDogZnVuY3Rpb24gZ2VuZXJhdGlvbkhhc2goc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmdlbmVyYXRpb25IYXNoOwogICAgfSwKICAgIHJlcG9zaXRvcnlGYWN0b3J5OiBmdW5jdGlvbiByZXBvc2l0b3J5RmFjdG9yeShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucmVwb3NpdG9yeUZhY3Rvcnk7CiAgICB9LAogICAgbGlzdGVuZXI6IGZ1bmN0aW9uIGxpc3RlbmVyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5saXN0ZW5lcjsKICAgIH0sCiAgICBuZXR3b3JrTW9kZWw6IGZ1bmN0aW9uIG5ldHdvcmtNb2RlbChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmV0d29ya01vZGVsOwogICAgfSwKICAgIG5ldHdvcmtDb25maWd1cmF0aW9uOiBmdW5jdGlvbiBuZXR3b3JrQ29uZmlndXJhdGlvbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmV0d29ya0NvbmZpZ3VyYXRpb247CiAgICB9LAogICAgY3VycmVudFBlZXI6IGZ1bmN0aW9uIGN1cnJlbnRQZWVyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50UGVlcjsKICAgIH0sCiAgICBjdXJyZW50UGVlckluZm86IGZ1bmN0aW9uIGN1cnJlbnRQZWVySW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFBlZXJJbmZvOwogICAgfSwKICAgIGlzQ29ubmVjdGVkOiBmdW5jdGlvbiBpc0Nvbm5lY3RlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNDb25uZWN0ZWQ7CiAgICB9LAogICAga25vd05vZGVzOiBmdW5jdGlvbiBrbm93Tm9kZXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmtub3dOb2RlczsKICAgIH0sCiAgICBjdXJyZW50SGVpZ2h0OiBmdW5jdGlvbiBjdXJyZW50SGVpZ2h0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50SGVpZ2h0OwogICAgfSwKICAgIHRyYW5zYWN0aW9uRmVlczogZnVuY3Rpb24gdHJhbnNhY3Rpb25GZWVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50cmFuc2FjdGlvbkZlZXM7CiAgICB9LAogICAgcmVudGFsRmVlRXN0aW1hdGlvbjogZnVuY3Rpb24gcmVudGFsRmVlRXN0aW1hdGlvbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucmVudGFsRmVlRXN0aW1hdGlvbjsKICAgIH0sCiAgICBuZXR3b3JrSXNOb3RNYXRjaGluZ1Byb2ZpbGU6IGZ1bmN0aW9uIG5ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubmV0d29ya0lzTm90TWF0Y2hpbmdQcm9maWxlOwogICAgfSwKICAgIHBlZXJOb2RlczogZnVuY3Rpb24gcGVlck5vZGVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wZWVyTm9kZXM7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldEluaXRpYWxpemVkOiBmdW5jdGlvbiBzZXRJbml0aWFsaXplZChzdGF0ZSwgaW5pdGlhbGl6ZWQpIHsKICAgICAgc3RhdGUuaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplZDsKICAgIH0sCiAgICBzZXRDb25uZWN0ZWQ6IGZ1bmN0aW9uIHNldENvbm5lY3RlZChzdGF0ZSwgY29ubmVjdGVkKSB7CiAgICAgIHN0YXRlLmlzQ29ubmVjdGVkID0gY29ubmVjdGVkOwogICAgfSwKICAgIGN1cnJlbnRIZWlnaHQ6IGZ1bmN0aW9uIGN1cnJlbnRIZWlnaHQoc3RhdGUsIF9jdXJyZW50SGVpZ2h0KSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAnY3VycmVudEhlaWdodCcsIF9jdXJyZW50SGVpZ2h0KTsKICAgIH0sCiAgICBjdXJyZW50UGVlckluZm86IGZ1bmN0aW9uIGN1cnJlbnRQZWVySW5mbyhzdGF0ZSwgX2N1cnJlbnRQZWVySW5mbykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2N1cnJlbnRQZWVySW5mbycsIF9jdXJyZW50UGVlckluZm8pOwogICAgfSwKICAgIHJlcG9zaXRvcnlGYWN0b3J5OiBmdW5jdGlvbiByZXBvc2l0b3J5RmFjdG9yeShzdGF0ZSwgX3JlcG9zaXRvcnlGYWN0b3J5KSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAncmVwb3NpdG9yeUZhY3RvcnknLCBfcmVwb3NpdG9yeUZhY3RvcnkpOwogICAgfSwKICAgIG5ldHdvcmtDb25maWd1cmF0aW9uOiBmdW5jdGlvbiBuZXR3b3JrQ29uZmlndXJhdGlvbihzdGF0ZSwgX25ldHdvcmtDb25maWd1cmF0aW9uKSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAnbmV0d29ya0NvbmZpZ3VyYXRpb24nLCBfbmV0d29ya0NvbmZpZ3VyYXRpb24pOwogICAgfSwKICAgIGxpc3RlbmVyOiBmdW5jdGlvbiBsaXN0ZW5lcihzdGF0ZSwgX2xpc3RlbmVyKSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAnbGlzdGVuZXInLCBfbGlzdGVuZXIpOwogICAgfSwKICAgIG5ldHdvcmtNb2RlbDogZnVuY3Rpb24gbmV0d29ya01vZGVsKHN0YXRlLCBfbmV0d29ya01vZGVsKSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAnbmV0d29ya01vZGVsJywgX25ldHdvcmtNb2RlbCk7CiAgICB9LAogICAga25vd05vZGVzOiBmdW5jdGlvbiBrbm93Tm9kZXMoc3RhdGUsIF9rbm93Tm9kZXMpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdrbm93Tm9kZXMnLCBfa25vd05vZGVzKTsKICAgIH0sCiAgICBnZW5lcmF0aW9uSGFzaDogZnVuY3Rpb24gZ2VuZXJhdGlvbkhhc2goc3RhdGUsIF9nZW5lcmF0aW9uSGFzaCkgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2dlbmVyYXRpb25IYXNoJywgX2dlbmVyYXRpb25IYXNoKTsKICAgIH0sCiAgICBuZXR3b3JrVHlwZTogZnVuY3Rpb24gbmV0d29ya1R5cGUoc3RhdGUsIF9uZXR3b3JrVHlwZSkgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ25ldHdvcmtUeXBlJywgX25ldHdvcmtUeXBlKTsKICAgIH0sCiAgICBlcG9jaEFkanVzdG1lbnQ6IGZ1bmN0aW9uIGVwb2NoQWRqdXN0bWVudChzdGF0ZSwgX2Vwb2NoQWRqdXN0bWVudCkgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2Vwb2NoQWRqdXN0bWVudCcsIF9lcG9jaEFkanVzdG1lbnQpOwogICAgfSwKICAgIGN1cnJlbnRQZWVyOiBmdW5jdGlvbiBjdXJyZW50UGVlcihzdGF0ZSwgX2N1cnJlbnRQZWVyKSB7CiAgICAgIHJldHVybiBWdWUuc2V0KHN0YXRlLCAnY3VycmVudFBlZXInLCBfY3VycmVudFBlZXIpOwogICAgfSwKICAgIHRyYW5zYWN0aW9uRmVlczogZnVuY3Rpb24gdHJhbnNhY3Rpb25GZWVzKHN0YXRlLCBfdHJhbnNhY3Rpb25GZWVzKSB7CiAgICAgIHN0YXRlLnRyYW5zYWN0aW9uRmVlcyA9IF90cmFuc2FjdGlvbkZlZXM7CiAgICB9LAogICAgcmVudGFsRmVlRXN0aW1hdGlvbjogZnVuY3Rpb24gcmVudGFsRmVlRXN0aW1hdGlvbihzdGF0ZSwgYW1vdW50KSB7CiAgICAgIHN0YXRlLnJlbnRhbEZlZUVzdGltYXRpb24gPSBhbW91bnQ7CiAgICB9LAogICAgbmV0d29ya0lzTm90TWF0Y2hpbmdQcm9maWxlOiBmdW5jdGlvbiBuZXR3b3JrSXNOb3RNYXRjaGluZ1Byb2ZpbGUoc3RhdGUsIF9uZXR3b3JrSXNOb3RNYXRjaGluZ1Byb2ZpbGUpIHsKICAgICAgVnVlLnNldChzdGF0ZSwgJ25ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZScsIF9uZXR3b3JrSXNOb3RNYXRjaGluZ1Byb2ZpbGUpOwogICAgfSwKICAgIGFkZFBlZXI6IGZ1bmN0aW9uIGFkZFBlZXIoc3RhdGUsIHBlZXJVcmwpIHsKICAgICAgdmFyIGtub3dOb2RlcyA9IHN0YXRlLmtub3dOb2RlczsKICAgICAgdmFyIGV4aXN0Tm9kZSA9IGtub3dOb2Rlcy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgcmV0dXJuIHAudXJsID09PSBwZWVyVXJsOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdE5vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuZXdOb2RlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoa25vd05vZGVzKSwgW25ldyBOb2RlTW9kZWwocGVlclVybCwgJycsIGZhbHNlKV0pOwogICAgICBuZXcgTm9kZVNlcnZpY2UoKS5zYXZlTm9kZXMobmV3Tm9kZXMpOwogICAgICBWdWUuc2V0KHN0YXRlLCAna25vd05vZGVzJywgbmV3Tm9kZXMpOwogICAgfSwKICAgIHJlbW92ZVBlZXI6IGZ1bmN0aW9uIHJlbW92ZVBlZXIoc3RhdGUsIHBlZXJVcmwpIHsKICAgICAgdmFyIGtub3dOb2RlcyA9IHN0YXRlLmtub3dOb2RlczsKICAgICAgdmFyIHRvQmVEZWxldGVkID0ga25vd05vZGVzLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICByZXR1cm4gcC51cmwgPT09IHBlZXJVcmw7CiAgICAgIH0pOwoKICAgICAgaWYgKCF0b0JlRGVsZXRlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld05vZGVzID0ga25vd05vZGVzLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuICE9PSB0b0JlRGVsZXRlZDsKICAgICAgfSk7CiAgICAgIG5ldyBOb2RlU2VydmljZSgpLnNhdmVOb2RlcyhuZXdOb2Rlcyk7CiAgICAgIFZ1ZS5zZXQoc3RhdGUsICdrbm93Tm9kZXMnLCBuZXdOb2Rlcyk7CiAgICB9LAogICAgdXBkYXRlTm9kZTogZnVuY3Rpb24gdXBkYXRlTm9kZShzdGF0ZSwgbm9kZSkgewogICAgICB2YXIga25vd05vZGVzID0gc3RhdGUua25vd05vZGVzOwogICAgICB2YXIgdG9CZVVwZGF0ZWQgPSBrbm93Tm9kZXMuZmluZChmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiBwLnVybCA9PT0gbm9kZS51cmw7CiAgICAgIH0pOwoKICAgICAgaWYgKCF0b0JlVXBkYXRlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld05vZGVzID0ga25vd05vZGVzLm1hcChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLnVybCA9PT0gbm9kZS51cmwgPyBub2RlIDogbjsKICAgICAgfSk7CiAgICAgIG5ldyBOb2RlU2VydmljZSgpLnNhdmVOb2RlcyhuZXdOb2Rlcyk7CiAgICAgIFZ1ZS5zZXQoc3RhdGUsICdrbm93Tm9kZXMnLCBuZXdOb2Rlcyk7CiAgICB9LAogICAgc3Vic2NyaXB0aW9uczogZnVuY3Rpb24gc3Vic2NyaXB0aW9ucyhzdGF0ZSwgZGF0YSkgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ3N1YnNjcmlwdGlvbnMnLCBkYXRhKTsKICAgIH0sCiAgICBhZGRTdWJzY3JpcHRpb25zOiBmdW5jdGlvbiBhZGRTdWJzY3JpcHRpb25zKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gc3RhdGUuc3Vic2NyaXB0aW9uczsKICAgICAgVnVlLnNldChzdGF0ZSwgJ3N1YnNjcmlwdGlvbnMnLCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHN1YnNjcmlwdGlvbnMpLCBbcGF5bG9hZF0pKTsKICAgIH0sCiAgICBwZWVyTm9kZXM6IGZ1bmN0aW9uIHBlZXJOb2RlcyhzdGF0ZSwgX3BlZXJOb2RlcykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ3BlZXJOb2RlcycsIF9wZWVyTm9kZXMpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmLmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGNhbGxiYWNrOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ0NPTk5FQ1QnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ1JFU1RfTkVUV09SS19SRU5UQUxfRkVFUycpOyAvLyB1cGRhdGUgc3RvcmUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OyAvLyBhY3F1aXJlIGFzeW5jIGxvY2sgdW50aWwgaW5pdGlhbGl6ZWQKCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIExvY2suaW5pdGlhbGl6ZShjYWxsYmFjaywgewogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBnZXR0ZXJzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwogICAgfSwKICAgIHVuaW5pdGlhbGl6ZTogZnVuY3Rpb24gdW5pbml0aWFsaXplKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYyLmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIHZhciBjYWxsYmFjazsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMyLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdVTlNVQlNDUklCRScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRJbml0aWFsaXplZCcsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTG9jay51bmluaXRpYWxpemUoY2FsbGJhY2ssIHsKICAgICAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBDT05ORUNUOiBmdW5jdGlvbiBDT05ORUNUKF9yZWYzLCBuZXdDYW5kaWRhdGUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2gsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjMuZ2V0dGVycywKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjMucm9vdEdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnRQcm9maWxlLCBuZXR3b3JrU2VydmljZSwgbm9kZVNlcnZpY2UsIG5ldHdvcmtNb2RlbFJlc3VsdCwgbmV0d29ya01vZGVsLCByZXBvc2l0b3J5RmFjdG9yeSwgZmFsbGJhY2ssIG9sZEdlbmVyYXRpb25IYXNoLCBnZXROb2Rlc1Byb21pc2UsIGdldEJsb2NrY2hhaW5IZWlnaHRQcm9taXNlLCBub2RlcywgY3VycmVudEhlaWdodCwgbGlzdGVuZXIsIGN1cnJlbnRQZWVyOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGUgPSByb290R2V0dGVyc1sncHJvZmlsZS9jdXJyZW50UHJvZmlsZSddOwogICAgICAgICAgICAgICAgbmV0d29ya1NlcnZpY2UgPSBuZXcgTmV0d29ya1NlcnZpY2UoKTsKICAgICAgICAgICAgICAgIG5vZGVTZXJ2aWNlID0gbmV3IE5vZGVTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya1NlcnZpY2UuZ2V0TmV0d29ya01vZGVsKG5ld0NhbmRpZGF0ZSwgY3VycmVudFByb2ZpbGUgJiYgY3VycmVudFByb2ZpbGUuZ2VuZXJhdGlvbkhhc2ggfHwgdW5kZWZpbmVkKS50b1Byb21pc2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgbmV0d29ya01vZGVsUmVzdWx0ID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtNb2RlbFJlc3VsdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29ubmVjdCBlcnJvciwgYWN0aXZlIHBlZXIgY2Fubm90IGJlIGZvdW5kJyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIG5ldHdvcmtNb2RlbCA9IG5ldHdvcmtNb2RlbFJlc3VsdC5uZXR3b3JrTW9kZWwsIHJlcG9zaXRvcnlGYWN0b3J5ID0gbmV0d29ya01vZGVsUmVzdWx0LnJlcG9zaXRvcnlGYWN0b3J5LCBmYWxsYmFjayA9IG5ldHdvcmtNb2RlbFJlc3VsdC5mYWxsYmFjazsKCiAgICAgICAgICAgICAgICBpZiAoIWZhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29ubmVjdGlvbiBFcnJvci4nKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIG9sZEdlbmVyYXRpb25IYXNoID0gZ2V0dGVyc1snZ2VuZXJhdGlvbkhhc2gnXTsKICAgICAgICAgICAgICAgIGdldE5vZGVzUHJvbWlzZSA9IG5vZGVTZXJ2aWNlLmdldE5vZGVzKHJlcG9zaXRvcnlGYWN0b3J5LCBuZXR3b3JrTW9kZWwudXJsKS50b1Byb21pc2UoKTsKICAgICAgICAgICAgICAgIGdldEJsb2NrY2hhaW5IZWlnaHRQcm9taXNlID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlQ2hhaW5SZXBvc2l0b3J5KCkuZ2V0Q2hhaW5JbmZvKCkudG9Qcm9taXNlKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldE5vZGVzUHJvbWlzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIG5vZGVzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEJsb2NrY2hhaW5IZWlnaHRQcm9taXNlOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgY3VycmVudEhlaWdodCA9IF9jb250ZXh0NS5zZW50LmhlaWdodC5jb21wYWN0KCk7CiAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICBjdXJyZW50UGVlciA9IFVSTEhlbHBlcnMuZ2V0Tm9kZVVybChuZXR3b3JrTW9kZWwudXJsKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFBlZXInLCBjdXJyZW50UGVlcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ25ldHdvcmtNb2RlbCcsIG5ldHdvcmtNb2RlbCk7CiAgICAgICAgICAgICAgICBjb21taXQoJ25ldHdvcmtDb25maWd1cmF0aW9uJywgbmV0d29ya01vZGVsLm5ldHdvcmtDb25maWd1cmF0aW9uKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgndHJhbnNhY3Rpb25GZWVzJywgbmV0d29ya01vZGVsLnRyYW5zYWN0aW9uRmVlcyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ25ldHdvcmtUeXBlJywgbmV0d29ya01vZGVsLm5ldHdvcmtUeXBlKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnZXBvY2hBZGp1c3RtZW50JywgbmV0d29ya01vZGVsLm5ldHdvcmtDb25maWd1cmF0aW9uLmVwb2NoQWRqdXN0bWVudCk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2dlbmVyYXRpb25IYXNoJywgbmV0d29ya01vZGVsLmdlbmVyYXRpb25IYXNoKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgncmVwb3NpdG9yeUZhY3RvcnknLCByZXBvc2l0b3J5RmFjdG9yeSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2tub3dOb2RlcycsIG5vZGVzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnbGlzdGVuZXInLCBsaXN0ZW5lcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRIZWlnaHQnLCBjdXJyZW50SGVpZ2h0KTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFBlZXJJbmZvJywgbm9kZXMuZmluZChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICByZXR1cm4gbi51cmwgPT09IG5ldHdvcmtNb2RlbC51cmw7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldENvbm5lY3RlZCcsIHRydWUpOwogICAgICAgICAgICAgICAgJGV2ZW50QnVzLiRlbWl0KCduZXdDb25uZWN0aW9uJywgY3VycmVudFBlZXIpOyAvLyBzdWJzY3JpYmUgdG8gdXBkYXRlcwoKICAgICAgICAgICAgICAgIGlmIChvbGRHZW5lcmF0aW9uSGFzaCAhPSBuZXR3b3JrTW9kZWwuZ2VuZXJhdGlvbkhhc2gpIHsKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FjY291bnQvTkVUV09SS19DSEFOR0VEJywge30sIHsKICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgnc3RhdGlzdGljcy9MT0FEJywge30sIHsKICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOyAvLyBjaGVjayBpZiBjdXJyZW50IHByb2ZpbGUgbmV0d29yayB0eXBlIGFuZCBnZW5lcmF0aW9uIGhhc2ggbWF0Y2hlcyBjdXJyZW50IG5ldHdvcmsKCiAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UHJvZmlsZSAmJiAoY3VycmVudFByb2ZpbGUubmV0d29ya1R5cGUgIT09IG5ldHdvcmtNb2RlbC5uZXR3b3JrVHlwZSB8fCBjdXJyZW50UHJvZmlsZS5nZW5lcmF0aW9uSGFzaCAhPT0gbmV0d29ya01vZGVsLmdlbmVyYXRpb25IYXNoKSkgewogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdTRVRfTkVUV09SS19JU19OT1RfTUFUQ0hJTkdfUFJPRklMRScsIHRydWUpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdTRVRfTkVUV09SS19JU19OT1RfTUFUQ0hJTkdfUFJPRklMRScsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ1VOU1VCU0NSSUJFJyk7CgogICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQxOwogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyLm9wZW4oKTsKCiAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdTVUJTQ1JJQkUnKTsKCiAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBTRVRfQ1VSUkVOVF9QRUVSOiBmdW5jdGlvbiBTRVRfQ1VSUkVOVF9QRUVSKF9yZWY0LCBjdXJyZW50UGVlclVybCkgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmNC5kaXNwYXRjaDsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChVcmxWYWxpZGF0b3IudmFsaWRhdGUoY3VycmVudFBlZXJVcmwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBjaGFuZ2Ugbm9kZS4gVVJMIGlzIG5vdCB2YWxpZDogJyArIGN1cnJlbnRQZWVyVXJsKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgLy8gLSBzaG93IGxvYWRpbmcgb3ZlcmxheQogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FwcC9TRVRfTE9BRElOR19PVkVSTEFZJywgewogICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiIi5jb25jYXQoYXBwLiR0KCdpbmZvX2Nvbm5lY3RpbmdfcGVlcicsIHsKICAgICAgICAgICAgICAgICAgICBwZWVyVXJsOiBjdXJyZW50UGVlclVybAogICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgIGRpc2FibGVDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdkaWFnbm9zdGljL0FERF9ERUJVRycsICdTdG9yZSBhY3Rpb24gbmV0d29yay9TRVRfQ1VSUkVOVF9QRUVSIGRpc3BhdGNoZWQgd2l0aDogJyArIGN1cnJlbnRQZWVyVXJsLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdDT05ORUNUJywgY3VycmVudFBlZXJVcmwpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50MCA9IF9jb250ZXh0NlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Ni50MCk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbm90aWZpY2F0aW9uL0FERF9FUlJPUicsICIiLmNvbmNhdChhcHAuJHQoJ2Vycm9yX3BlZXJfY29ubmVjdGlvbl93ZW50X3dyb25nJywgewogICAgICAgICAgICAgICAgICBwZWVyVXJsOiBjdXJyZW50UGVlclVybAogICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2RpYWdub3N0aWMvQUREX0VSUk9SJywgJ0Vycm9yIHdpdGggc3RvcmUgYWN0aW9uIG5ldHdvcmsvU0VUX0NVUlJFTlRfUEVFUjogJyArIEpTT04uc3RyaW5naWZ5KF9jb250ZXh0Ni50MCksIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDE0OwogICAgICAgICAgICAgICAgLy8gLSBoaWRlIGxvYWRpbmcgb3ZlcmxheQogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FwcC9TRVRfTE9BRElOR19PVkVSTEFZJywgewogICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuZmluaXNoKDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgbnVsbCwgW1s0LCA5LCAxNCwgMTddXSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBSRVNUX05FVFdPUktfUkVOVEFMX0ZFRVM6IGZ1bmN0aW9uIFJFU1RfTkVUV09SS19SRU5UQUxfRkVFUyhfcmVmNSkgewogICAgICB2YXIgcm9vdEdldHRlcnMgPSBfcmVmNS5yb290R2V0dGVycywKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2g7CiAgICAgIHZhciByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgIHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZU5ldHdvcmtSZXBvc2l0b3J5KCkuZ2V0UmVudGFsRmVlcygpLnN1YnNjcmliZShmdW5jdGlvbiAocmVudGFsRmVlKSB7CiAgICAgICAgZGlzcGF0Y2goJ1NFVF9SRU5UQUxfRkVFX0VTVElNQVRFJywgcmVudGFsRmVlKTsKICAgICAgfSk7CiAgICB9LAogICAgU0VUX1JFTlRBTF9GRUVfRVNUSU1BVEU6IGZ1bmN0aW9uIFNFVF9SRU5UQUxfRkVFX0VTVElNQVRFKF9yZWY2LCByZW50YWxGZWUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgICAgY29tbWl0KCdyZW50YWxGZWVFc3RpbWF0aW9uJywgcmVudGFsRmVlKTsKICAgIH0sCiAgICBTRVRfTkVUV09SS19JU19OT1RfTUFUQ0hJTkdfUFJPRklMRTogZnVuY3Rpb24gU0VUX05FVFdPUktfSVNfTk9UX01BVENISU5HX1BST0ZJTEUoX3JlZjcsIG5ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgICBjb21taXQoJ25ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZScsIG5ldHdvcmtJc05vdE1hdGNoaW5nUHJvZmlsZSk7CiAgICB9LAogICAgQUREX0tOT1dOX1BFRVI6IGZ1bmN0aW9uIEFERF9LTk9XTl9QRUVSKF9yZWY4LCBwZWVyVXJsKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOC5jb21taXQ7CgogICAgICBpZiAoIVVybFZhbGlkYXRvci52YWxpZGF0ZShwZWVyVXJsKSkgewogICAgICAgIHRocm93IEVycm9yKCdDYW5ub3QgYWRkIG5vZGUuIFVSTCBpcyBub3QgdmFsaWQ6ICcgKyBwZWVyVXJsKTsKICAgICAgfQoKICAgICAgY29tbWl0KCdhZGRQZWVyJywgcGVlclVybCk7CiAgICB9LAogICAgUkVNT1ZFX0tOT1dOX1BFRVI6IGZ1bmN0aW9uIFJFTU9WRV9LTk9XTl9QRUVSKF9yZWY5LCBwZWVyVXJsKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOS5jb21taXQ7CiAgICAgIGNvbW1pdCgncmVtb3ZlUGVlcicsIHBlZXJVcmwpOwogICAgfSwKICAgIFVQREFURV9QRUVSOiBmdW5jdGlvbiBVUERBVEVfUEVFUihfcmVmMTAsIHBlZXJVcmwpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMC5jb21taXQ7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5LCBub2RlU2VydmljZSwga25vd25Ob2RlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gbmV3IFJlcG9zaXRvcnlGYWN0b3J5SHR0cChwZWVyVXJsKTsKICAgICAgICAgICAgICAgIG5vZGVTZXJ2aWNlID0gbmV3IE5vZGVTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZVNlcnZpY2UuZ2V0Tm9kZXMocmVwb3NpdG9yeUZhY3RvcnksIHBlZXJVcmwpLnRvUHJvbWlzZSgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBrbm93bk5vZGVzID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ2tub3dOb2RlcycsIGtub3duTm9kZXMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSk7CiAgICB9LAogICAgUkVTRVRfUEVFUlM6IGZ1bmN0aW9uIFJFU0VUX1BFRVJTKF9yZWYxMSkgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTEuZGlzcGF0Y2gsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjExLmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIG5vZGVTZXJ2aWNlLCBuZXR3b3JrU2VydmljZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5vZGVTZXJ2aWNlID0gbmV3IE5vZGVTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICBub2RlU2VydmljZS5yZXNldCgpOwogICAgICAgICAgICAgICAgbmV0d29ya1NlcnZpY2UgPSBuZXcgTmV0d29ya1NlcnZpY2UoKTsKICAgICAgICAgICAgICAgIG5ldHdvcmtTZXJ2aWNlLnJlc2V0KGdldHRlcnNbJ2dlbmVyYXRpb25IYXNoJ10pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ1NFVF9DVVJSRU5UX1BFRVInLCBuZXR3b3JrU2VydmljZS5nZXREZWZhdWx0VXJsKCkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSk7CiAgICB9LAogICAgTE9BRF9QRUVSX05PREVTOiBmdW5jdGlvbiBMT0FEX1BFRVJfTk9ERVMoX3JlZjEyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTIuY29tbWl0LAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTIucm9vdEdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5LCBub2RlUmVwb3NpdG9yeSwgcGVlck5vZGVzLCBhbGxOb2RlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgICAgICAgICAgIG5vZGVSZXBvc2l0b3J5ID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTm9kZVJlcG9zaXRvcnkoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBub2RlUmVwb3NpdG9yeS5nZXROb2RlUGVlcnMoKS50b1Byb21pc2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcGVlck5vZGVzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICBhbGxOb2RlcyA9IFtdLmNvbmNhdChzdGF0aWNQZWVyTm9kZXMsIF90b0NvbnN1bWFibGVBcnJheShwZWVyTm9kZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICByZXR1cm4gYS5ob3N0LmxvY2FsZUNvbXBhcmUoYi5ob3N0KTsKICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3BlZXJOb2RlcycsIF8udW5pcUJ5KGFsbE5vZGVzLCAnaG9zdCcpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpOwogICAgfSwKCiAgICAvKioKICAgICAqIFdlYnNvY2tldCBBUEkKICAgICAqLwogICAgLy8gU3Vic2NyaWJlIHRvIGxhdGVzdCBhY2NvdW50IHRyYW5zYWN0aW9ucy4KICAgIFNVQlNDUklCRTogZnVuY3Rpb24gU1VCU0NSSUJFKF9yZWYxMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEzLmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjEzLmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYxMy5nZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgbGlzdGVuZXI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gdXNlIFJFU1RTZXJ2aWNlIHRvIG9wZW4gd2Vic29ja2V0IGNoYW5uZWwgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBnZXR0ZXJzWydsaXN0ZW5lciddOwogICAgICAgICAgICAgICAgbGlzdGVuZXIub3BlbigpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbGlzdGVuZXIubmV3QmxvY2soKS5zdWJzY3JpYmUoZnVuY3Rpb24gKGJsb2NrKSB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ1NFVF9DVVJSRU5UX0hFSUdIVCcsIGJsb2NrLmhlaWdodC5jb21wYWN0KCkpOwogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdkaWFnbm9zdGljL0FERF9JTkZPJywgJ05ldyBibG9jayBoZWlnaHQ6ICcgKyBibG9jay5oZWlnaHQuY29tcGFjdCgpLCB7CiAgICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOyAvLyB1cGRhdGUgc3RhdGUgb2YgbGlzdGVuZXJzICYgc3Vic2NyaXB0aW9ucwoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdhZGRTdWJzY3JpcHRpb25zJywgc3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKTsKICAgIH0sCiAgICAvLyBVbnN1YnNjcmliZSBmcm9tIGFsbCBvcGVuIHdlYnNvY2tldCBjb25uZWN0aW9ucwogICAgVU5TVUJTQ1JJQkU6IGZ1bmN0aW9uIFVOU1VCU0NSSUJFKF9yZWYxNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE0LmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmMTQuZ2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMsIGxpc3RlbmVyOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBnZXR0ZXJzLnN1YnNjcmlwdGlvbnM7CiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBnZXR0ZXJzLmxpc3RlbmVyOwoKICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcikgewogICAgICAgICAgICAgICAgICBsaXN0ZW5lci5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSAvLyB1cGRhdGUgc3RhdGUKCgogICAgICAgICAgICAgICAgY29tbWl0KCdzdWJzY3JpcHRpb25zJywgW10pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBTRVRfQ1VSUkVOVF9IRUlHSFQ6IGZ1bmN0aW9uIFNFVF9DVVJSRU5UX0hFSUdIVChfcmVmMTUsIGhlaWdodCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE1LmNvbW1pdDsKICAgICAgY29tbWl0KCdjdXJyZW50SGVpZ2h0JywgaGVpZ2h0KTsKICAgIH0sCiAgICBMT0FEX1RSQU5TQUNUSU9OX0ZFRVM6IGZ1bmN0aW9uIExPQURfVFJBTlNBQ1RJT05fRkVFUyhfcmVmMTYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNi5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNi5yb290R2V0dGVyczsKICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgdmFyIG5ldHdvcmtSZXBvc2l0b3J5ID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTmV0d29ya1JlcG9zaXRvcnkoKTsKICAgICAgbmV0d29ya1JlcG9zaXRvcnkuZ2V0VHJhbnNhY3Rpb25GZWVzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChmZWVzKSB7CiAgICAgICAgcmV0dXJuIGNvbW1pdCgndHJhbnNhY3Rpb25GZWVzJywgZmVlcyk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/hero/lared-wallet/src/store/Network.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport Vue from 'vue';\nimport {\n    BlockInfo,\n    IListener,\n    Listener,\n    NetworkType,\n    RepositoryFactory,\n    TransactionFees,\n    RentalFees,\n    RepositoryFactoryHttp,\n    NodeInfo,\n} from 'symbol-sdk';\nimport { Subscription } from 'rxjs';\nimport _ from 'lodash';\n// internal dependencies\nimport { $eventBus } from '../events';\nimport { URLHelpers } from '@/core/utils/URLHelpers';\nimport app from '@/main';\nimport { AwaitLock } from './AwaitLock';\n// configuration\nimport { UrlValidator } from '@/core/validation/validators';\nimport { NetworkModel } from '@/core/database/entities/NetworkModel';\nimport { NetworkService } from '@/services/NetworkService';\nimport { NodeService } from '@/services/NodeService';\nimport { NodeModel } from '@/core/database/entities/NodeModel';\nimport { URLInfo } from '@/core/utils/URLInfo';\nimport { NetworkConfigurationModel } from '@/core/database/entities/NetworkConfigurationModel';\nimport { ProfileModel } from '@/core/database/entities/ProfileModel';\nimport { networkConfig } from '@/config';\nconst Lock = AwaitLock.create();\n\n/// region custom types\n/**\n * Type SubscriptionType for Wallet Store\n * @type {SubscriptionType}\n */\ntype SubscriptionType = {\n    listener: IListener | undefined;\n    subscriptions: Subscription[];\n};\n\n/**\n * Type BlockRangeType for Wallet Store\n * @type {BlockRangeType}\n */\ntype BlockRangeType = { start: number };\n\n/// end-region custom types\n\nconst staticPeerNodes: NodeInfo[] = [\n    {\n        nodePublicKey: 'BE60BE426872B3CB46FE2C9BAA521731EA52C0D57E004FC7C84293887AC3BAD0',\n        host: 'beacon-01.ap-northeast-1.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: 'EE356A555802003C5666D8485185CDC3844F9502FAF24B589BDC4D6E9148022F',\n        host: 'beacon-01.eu-central-1.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: '81890592F960AAEBDA7612C8917FA9C267A845D78D74D4B3651AF093E6775001',\n        host: 'beacon-01.us-west-2.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: '2AF52C5AA9A5E13DD548A577DEBF21E7D3CC285A1B0798F4D450239CDDE5A169',\n        host: 'beacon-01.ap-southeast-1.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: 'D74B89EE9378DEBD510A4139F8E8B10B878E12956059CD9E13253CF3AD73BDEB',\n        host: 'beacon-01.us-west-1.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: '938D6C1BBDB09F3F1B9D95D2D902A94C95E3AA6F1069A805831D9E272DCF927F',\n        host: 'beacon-01.eu-west-1.0.10.0.x.symboldev.network',\n    },\n    {\n        nodePublicKey: '2A40F7895F56389BE40C063B897E9E66E64705D55B19FC43C8CEB5F7F14ABE59',\n        host: 'beacon-01.us-east-1.0.10.0.x.symboldev.network',\n    },\n] as NodeInfo[];\n\ninterface NetworkState {\n    initialized: boolean;\n    currentPeer: URLInfo;\n    currentPeerInfo: NodeModel;\n    networkModel: NetworkModel;\n    networkConfiguration: NetworkConfigurationModel;\n    repositoryFactory: RepositoryFactory;\n    listener: Listener;\n    generationHash: string;\n    networkType: NetworkType;\n    epochAdjustment: number;\n    isConnected: boolean;\n    knowNodes: NodeModel[];\n    currentHeight: number;\n    subscriptions: Subscription[];\n    transactionFees: TransactionFees;\n    rentalFeeEstimation: RentalFees;\n    networkIsNotMatchingProfile: boolean;\n    peerNodes: NodeInfo[];\n    selectedPeerNode: NodeInfo;\n}\n\nconst defaultPeer = URLHelpers.formatUrl(networkConfig.defaultNodeUrl);\n\nconst networkState: NetworkState = {\n    initialized: false,\n    currentPeer: defaultPeer,\n    currentPeerInfo: new NodeModel(defaultPeer.url, defaultPeer.url, true),\n    networkType: networkConfig.defaultNetworkType,\n    generationHash: undefined,\n    networkModel: undefined,\n    networkConfiguration: networkConfig.networkConfigurationDefaults,\n    repositoryFactory: NetworkService.createRepositoryFactory(networkConfig.defaultNodeUrl),\n    listener: undefined,\n    transactionFees: undefined,\n    isConnected: false,\n    knowNodes: [],\n    currentHeight: 0,\n    subscriptions: [],\n    rentalFeeEstimation: undefined,\n    epochAdjustment: networkConfig.networkConfigurationDefaults.epochAdjustment,\n    networkIsNotMatchingProfile: false,\n    peerNodes: [],\n    selectedPeerNode: null,\n};\n\nexport default {\n    namespaced: true,\n    state: networkState,\n    getters: {\n        getInitialized: (state: NetworkState) => state.initialized,\n        subscriptions: (state: NetworkState) => state.subscriptions,\n        networkType: (state: NetworkState) => state.networkType,\n        epochAdjustment: (state: NetworkState) => state.epochAdjustment,\n        generationHash: (state: NetworkState) => state.generationHash,\n        repositoryFactory: (state: NetworkState) => state.repositoryFactory,\n        listener: (state: NetworkState) => state.listener,\n        networkModel: (state: NetworkState) => state.networkModel,\n        networkConfiguration: (state: NetworkState) => state.networkConfiguration,\n        currentPeer: (state: NetworkState) => state.currentPeer,\n        currentPeerInfo: (state: NetworkState) => state.currentPeerInfo,\n        isConnected: (state: NetworkState) => state.isConnected,\n        knowNodes: (state: NetworkState) => state.knowNodes,\n        currentHeight: (state: NetworkState) => state.currentHeight,\n        transactionFees: (state: NetworkState) => state.transactionFees,\n        rentalFeeEstimation: (state: NetworkState) => state.rentalFeeEstimation,\n        networkIsNotMatchingProfile: (state: NetworkState) => state.networkIsNotMatchingProfile,\n        peerNodes: (state: NetworkState) => state.peerNodes,\n    },\n    mutations: {\n        setInitialized: (state: NetworkState, initialized: boolean) => {\n            state.initialized = initialized;\n        },\n        setConnected: (state: NetworkState, connected: boolean) => {\n            state.isConnected = connected;\n        },\n        currentHeight: (state: NetworkState, currentHeight: number) => Vue.set(state, 'currentHeight', currentHeight),\n        currentPeerInfo: (state: NetworkState, currentPeerInfo: NodeModel) => Vue.set(state, 'currentPeerInfo', currentPeerInfo),\n        repositoryFactory: (state: NetworkState, repositoryFactory: RepositoryFactory) =>\n            Vue.set(state, 'repositoryFactory', repositoryFactory),\n        networkConfiguration: (state: NetworkState, networkConfiguration: NetworkConfigurationModel) =>\n            Vue.set(state, 'networkConfiguration', networkConfiguration),\n        listener: (state: NetworkState, listener: Listener) => Vue.set(state, 'listener', listener),\n        networkModel: (state: NetworkState, networkModel: NetworkModel) => Vue.set(state, 'networkModel', networkModel),\n        knowNodes: (state: NetworkState, knowNodes: NodeModel[]) => Vue.set(state, 'knowNodes', knowNodes),\n        generationHash: (state: NetworkState, generationHash: string) => Vue.set(state, 'generationHash', generationHash),\n        networkType: (state: NetworkState, networkType: NetworkType) => Vue.set(state, 'networkType', networkType),\n        epochAdjustment: (state: NetworkState, epochAdjustment: number) => Vue.set(state, 'epochAdjustment', epochAdjustment),\n        currentPeer: (state: NetworkState, currentPeer: URLInfo) => Vue.set(state, 'currentPeer', currentPeer),\n        transactionFees: (state: NetworkState, transactionFees: TransactionFees) => {\n            state.transactionFees = transactionFees;\n        },\n        rentalFeeEstimation: (state: NetworkState, amount: RentalFees) => {\n            state.rentalFeeEstimation = amount;\n        },\n        networkIsNotMatchingProfile: (state: NetworkState, networkIsNotMatchingProfile: boolean) => {\n            Vue.set(state, 'networkIsNotMatchingProfile', networkIsNotMatchingProfile);\n        },\n\n        addPeer: (state: NetworkState, peerUrl: string) => {\n            const knowNodes: NodeModel[] = state.knowNodes;\n            const existNode = knowNodes.find((p: NodeModel) => p.url === peerUrl);\n            if (existNode) {\n                return;\n            }\n            const newNodes = [...knowNodes, new NodeModel(peerUrl, '', false)];\n            new NodeService().saveNodes(newNodes);\n            Vue.set(state, 'knowNodes', newNodes);\n        },\n        removePeer: (state: NetworkState, peerUrl: string) => {\n            const knowNodes: NodeModel[] = state.knowNodes;\n            const toBeDeleted = knowNodes.find((p: NodeModel) => p.url === peerUrl);\n            if (!toBeDeleted) {\n                return;\n            }\n            const newNodes = knowNodes.filter((n) => n !== toBeDeleted);\n            new NodeService().saveNodes(newNodes);\n            Vue.set(state, 'knowNodes', newNodes);\n        },\n        updateNode: (state: NetworkState, node: NodeModel) => {\n            const knowNodes: NodeModel[] = state.knowNodes;\n            const toBeUpdated = knowNodes.find((p: NodeModel) => p.url === node.url);\n            if (!toBeUpdated) {\n                return;\n            }\n            const newNodes = knowNodes.map((n) => (n.url === node.url ? node : n));\n            new NodeService().saveNodes(newNodes);\n            Vue.set(state, 'knowNodes', newNodes);\n        },\n        subscriptions: (state: NetworkState, data) => Vue.set(state, 'subscriptions', data),\n        addSubscriptions: (state: NetworkState, payload) => {\n            const subscriptions = state.subscriptions;\n            Vue.set(state, 'subscriptions', [...subscriptions, payload]);\n        },\n        peerNodes: (state: NetworkState, peerNodes: NodeInfo[]) => Vue.set(state, 'peerNodes', peerNodes),\n    },\n    actions: {\n        async initialize({ commit, dispatch, getters }) {\n            const callback = async () => {\n                // commit('knowNodes', new NodeService().getKnowNodesOnly())\n                await dispatch('CONNECT');\n                dispatch('REST_NETWORK_RENTAL_FEES');\n                // update store\n                commit('setInitialized', true);\n            };\n            // acquire async lock until initialized\n            await Lock.initialize(callback, { getters });\n        },\n        async uninitialize({ commit, dispatch, getters }) {\n            const callback = async () => {\n                dispatch('UNSUBSCRIBE');\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n\n        async CONNECT({ commit, dispatch, getters, rootGetters }, newCandidate: string | undefined) {\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            const networkService = new NetworkService();\n            const nodeService = new NodeService();\n            const networkModelResult = await networkService\n                .getNetworkModel(newCandidate, (currentProfile && currentProfile.generationHash) || undefined)\n                .toPromise();\n            if (!networkModelResult) {\n                throw new Error('Connect error, active peer cannot be found');\n            }\n            const { networkModel, repositoryFactory, fallback } = networkModelResult;\n            if (fallback) {\n                throw new Error('Connection Error.');\n            }\n            const oldGenerationHash = getters['generationHash'];\n            const getNodesPromise = nodeService.getNodes(repositoryFactory, networkModel.url).toPromise();\n            const getBlockchainHeightPromise = repositoryFactory.createChainRepository().getChainInfo().toPromise();\n            const nodes = await getNodesPromise;\n            const currentHeight = (await getBlockchainHeightPromise).height.compact();\n            const listener = repositoryFactory.createListener();\n\n            const currentPeer = URLHelpers.getNodeUrl(networkModel.url);\n            commit('currentPeer', currentPeer);\n            commit('networkModel', networkModel);\n            commit('networkConfiguration', networkModel.networkConfiguration);\n            commit('transactionFees', networkModel.transactionFees);\n            commit('networkType', networkModel.networkType);\n            commit('epochAdjustment', networkModel.networkConfiguration.epochAdjustment);\n            commit('generationHash', networkModel.generationHash);\n            commit('repositoryFactory', repositoryFactory);\n            commit('knowNodes', nodes);\n            commit('listener', listener);\n            commit('currentHeight', currentHeight);\n            commit(\n                'currentPeerInfo',\n                nodes.find((n) => n.url === networkModel.url),\n            );\n            commit('setConnected', true);\n            $eventBus.$emit('newConnection', currentPeer);\n            // subscribe to updates\n\n            if (oldGenerationHash != networkModel.generationHash) {\n                dispatch('account/NETWORK_CHANGED', {}, { root: true });\n                dispatch('statistics/LOAD', {}, { root: true });\n\n                // check if current profile network type and generation hash matches current network\n                if (\n                    currentProfile &&\n                    (currentProfile.networkType !== networkModel.networkType ||\n                        currentProfile.generationHash !== networkModel.generationHash)\n                ) {\n                    dispatch('SET_NETWORK_IS_NOT_MATCHING_PROFILE', true);\n                } else {\n                    dispatch('SET_NETWORK_IS_NOT_MATCHING_PROFILE', false);\n                }\n            }\n            await dispatch('UNSUBSCRIBE');\n            await listener.open();\n            dispatch('SUBSCRIBE');\n        },\n\n        async SET_CURRENT_PEER({ dispatch }, currentPeerUrl) {\n            if (!UrlValidator.validate(currentPeerUrl)) {\n                throw Error('Cannot change node. URL is not valid: ' + currentPeerUrl);\n            }\n\n            // - show loading overlay\n            dispatch(\n                'app/SET_LOADING_OVERLAY',\n                {\n                    show: true,\n                    message: `${app.$t('info_connecting_peer', {\n                        peerUrl: currentPeerUrl,\n                    })}`,\n                    disableCloseButton: true,\n                },\n                { root: true },\n            );\n\n            dispatch('diagnostic/ADD_DEBUG', 'Store action network/SET_CURRENT_PEER dispatched with: ' + currentPeerUrl, {\n                root: true,\n            });\n\n            try {\n                // - disconnect from previous node\n\n                await dispatch('CONNECT', currentPeerUrl);\n            } catch (e) {\n                console.log(e);\n                dispatch(\n                    'notification/ADD_ERROR',\n                    `${app.$t('error_peer_connection_went_wrong', {\n                        peerUrl: currentPeerUrl,\n                    })}`,\n                    { root: true },\n                );\n                dispatch('diagnostic/ADD_ERROR', 'Error with store action network/SET_CURRENT_PEER: ' + JSON.stringify(e), {\n                    root: true,\n                });\n            } finally {\n                // - hide loading overlay\n                dispatch('app/SET_LOADING_OVERLAY', { show: false }, { root: true });\n            }\n        },\n\n        REST_NETWORK_RENTAL_FEES({ rootGetters, dispatch }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            repositoryFactory\n                .createNetworkRepository()\n                .getRentalFees()\n                .subscribe((rentalFee: RentalFees) => {\n                    dispatch('SET_RENTAL_FEE_ESTIMATE', rentalFee);\n                });\n        },\n\n        SET_RENTAL_FEE_ESTIMATE({ commit }, rentalFee) {\n            commit('rentalFeeEstimation', rentalFee);\n        },\n        SET_NETWORK_IS_NOT_MATCHING_PROFILE({ commit }, networkIsNotMatchingProfile) {\n            commit('networkIsNotMatchingProfile', networkIsNotMatchingProfile);\n        },\n        ADD_KNOWN_PEER({ commit }, peerUrl) {\n            if (!UrlValidator.validate(peerUrl)) {\n                throw Error('Cannot add node. URL is not valid: ' + peerUrl);\n            }\n            commit('addPeer', peerUrl);\n        },\n        REMOVE_KNOWN_PEER({ commit }, peerUrl) {\n            commit('removePeer', peerUrl);\n        },\n\n        async UPDATE_PEER({ commit }, peerUrl) {\n            const repositoryFactory = new RepositoryFactoryHttp(peerUrl);\n            const nodeService = new NodeService();\n\n            const knownNodes = await nodeService.getNodes(repositoryFactory, peerUrl).toPromise();\n            commit('knowNodes', knownNodes);\n        },\n\n        async RESET_PEERS({ dispatch, getters }) {\n            const nodeService = new NodeService();\n            nodeService.reset();\n\n            const networkService = new NetworkService();\n            networkService.reset(getters['generationHash']);\n\n            dispatch('SET_CURRENT_PEER', networkService.getDefaultUrl());\n        },\n        async LOAD_PEER_NODES({ commit, rootGetters }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const nodeRepository = repositoryFactory.createNodeRepository();\n\n            const peerNodes: NodeInfo[] = await nodeRepository.getNodePeers().toPromise();\n            const allNodes = [...staticPeerNodes, ...peerNodes.sort((a, b) => a.host.localeCompare(b.host))];\n            commit('peerNodes', _.uniqBy(allNodes, 'host'));\n        },\n        /**\n         * Websocket API\n         */\n        // Subscribe to latest account transactions.\n        async SUBSCRIBE({ commit, dispatch, getters }) {\n            // use RESTService to open websocket channel subscriptions\n            const listener = getters['listener'] as Listener;\n            listener.open().then(() => {\n                const subscription = listener.newBlock().subscribe((block: BlockInfo) => {\n                    dispatch('SET_CURRENT_HEIGHT', block.height.compact());\n                    dispatch('diagnostic/ADD_INFO', 'New block height: ' + block.height.compact(), { root: true });\n                });\n                // update state of listeners & subscriptions\n                commit('addSubscriptions', subscription);\n            });\n        },\n\n        // Unsubscribe from all open websocket connections\n        async UNSUBSCRIBE({ commit, getters }) {\n            const subscriptions: Subscription[] = getters.subscriptions;\n            subscriptions.forEach((s) => s.unsubscribe());\n            const listener: Listener = getters.listener;\n            if (listener) {\n                listener.close();\n            }\n            // update state\n            commit('subscriptions', []);\n        },\n\n        SET_CURRENT_HEIGHT({ commit }, height) {\n            commit('currentHeight', height);\n        },\n\n        LOAD_TRANSACTION_FEES({ commit, rootGetters }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const networkRepository = repositoryFactory.createNetworkRepository();\n            networkRepository.getTransactionFees().subscribe((fees: TransactionFees) => commit('transactionFees', fees));\n        },\n    },\n};\n"],"sourceRoot":""}]}