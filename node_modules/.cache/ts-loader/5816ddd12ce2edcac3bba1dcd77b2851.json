{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/storage/AccountModelStorage.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/storage/AccountModelStorage.ts","mtime":1611927227183},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCi8qCiAqIENvcHlyaWdodCAyMDIwIE5FTSAoaHR0cHM6Ly9uZW0uaW8pCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KaW1wb3J0IHsgX19yZXN0IH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBWZXJzaW9uZWRPYmplY3RTdG9yYWdlIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL2JhY2tlbmRzL1ZlcnNpb25lZE9iamVjdFN0b3JhZ2UnOwppbXBvcnQgeyBIYXJ2ZXN0aW5nU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvSGFydmVzdGluZ1NlcnZpY2UnOwppbXBvcnQgeyBBZGRyZXNzIH0gZnJvbSAnc3ltYm9sLXNkayc7CmV4cG9ydCB2YXIgQWNjb3VudE1vZGVsU3RvcmFnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1ZlcnNpb25lZE9iamVjdFN0b3JhKSB7CiAgX2luaGVyaXRzKEFjY291bnRNb2RlbFN0b3JhZ2UsIF9WZXJzaW9uZWRPYmplY3RTdG9yYSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQWNjb3VudE1vZGVsU3RvcmFnZSk7CgogIGZ1bmN0aW9uIEFjY291bnRNb2RlbFN0b3JhZ2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWNjb3VudE1vZGVsU3RvcmFnZSk7CgogICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICdhY2NvdW50cycsIFt7CiAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIGFjY291bnRzIHRvIGhvbGQgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXknLAogICAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKGZyb20pIHsKICAgICAgICAvLyB1cGRhdGUgYWxsIGFjY291bnRzCiAgICAgICAgdmFyIGFjY291bnRzID0gT2JqZWN0LmtleXMoZnJvbSk7CiAgICAgICAgdmFyIG1vZGlmaWVkID0gZnJvbTsKICAgICAgICBhY2NvdW50cy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIG1vZGlmaWVkW25hbWVdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZFtuYW1lXSksIHsKICAgICAgICAgICAgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXk6ICcnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbW9kaWZpZWQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAgZGVzY3JpcHRpb246ICdVcGRhdGUgYWNjb3VudHMgZm9yIDAuOS42LjMgbmV0d29yayAoYWRkcmVzcyBjaGFuZ2VzKScsCiAgICAgIG1pZ3JhdGU6IGZ1bmN0aW9uIG1pZ3JhdGUoZnJvbSkgewogICAgICAgIC8vIHVwZGF0ZSBhbGwgcHJlLTAuOS42LnggcHJvZmlsZXMKICAgICAgICB2YXIgcHJvZmlsZXMgPSBPYmplY3Qua2V5cyhmcm9tKTsKICAgICAgICB2YXIgbW9kaWZpZWQgPSBmcm9tOwogICAgICAgIHByb2ZpbGVzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgbW9kaWZpZWRbbmFtZV0gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1vZGlmaWVkW25hbWVdKSwgewogICAgICAgICAgICAvLyByZS1nZW5lcmF0aW5nIGFkZHJlc3MgZnJvbSBwdWJsaWMga2V5ICgwLjkuNi54IGNoYW5nZXMgaW4gYWRkcmVzc2VzIGZvcm1hdCkKICAgICAgICAgICAgYWRkcmVzczogQWRkcmVzcy5jcmVhdGVGcm9tUHVibGljS2V5KG1vZGlmaWVkW25hbWVdLnB1YmxpY0tleSwgbW9kaWZpZWRbbmFtZV0ubmV0d29ya1R5cGUpLnBsYWluKCkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBtb2RpZmllZDsKICAgICAgfQogICAgfSwgewogICAgICBkZXNjcmlwdGlvbjogJ1Jlc2V0IGFjY291bnRzIGZvciAwLjkuNi4zIG5ldHdvcmsgKG5vbiBiYWNrd2FyZHMgY29tcGF0aWJsZSknLAogICAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKCkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAgZGVzY3JpcHRpb246ICdVcGRhdGUgYWNjb3VudHMgdG8gbW92ZSBoYXJ2ZXN0aW5nIGZpZWxkcyB0byBIYXJ2ZXN0aW5nTW9kZWxTdG9yYWdlJywKICAgICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZShmcm9tKSB7CiAgICAgICAgdmFyIGhhcnZlc3RpbmdTZXJ2aWNlID0gbmV3IEhhcnZlc3RpbmdTZXJ2aWNlKCk7IC8vIHVwZGF0ZSBhbGwgYWNjb3VudHMKCiAgICAgICAgdmFyIGFjY291bnRzID0gT2JqZWN0LmtleXMoZnJvbSk7CiAgICAgICAgdmFyIG1vZGlmaWVkID0gZnJvbTsKICAgICAgICBhY2NvdW50cy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIHZhciBfYSA9IG1vZGlmaWVkW25hbWVdLAogICAgICAgICAgICAgIGFkZHJlc3MgPSBfYS5hZGRyZXNzLAogICAgICAgICAgICAgIHNpZ25lZFBlcnNpc3RlbnREZWxSZXFUeHMgPSBfYS5zaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzLAogICAgICAgICAgICAgIGlzUGVyc2lzdGVudERlbFJlcVNlbnQgPSBfYS5pc1BlcnNpc3RlbnREZWxSZXFTZW50LAogICAgICAgICAgICAgIHNlbGVjdGVkSGFydmVzdGluZ05vZGUgPSBfYS5zZWxlY3RlZEhhcnZlc3RpbmdOb2RlLAogICAgICAgICAgICAgIG5vbkhhcnZlc3RpbmcgPSBfX3Jlc3QoX2EsIFsiYWRkcmVzcyIsICJzaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzIiwgImlzUGVyc2lzdGVudERlbFJlcVNlbnQiLCAic2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZSJdKTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBoYXJ2ZXN0aW5nU2VydmljZS5zYXZlSGFydmVzdGluZ01vZGVsKHsKICAgICAgICAgICAgICBhY2NvdW50QWRkcmVzczogYWRkcmVzcywKICAgICAgICAgICAgICBzaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzOiBzaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzLAogICAgICAgICAgICAgIGlzUGVyc2lzdGVudERlbFJlcVNlbnQ6IGlzUGVyc2lzdGVudERlbFJlcVNlbnQsCiAgICAgICAgICAgICAgc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZTogc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbW9kaWZpZWRbbmFtZV0gPSBPYmplY3QuYXNzaWduKHsKICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzCiAgICAgICAgICAgIH0sIG5vbkhhcnZlc3RpbmcpOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBtb2RpZmllZDsKICAgICAgfQogICAgfSwgewogICAgICBkZXNjcmlwdGlvbjogJ1Jlc2V0IGFjY291bnRzIGZvciAwLjEwLjAuNSBuZXR3b3JrIChub24gYmFja3dhcmRzIGNvbXBhdGlibGUpJywKICAgICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZSgpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICB9XSk7CiAgfQoKICByZXR1cm4gQWNjb3VudE1vZGVsU3RvcmFnZTsKfShWZXJzaW9uZWRPYmplY3RTdG9yYWdlKTsKLyoqCiAqIFNpbmdsZXRvbiBpbnN0YW5jZSBhcyB3ZSB3YW50IHRvIHJ1biB0aGUgbWlncmF0aW9uIGp1c3Qgb25jZQogKi8KCkFjY291bnRNb2RlbFN0b3JhZ2UuSU5TVEFOQ0UgPSBuZXcgQWNjb3VudE1vZGVsU3RvcmFnZSgpOw=="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/storage/AccountModelStorage.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nimport { VersionedObjectStorage } from '@/core/database/backends/VersionedObjectStorage';\nimport { AccountModel } from '@/core/database/entities/AccountModel';\nimport { HarvestingService } from '@/services/HarvestingService';\nimport { Address } from 'symbol-sdk';\n\nexport class AccountModelStorage extends VersionedObjectStorage<Record<string, AccountModel>> {\n    /**\n     * Singleton instance as we want to run the migration just once\n     */\n    public static INSTANCE = new AccountModelStorage();\n\n    private constructor() {\n        super('accounts', [\n            {\n                description: 'Update accounts to hold encRemoteAccountPrivateKey',\n                migrate: (from: any) => {\n                    // update all accounts\n                    const accounts = Object.keys(from);\n\n                    const modified: any = from;\n                    accounts.map((name: string) => {\n                        modified[name] = {\n                            ...modified[name],\n                            encRemoteAccountPrivateKey: '',\n                        };\n                    });\n\n                    return modified;\n                },\n            },\n            {\n                description: 'Update accounts for 0.9.6.3 network (address changes)',\n                migrate: (from: any) => {\n                    // update all pre-0.9.6.x profiles\n                    const profiles = Object.keys(from);\n\n                    const modified: any = from;\n                    profiles.map((name: string) => {\n                        modified[name] = {\n                            ...modified[name],\n                            // re-generating address from public key (0.9.6.x changes in addresses format)\n                            address: Address.createFromPublicKey(modified[name].publicKey, modified[name].networkType).plain(),\n                        };\n                    });\n\n                    return modified;\n                },\n            },\n            {\n                description: 'Reset accounts for 0.9.6.3 network (non backwards compatible)',\n                migrate: () => undefined,\n            },\n            {\n                description: 'Update accounts to move harvesting fields to HarvestingModelStorage',\n                migrate: (from: any) => {\n                    const harvestingService = new HarvestingService();\n\n                    // update all accounts\n                    const accounts = Object.keys(from);\n\n                    const modified: any = from;\n                    accounts.map((name: string) => {\n                        const {\n                            address,\n                            signedPersistentDelReqTxs,\n                            isPersistentDelReqSent,\n                            selectedHarvestingNode,\n                            ...nonHarvesting\n                        } = modified[name];\n\n                        try {\n                            harvestingService.saveHarvestingModel({\n                                accountAddress: address,\n                                signedPersistentDelReqTxs,\n                                isPersistentDelReqSent,\n                                selectedHarvestingNode,\n                            });\n                            modified[name] = { address, ...nonHarvesting };\n                        } catch (error) {\n                            console.log(error);\n                        }\n                    });\n\n                    return modified;\n                },\n            },\n            {\n                description: 'Reset accounts for 0.10.0.5 network (non backwards compatible)',\n                migrate: () => undefined,\n            },\n        ]);\n    }\n}\n"],"sourceRoot":""}]}