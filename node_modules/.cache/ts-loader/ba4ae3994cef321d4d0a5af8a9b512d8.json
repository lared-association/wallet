{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/services/AccountService.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/services/AccountService.ts","mtime":1606213958965},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCi8qCiAqIENvcHlyaWdodCAyMDIwIE5FTSAoaHR0cHM6Ly9uZW0uaW8pCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KaW1wb3J0IHsgQWNjb3VudCwgU2ltcGxlV2FsbGV0LCBDcnlwdG8gfSBmcm9tICdzeW1ib2wtc2RrJzsKaW1wb3J0IHsgRXh0ZW5kZWRLZXksIFdhbGxldCB9IGZyb20gJ3N5bWJvbC1oZC13YWxsZXRzJzsgLy8gaW50ZXJuYWwgZGVwZW5kZW5jaWVzCgppbXBvcnQgeyBEZXJpdmF0aW9uUGF0aExldmVscywgRGVyaXZhdGlvblNlcnZpY2UgfSBmcm9tICcuL0Rlcml2YXRpb25TZXJ2aWNlJzsKaW1wb3J0IHsgRGVyaXZhdGlvblBhdGhWYWxpZGF0b3IgfSBmcm9tICdAL2NvcmUvdmFsaWRhdGlvbi92YWxpZGF0b3JzJzsKaW1wb3J0IHsgQWNjb3VudE1vZGVsLCBBY2NvdW50VHlwZSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZS9lbnRpdGllcy9BY2NvdW50TW9kZWwnOwppbXBvcnQgeyBTaW1wbGVPYmplY3RTdG9yYWdlIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL2JhY2tlbmRzL1NpbXBsZU9iamVjdFN0b3JhZ2UnOwppbXBvcnQgeyBBY2NvdW50TW9kZWxTdG9yYWdlIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL3N0b3JhZ2UvQWNjb3VudE1vZGVsU3RvcmFnZSc7CmV4cG9ydCB2YXIgQWNjb3VudFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFjY291bnRTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFjY291bnRTZXJ2aWNlKTsKCiAgICB0aGlzLnN0b3JhZ2UgPSBBY2NvdW50TW9kZWxTdG9yYWdlLklOU1RBTkNFOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFjY291bnRTZXJ2aWNlLCBbewogICAga2V5OiAiZ2V0QWNjb3VudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjY291bnRzKCkgewogICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLmdldEFjY291bnRzQnlJZCgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBY2NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY2NvdW50KGlkKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEFjY291bnRzQnlJZCgpW2lkXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBY2NvdW50c0J5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjY291bnRzQnlJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXQoKSB8fCB7fTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlQWNjb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFjY291bnQoYWNjb3VudCkgewogICAgICB2YXIgYWNjb3VudHMgPSB0aGlzLmdldEFjY291bnRzQnlJZCgpOwogICAgICBhY2NvdW50c1thY2NvdW50LmlkXSA9IGFjY291bnQ7CiAgICAgIHRoaXMuc3RvcmFnZS5zZXQoYWNjb3VudHMpOwogICAgICByZXR1cm4gYWNjb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxldGVBY2NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGFjY291bnQpIHsKICAgICAgdmFyIGFjY291bnRzID0gdGhpcy5nZXRBY2NvdW50c0J5SWQoKTsKICAgICAgZGVsZXRlIGFjY291bnRzW2FjY291bnQuaWRdOwogICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGFjY291bnRzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVOYW1lKGFjY291bnQsIG5hbWUpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZUFjY291bnQoT2JqZWN0LmFzc2lnbihhY2NvdW50LCB7CiAgICAgICAgbmFtZTogbmFtZQogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlSXNNdWx0aXNpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSXNNdWx0aXNpZyhhY2NvdW50LCBpc011bHRpc2lnKSB7CiAgICAgIHJldHVybiB0aGlzLnNhdmVBY2NvdW50KE9iamVjdC5hc3NpZ24oYWNjb3VudCwgewogICAgICAgIGlzTXVsdGlzaWc6IGlzTXVsdGlzaWcKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVJlbW90ZUFjY291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVJlbW90ZUFjY291bnQoYWNjb3VudCwgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZUFjY291bnQoT2JqZWN0LmFzc2lnbihhY2NvdW50LCB7CiAgICAgICAgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXk6IGVuY1JlbW90ZUFjY291bnRQcml2YXRlS2V5CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzKGFjY291bnQsIHNpZ25lZFBlcnNpc3RlbnREZWxSZXFUeHMpIHsKICAgICAgcmV0dXJuIHRoaXMuc2F2ZUFjY291bnQoT2JqZWN0LmFzc2lnbihhY2NvdW50LCB7CiAgICAgICAgc2lnbmVkUGVyc2lzdGVudERlbFJlcVR4czogc2lnbmVkUGVyc2lzdGVudERlbFJlcVR4cwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlSXNQZXJzaXN0ZW50RGVsUmVxU2VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSXNQZXJzaXN0ZW50RGVsUmVxU2VudChhY2NvdW50LCBpc1BlcnNpc3RlbnREZWxSZXFTZW50KSB7CiAgICAgIHJldHVybiB0aGlzLnNhdmVBY2NvdW50KE9iamVjdC5hc3NpZ24oYWNjb3VudCwgewogICAgICAgIGlzUGVyc2lzdGVudERlbFJlcVNlbnQ6IGlzUGVyc2lzdGVudERlbFJlcVNlbnQKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVNlbGVjdGVkSGFydmVzdGluZ05vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkSGFydmVzdGluZ05vZGUoYWNjb3VudCwgc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZSkgewogICAgICByZXR1cm4gdGhpcy5zYXZlQWNjb3VudChPYmplY3QuYXNzaWduKGFjY291bnQsIHsKICAgICAgICBzZWxlY3RlZEhhcnZlc3RpbmdOb2RlOiBzZWxlY3RlZEhhcnZlc3RpbmdOb2RlCiAgICAgIH0pKTsKICAgIH0KICAgIC8qKgogICAgICogRGVyaXZlIFxhIHBhdGggdXNpbmcgXGEgbW5lbW9uaWMgcGFzcyBwaHJhc2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRBY2NvdW50QnlQYXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY2NvdW50QnlQYXRoKG1uZW1vbmljLCBuZXR3b3JrVHlwZSkgewogICAgICB2YXIgcGF0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogQWNjb3VudFNlcnZpY2UuREVGQVVMVF9BQ0NPVU5UX1BBVEg7CgogICAgICBpZiAoZmFsc2UgPT09IERlcml2YXRpb25QYXRoVmFsaWRhdG9yLnZhbGlkYXRlKHBhdGgpKSB7CiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIGRlcml2YXRpb24gcGF0aDogJyArIHBhdGg7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UpOwogICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpOwogICAgICB9IC8vIGNyZWF0ZSBoZCBleHRlbmRlZCBrZXkKCgogICAgICB2YXIgZXh0ZW5kZWRLZXkgPSBFeHRlbmRlZEtleS5jcmVhdGVGcm9tU2VlZChtbmVtb25pYy50b1NlZWQoKS50b1N0cmluZygnaGV4JykpOyAvLyBjcmVhdGUgYWNjb3VudAoKICAgICAgdmFyIGFjY291bnQgPSBuZXcgV2FsbGV0KGV4dGVuZGVkS2V5KTsKICAgICAgcmV0dXJuIEFjY291bnQuY3JlYXRlRnJvbVByaXZhdGVLZXkoYWNjb3VudC5nZXRDaGlsZEFjY291bnRQcml2YXRlS2V5KHBhdGgpLCBuZXR3b3JrVHlwZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBleHRlbmRlZCBrZXkgYXJvdW5kIFxhIG1uZW1vbmljIGZvciBcYSBuZXR3b3JrVHlwdwogICAgICogQHBhcmFtIHtNbmVtb25pY1Bhc3NQaHJhc2V9IG1uZW1vbmljCiAgICAgKiBAcmV0dXJuIHtFeHRlbmRlZEtleX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRFeHRlbmRlZEtleUZyb21NbmVtb25pYyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RXh0ZW5kZWRLZXlGcm9tTW5lbW9uaWMobW5lbW9uaWMpIHsKICAgICAgcmV0dXJuIEV4dGVuZGVkS2V5LmNyZWF0ZUZyb21TZWVkKG1uZW1vbmljLnRvU2VlZCgpLnRvU3RyaW5nKCdoZXgnKSk7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIFxhIGNvdW50IGFjY291bnRzIHVzaW5nIFxhIG1uZW1vbmljCiAgICAgKiBAcGFyYW0ge01uZW1vbmljUGFzc1BocmFzZX0gbW5lbW9uaWMKICAgICAqIEBwYXJhbSB7TmV0d29ya1R5cGV9IG5ldHdvcmtUeXBlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhcnRQYXRoCiAgICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQKICAgICAqIEByZXR1cm4ge0FjY291bnRbXX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZW5lcmF0ZUFjY291bnRzRnJvbU1uZW1vbmljIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUFjY291bnRzRnJvbU1uZW1vbmljKG1uZW1vbmljLCBuZXR3b3JrVHlwZSkgewogICAgICB2YXIgY291bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDEwOwogICAgICB2YXIgZGVyaXZhdGlvblNlcnZpY2UgPSBuZXcgRGVyaXZhdGlvblNlcnZpY2UoKTsgLy8gY3JlYXRlIGhkIGV4dGVuZGVkIGtleQoKICAgICAgdmFyIHhrZXkgPSB0aGlzLmdldEV4dGVuZGVkS2V5RnJvbU1uZW1vbmljKG1uZW1vbmljKTsgLy8gaW5jcmVtZW50IGRlcml2YXRpb24gcGF0aCBcYSBjb3VudCB0aW1lcwoKICAgICAgdmFyIHBhdGhzID0gX3RvQ29uc3VtYWJsZUFycmF5KEFycmF5KGNvdW50KS5rZXlzKCkpLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICBpZiAoaW5kZXggPT0gMCkgewogICAgICAgICAgcmV0dXJuIEFjY291bnRTZXJ2aWNlLkRFRkFVTFRfQUNDT1VOVF9QQVRIOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRlcml2YXRpb25TZXJ2aWNlLmluY3JlbWVudFBhdGhMZXZlbChBY2NvdW50U2VydmljZS5ERUZBVUxUX0FDQ09VTlRfUEFUSCwgRGVyaXZhdGlvblBhdGhMZXZlbHMuUHJvZmlsZSwgaW5kZXgpOwogICAgICB9KTsKCiAgICAgIHZhciB3YWxsZXRzID0gcGF0aHMubWFwKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQoeGtleS5kZXJpdmVQYXRoKHBhdGgpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB3YWxsZXRzLm1hcChmdW5jdGlvbiAod2FsbGV0KSB7CiAgICAgICAgcmV0dXJuIEFjY291bnQuY3JlYXRlRnJvbVByaXZhdGVLZXkod2FsbGV0LmdldEFjY291bnRQcml2YXRlS2V5KCksIG5ldHdvcmtUeXBlKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFjY291bnRzIHVzaW5nIGEgbW5lbW9uaWMgYW5kIGFuIGFycmF5IG9mIHBhdGhzCiAgICAgKiBAcGFyYW0ge01uZW1vbmljUGFzc1BocmFzZX0gbW5lbW9uaWMKICAgICAqIEBwYXJhbSB7TmV0d29ya1R5cGV9IG5ldHdvcmtUeXBlCiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBwYXRocwogICAgICogQHJldHVybnMge0FjY291bnRbXX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZW5lcmF0ZUFjY291bnRzRnJvbVBhdGhzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUFjY291bnRzRnJvbVBhdGhzKG1uZW1vbmljLCBuZXR3b3JrVHlwZSwgcGF0aHMpIHsKICAgICAgLy8gY3JlYXRlIGhkIGV4dGVuZGVkIGtleQogICAgICB2YXIgeGtleSA9IHRoaXMuZ2V0RXh0ZW5kZWRLZXlGcm9tTW5lbW9uaWMobW5lbW9uaWMpOwogICAgICB2YXIgd2FsbGV0cyA9IHBhdGhzLm1hcChmdW5jdGlvbiAocGF0aCkgewogICAgICAgIHJldHVybiBuZXcgV2FsbGV0KHhrZXkuZGVyaXZlUGF0aChwYXRoKSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gd2FsbGV0cy5tYXAoZnVuY3Rpb24gKHdhbGxldCkgewogICAgICAgIHJldHVybiBBY2NvdW50LmNyZWF0ZUZyb21Qcml2YXRlS2V5KHdhbGxldC5nZXRBY2NvdW50UHJpdmF0ZUtleSgpLCBuZXR3b3JrVHlwZSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbGlzdCBvZiBhZGRyZXNzZXMgdXNpbmcgXGEgbW5lbW9uaWMKICAgICAqIEByZXR1cm4ge0FkZHJlc3NbXX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRBZGRyZXNzZXNGcm9tTW5lbW9uaWMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFkZHJlc3Nlc0Zyb21NbmVtb25pYyhtbmVtb25pYywgbmV0d29ya1R5cGUpIHsKICAgICAgdmFyIGNvdW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAxMDsKICAgICAgdmFyIGFjY291bnRzID0gdGhpcy5nZW5lcmF0ZUFjY291bnRzRnJvbU1uZW1vbmljKG1uZW1vbmljLCBuZXR3b3JrVHlwZSwgY291bnQpOwogICAgICByZXR1cm4gYWNjb3VudHMubWFwKGZ1bmN0aW9uIChhY2N0KSB7CiAgICAgICAgcmV0dXJuIGFjY3QuYWRkcmVzczsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0S25vd25BY2NvdW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0S25vd25BY2NvdW50cyhrbm93bkFjY291bnRzKSB7CiAgICAgIC8vIHNlYXJjaCBpbiBrbm93biBhY2NvdW50cwogICAgICByZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpLmZpbHRlcihmdW5jdGlvbiAod2x0KSB7CiAgICAgICAgcmV0dXJuIGtub3duQWNjb3VudHMuaW5jbHVkZXMod2x0LmlkKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIGFjY291bnQgaW5zdGFuY2UgZnJvbSBtbmVtb25pYwogICAgICogQHJldHVybiB7QWNjb3VudE1vZGVsfQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERlZmF1bHRBY2NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWZhdWx0QWNjb3VudChjdXJyZW50UHJvZmlsZSwgbW5lbW9uaWMsIHBhc3N3b3JkLCBuZXR3b3JrVHlwZSkgewogICAgICB2YXIgYWNjb3VudCA9IHRoaXMuZ2V0QWNjb3VudEJ5UGF0aChtbmVtb25pYywgbmV0d29ya1R5cGUsIEFjY291bnRTZXJ2aWNlLkRFRkFVTFRfQUNDT1VOVF9QQVRIKTsKICAgICAgdmFyIHNpbXBsZVdhbGxldCA9IFNpbXBsZVdhbGxldC5jcmVhdGVGcm9tUHJpdmF0ZUtleSgnU2VlZCBBY2NvdW50IDEnLCBwYXNzd29yZCwgYWNjb3VudC5wcml2YXRlS2V5LCBuZXR3b3JrVHlwZSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IFNpbXBsZU9iamVjdFN0b3JhZ2UuZ2VuZXJhdGVJZGVudGlmaWVyKCksCiAgICAgICAgcHJvZmlsZU5hbWU6IGN1cnJlbnRQcm9maWxlLnByb2ZpbGVOYW1lLAogICAgICAgIG5hbWU6IHNpbXBsZVdhbGxldC5uYW1lLAogICAgICAgIG5vZGU6ICcnLAogICAgICAgIHR5cGU6IEFjY291bnRUeXBlLlNFRUQsCiAgICAgICAgYWRkcmVzczogc2ltcGxlV2FsbGV0LmFkZHJlc3MucGxhaW4oKSwKICAgICAgICBwdWJsaWNLZXk6IGFjY291bnQucHVibGljS2V5LAogICAgICAgIGVuY3J5cHRlZFByaXZhdGVLZXk6IHNpbXBsZVdhbGxldC5lbmNyeXB0ZWRQcml2YXRlS2V5LAogICAgICAgIHBhdGg6IEFjY291bnRTZXJ2aWNlLkRFRkFVTFRfQUNDT1VOVF9QQVRILAogICAgICAgIGlzTXVsdGlzaWc6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIGNoaWxkIGFjY291bnQgaW5zdGFuY2UgZnJvbSBtbmVtb25pYyBhbmQgcGF0aAogICAgICogQHJldHVybiB7QWNjb3VudE1vZGVsfQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldENoaWxkQWNjb3VudEJ5UGF0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2hpbGRBY2NvdW50QnlQYXRoKGN1cnJlbnRQcm9maWxlLCBwYXNzd29yZCwgbW5lbW9uaWMsIG5leHRQYXRoLCBuZXR3b3JrVHlwZSwgY2hpbGRBY2NvdW50TmFtZSkgewogICAgICAvLyAtIGRlcml2ZSBhY2NvdW50CiAgICAgIHZhciBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50QnlQYXRoKG1uZW1vbmljLCBuZXR3b3JrVHlwZSwgbmV4dFBhdGgpOwogICAgICB2YXIgc2ltcGxlV2FsbGV0ID0gU2ltcGxlV2FsbGV0LmNyZWF0ZUZyb21Qcml2YXRlS2V5KGNoaWxkQWNjb3VudE5hbWUsIHBhc3N3b3JkLCBhY2NvdW50LnByaXZhdGVLZXksIG5ldHdvcmtUeXBlKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogU2ltcGxlT2JqZWN0U3RvcmFnZS5nZW5lcmF0ZUlkZW50aWZpZXIoKSwKICAgICAgICBwcm9maWxlTmFtZTogY3VycmVudFByb2ZpbGUucHJvZmlsZU5hbWUsCiAgICAgICAgbmFtZTogY2hpbGRBY2NvdW50TmFtZSwKICAgICAgICBub2RlOiAnJywKICAgICAgICB0eXBlOiBBY2NvdW50VHlwZS5TRUVELAogICAgICAgIGFkZHJlc3M6IHNpbXBsZVdhbGxldC5hZGRyZXNzLnBsYWluKCksCiAgICAgICAgcHVibGljS2V5OiBhY2NvdW50LnB1YmxpY0tleSwKICAgICAgICBlbmNyeXB0ZWRQcml2YXRlS2V5OiBzaW1wbGVXYWxsZXQuZW5jcnlwdGVkUHJpdmF0ZUtleSwKICAgICAgICBwYXRoOiBuZXh0UGF0aCwKICAgICAgICBpc011bHRpc2lnOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBzdWIgYWNjb3VudCBieSBwcml2YXRlIGtleQogICAgICogQHBhcmFtIGN1cnJlbnRQcm9maWxlCiAgICAgKiBAcGFyYW0gcGFzc3dvcmQKICAgICAqIEBwYXJhbSBjaGlsZEFjY291bnROYW1lCiAgICAgKiBAcGFyYW0gcHJpdmF0ZUtleQogICAgICogQHBhcmFtIG5ldHdvcmtUeXBlCiAgICAgKiBAcmV0dXJuIHtBY2NvdW50TW9kZWx9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0U3ViQWNjb3VudEJ5UHJpdmF0ZUtleSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3ViQWNjb3VudEJ5UHJpdmF0ZUtleShjdXJyZW50UHJvZmlsZSwgcGFzc3dvcmQsIGNoaWxkQWNjb3VudE5hbWUsIHByaXZhdGVLZXksIG5ldHdvcmtUeXBlKSB7CiAgICAgIHZhciBhY2NvdW50ID0gQWNjb3VudC5jcmVhdGVGcm9tUHJpdmF0ZUtleShwcml2YXRlS2V5LCBuZXR3b3JrVHlwZSk7CiAgICAgIHZhciBzaW1wbGVXYWxsZXQgPSBTaW1wbGVXYWxsZXQuY3JlYXRlRnJvbVByaXZhdGVLZXkoY2hpbGRBY2NvdW50TmFtZSwgcGFzc3dvcmQsIGFjY291bnQucHJpdmF0ZUtleSwgbmV0d29ya1R5cGUpOwogICAgICByZXR1cm4gewogICAgICAgIGlkOiBTaW1wbGVPYmplY3RTdG9yYWdlLmdlbmVyYXRlSWRlbnRpZmllcigpLAogICAgICAgIHByb2ZpbGVOYW1lOiBjdXJyZW50UHJvZmlsZS5wcm9maWxlTmFtZSwKICAgICAgICBuYW1lOiBjaGlsZEFjY291bnROYW1lLAogICAgICAgIG5vZGU6ICcnLAogICAgICAgIHR5cGU6IEFjY291bnRUeXBlLlBSSVZBVEVfS0VZLAogICAgICAgIGFkZHJlc3M6IHNpbXBsZVdhbGxldC5hZGRyZXNzLnBsYWluKCksCiAgICAgICAgcHVibGljS2V5OiBhY2NvdW50LnB1YmxpY0tleSwKICAgICAgICBlbmNyeXB0ZWRQcml2YXRlS2V5OiBzaW1wbGVXYWxsZXQuZW5jcnlwdGVkUHJpdmF0ZUtleSwKICAgICAgICBwYXRoOiAnJywKICAgICAgICBpc011bHRpc2lnOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgQWNjb3VudE1vZGVsIHdpdGggYW4gdXBkYXRlZCBTaW1wbGVXYWxsZXQKICAgICAqIEBwYXJhbSB7QWNjb3VudE1vZGVsfSBhY2NvdW50CiAgICAgKiBAcGFyYW0ge1Bhc3N3b3JkfSBvbGRQYXNzd29yZAogICAgICogQHBhcmFtIHtQYXNzd29yZH0gbmV3UGFzc3dvcmQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVXYWxsZXRQYXNzd29yZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlV2FsbGV0UGFzc3dvcmQoYWNjb3VudCwgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkKSB7CiAgICAgIC8vIFBhc3N3b3JkIG1vZGlmaWNhdGlvbiBpcyBub3QgYWxsb3dlZCBmb3IgaGFyZHdhcmUgd2FsbGV0cwogICAgICBpZiAoYWNjb3VudC50eXBlICE9PSBBY2NvdW50VHlwZS5TRUVEICYmIGFjY291bnQudHlwZSAhPT0gQWNjb3VudFR5cGUuUFJJVkFURV9LRVkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hhcmR3YXJlIGFjY291bnQgcGFzc3dvcmQgY2Fubm90IGJlIGNoYW5nZWQnKTsKICAgICAgfQoKICAgICAgdmFyIHByaXZhdGVLZXkgPSBDcnlwdG8uZGVjcnlwdChhY2NvdW50LmVuY3J5cHRlZFByaXZhdGVLZXksIG9sZFBhc3N3b3JkLnZhbHVlKTsgLy8gRW5jcnlwdCB0aGUgcHJpdmF0ZSBrZXkgd2l0aCB0aGUgbmV3IHBhc3N3b3JkCgogICAgICB2YXIgbmV3U2ltcGxlV2FsbGV0ID0gU2ltcGxlV2FsbGV0LmNyZWF0ZUZyb21Qcml2YXRlS2V5KGFjY291bnQubmFtZSwgbmV3UGFzc3dvcmQsIHByaXZhdGVLZXksIEFjY291bnRNb2RlbC5nZXRPYmplY3RzKGFjY291bnQpLmFkZHJlc3MubmV0d29ya1R5cGUpOyAvLyBVcGRhdGUgdGhlIGFjY291bnQgbW9kZWwKCiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGFjY291bnQpLCB7CiAgICAgICAgZW5jcnlwdGVkUHJpdmF0ZUtleTogbmV3U2ltcGxlV2FsbGV0LmVuY3J5cHRlZFByaXZhdGVLZXkKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWNjb3VudFNlcnZpY2U7Cn0oKTsKLyoqCiAqIERlZmF1bHQgYWNjb3VudCBkZXJpdmF0aW9uIHBhdGgKICogQHZhciB7c3RyaW5nfQogKi8KCkFjY291bnRTZXJ2aWNlLkRFRkFVTFRfQUNDT1VOVF9QQVRIID0gIm0vNDQnLzQzNDMnLzAnLzAnLzAnIjs="},{"version":3,"sources":["/home/hero/lared-wallet/src/services/AccountService.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport { Account, Address, NetworkType, Password, SimpleWallet, Crypto } from 'symbol-sdk';\nimport { ExtendedKey, MnemonicPassPhrase, Wallet } from 'symbol-hd-wallets';\n// internal dependencies\nimport { DerivationPathLevels, DerivationService } from './DerivationService';\nimport { DerivationPathValidator } from '@/core/validation/validators';\nimport { AccountModel, AccountType } from '@/core/database/entities/AccountModel';\nimport { ProfileModel } from '@/core/database/entities/ProfileModel';\nimport { SimpleObjectStorage } from '@/core/database/backends/SimpleObjectStorage';\nimport { AccountModelStorage } from '@/core/database/storage/AccountModelStorage';\nimport { NodeModel } from '@/core/database/entities/NodeModel';\n\nexport class AccountService {\n    private readonly storage = AccountModelStorage.INSTANCE;\n\n    /**\n     * Default account derivation path\n     * @var {string}\n     */\n    public static readonly DEFAULT_ACCOUNT_PATH = `m/44'/4343'/0'/0'/0'`;\n\n    public getAccounts(): AccountModel[] {\n        return Object.values(this.getAccountsById());\n    }\n\n    public getAccount(id: string): AccountModel | undefined {\n        return this.getAccountsById()[id];\n    }\n\n    public getAccountsById(): Record<string, AccountModel> {\n        return this.storage.get() || {};\n    }\n\n    public saveAccount(account: AccountModel): AccountModel {\n        const accounts = this.getAccountsById();\n        accounts[account.id] = account;\n        this.storage.set(accounts);\n        return account;\n    }\n\n    public deleteAccount(account: AccountModel) {\n        const accounts = this.getAccountsById();\n        delete accounts[account.id];\n        this.storage.set(accounts);\n    }\n\n    public updateName(account: AccountModel, name: string): AccountModel {\n        return this.saveAccount(Object.assign(account, { name }));\n    }\n\n    public updateIsMultisig(account: AccountModel, isMultisig: boolean): AccountModel {\n        return this.saveAccount(Object.assign(account, { isMultisig }));\n    }\n\n    public updateRemoteAccount(account: AccountModel, encRemoteAccountPrivateKey: string): AccountModel {\n        return this.saveAccount(Object.assign(account, { encRemoteAccountPrivateKey }));\n    }\n\n    public updateSignedPersistentDelReqTxs(account: AccountModel, signedPersistentDelReqTxs): AccountModel {\n        return this.saveAccount(Object.assign(account, { signedPersistentDelReqTxs }));\n    }\n\n    public updateIsPersistentDelReqSent(account: AccountModel, isPersistentDelReqSent: boolean): AccountModel {\n        return this.saveAccount(Object.assign(account, { isPersistentDelReqSent }));\n    }\n\n    public updateSelectedHarvestingNode(account: AccountModel, selectedHarvestingNode: NodeModel): AccountModel {\n        return this.saveAccount(Object.assign(account, { selectedHarvestingNode }));\n    }\n\n    /**\n     * Derive \\a path using \\a mnemonic pass phrase\n     */\n    public getAccountByPath(\n        mnemonic: MnemonicPassPhrase,\n        networkType: NetworkType,\n        path: string = AccountService.DEFAULT_ACCOUNT_PATH,\n    ): Account {\n        if (false === DerivationPathValidator.validate(path)) {\n            const errorMessage = 'Invalid derivation path: ' + path;\n            console.error(errorMessage);\n            throw new Error(errorMessage);\n        }\n\n        // create hd extended key\n        const extendedKey = ExtendedKey.createFromSeed(mnemonic.toSeed().toString('hex'));\n\n        // create account\n        const account = new Wallet(extendedKey);\n        return Account.createFromPrivateKey(account.getChildAccountPrivateKey(path), networkType);\n    }\n\n    /**\n     * Get extended key around \\a mnemonic for \\a networkTypw\n     * @param {MnemonicPassPhrase} mnemonic\n     * @return {ExtendedKey}\n     */\n    public getExtendedKeyFromMnemonic(mnemonic: MnemonicPassPhrase): ExtendedKey {\n        return ExtendedKey.createFromSeed(mnemonic.toSeed().toString('hex'));\n    }\n\n    /**\n     * Generate \\a count accounts using \\a mnemonic\n     * @param {MnemonicPassPhrase} mnemonic\n     * @param {NetworkType} networkType\n     * @param {string} startPath\n     * @param {number} count\n     * @return {Account[]}\n     */\n    public generateAccountsFromMnemonic(mnemonic: MnemonicPassPhrase, networkType: NetworkType, count: number = 10): Account[] {\n        const derivationService = new DerivationService();\n\n        // create hd extended key\n        const xkey = this.getExtendedKeyFromMnemonic(mnemonic);\n\n        // increment derivation path \\a count times\n        const paths = [...Array(count).keys()].map((index) => {\n            if (index == 0) {\n                return AccountService.DEFAULT_ACCOUNT_PATH;\n            }\n\n            return derivationService.incrementPathLevel(AccountService.DEFAULT_ACCOUNT_PATH, DerivationPathLevels.Profile, index);\n        });\n\n        const wallets = paths.map((path) => new Wallet(xkey.derivePath(path)));\n        return wallets.map((wallet) => Account.createFromPrivateKey(wallet.getAccountPrivateKey(), networkType));\n    }\n\n    /**\n     * Generate accounts using a mnemonic and an array of paths\n     * @param {MnemonicPassPhrase} mnemonic\n     * @param {NetworkType} networkType\n     * @param {string[]} paths\n     * @returns {Account[]}\n     */\n    public generateAccountsFromPaths(mnemonic: MnemonicPassPhrase, networkType: NetworkType, paths: string[]): Account[] {\n        // create hd extended key\n        const xkey = this.getExtendedKeyFromMnemonic(mnemonic);\n        const wallets = paths.map((path) => new Wallet(xkey.derivePath(path)));\n\n        return wallets.map((wallet) => Account.createFromPrivateKey(wallet.getAccountPrivateKey(), networkType));\n    }\n\n    /**\n     * Get list of addresses using \\a mnemonic\n     * @return {Address[]}\n     */\n    public getAddressesFromMnemonic(mnemonic: MnemonicPassPhrase, networkType: NetworkType, count: number = 10): Address[] {\n        const accounts = this.generateAccountsFromMnemonic(mnemonic, networkType, count);\n        return accounts.map((acct) => acct.address);\n    }\n\n    public getKnownAccounts(knownAccounts: string[]): AccountModel[] {\n        // search in known accounts\n        return this.getAccounts().filter((wlt) => knownAccounts.includes(wlt.id));\n    }\n\n    /**\n     * Create a account instance from mnemonic\n     * @return {AccountModel}\n     */\n    public getDefaultAccount(\n        currentProfile: ProfileModel,\n        mnemonic: MnemonicPassPhrase,\n        password: Password,\n        networkType: NetworkType,\n    ): AccountModel {\n        const account = this.getAccountByPath(mnemonic, networkType, AccountService.DEFAULT_ACCOUNT_PATH);\n\n        const simpleWallet = SimpleWallet.createFromPrivateKey('Seed Account 1', password, account.privateKey, networkType);\n\n        return {\n            id: SimpleObjectStorage.generateIdentifier(),\n            profileName: currentProfile.profileName,\n            name: simpleWallet.name,\n            node: '',\n            type: AccountType.SEED,\n            address: simpleWallet.address.plain(),\n            publicKey: account.publicKey,\n            encryptedPrivateKey: simpleWallet.encryptedPrivateKey,\n            path: AccountService.DEFAULT_ACCOUNT_PATH,\n            isMultisig: false,\n        };\n    }\n\n    /**\n     * Create a child account instance from mnemonic and path\n     * @return {AccountModel}\n     */\n    public getChildAccountByPath(\n        currentProfile: ProfileModel,\n        password: Password,\n        mnemonic: MnemonicPassPhrase,\n        nextPath: string,\n        networkType: NetworkType,\n        childAccountName: string,\n    ): AccountModel {\n        // - derive account\n        const account = this.getAccountByPath(mnemonic, networkType, nextPath);\n\n        const simpleWallet = SimpleWallet.createFromPrivateKey(childAccountName, password, account.privateKey, networkType);\n\n        return {\n            id: SimpleObjectStorage.generateIdentifier(),\n            profileName: currentProfile.profileName,\n            name: childAccountName,\n            node: '',\n            type: AccountType.SEED,\n            address: simpleWallet.address.plain(),\n            publicKey: account.publicKey,\n            encryptedPrivateKey: simpleWallet.encryptedPrivateKey,\n            path: nextPath,\n            isMultisig: false,\n        };\n    }\n\n    /**\n     * Create a sub account by private key\n     * @param currentProfile\n     * @param password\n     * @param childAccountName\n     * @param privateKey\n     * @param networkType\n     * @return {AccountModel}\n     */\n    public getSubAccountByPrivateKey(\n        currentProfile: ProfileModel,\n        password: Password,\n        childAccountName: string,\n        privateKey: string,\n        networkType: NetworkType,\n    ): AccountModel {\n        const account = Account.createFromPrivateKey(privateKey, networkType);\n        const simpleWallet = SimpleWallet.createFromPrivateKey(childAccountName, password, account.privateKey, networkType);\n\n        return {\n            id: SimpleObjectStorage.generateIdentifier(),\n            profileName: currentProfile.profileName,\n            name: childAccountName,\n            node: '',\n            type: AccountType.PRIVATE_KEY,\n            address: simpleWallet.address.plain(),\n            publicKey: account.publicKey,\n            encryptedPrivateKey: simpleWallet.encryptedPrivateKey,\n            path: '',\n            isMultisig: false,\n        };\n    }\n\n    /**\n     * Returns a AccountModel with an updated SimpleWallet\n     * @param {AccountModel} account\n     * @param {Password} oldPassword\n     * @param {Password} newPassword\n     */\n    public updateWalletPassword(account: AccountModel, oldPassword: Password, newPassword: Password): AccountModel {\n        // Password modification is not allowed for hardware wallets\n        if (account.type !== AccountType.SEED && account.type !== AccountType.PRIVATE_KEY) {\n            throw new Error('Hardware account password cannot be changed');\n        }\n\n        const privateKey = Crypto.decrypt(account.encryptedPrivateKey, oldPassword.value);\n\n        // Encrypt the private key with the new password\n        const newSimpleWallet = SimpleWallet.createFromPrivateKey(\n            account.name,\n            newPassword,\n            privateKey,\n            AccountModel.getObjects(account).address.networkType,\n        );\n        // Update the account model\n        return {\n            ...account,\n            encryptedPrivateKey: newSimpleWallet.encryptedPrivateKey,\n        };\n    }\n}\n"],"sourceRoot":""}]}