{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-2!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Transaction.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Transaction.ts","mtime":1611927227440},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL21udC9jL1VzZXJzL2p1c3RpL0Rlc2t0b3AvU1VQRVJIT1cvU3ltYm9sV2FsbGV0L2xhcmVkLXdhbGxldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKaW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAidHNsaWIiOwovKgogKiBDb3B5cmlnaHQgMjAyMCBORU0gKGh0dHBzOi8vbmVtLmlvKQogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCi8vZXh0ZXJuYWwgZGVwZW5kZW5jaWVzCgppbXBvcnQgeyBBZ2dyZWdhdGVUcmFuc2FjdGlvbiwgVHJhbnNhY3Rpb25UeXBlLCBQdWJsaWNBY2NvdW50LCBBZ2dyZWdhdGVUcmFuc2FjdGlvbkNvc2lnbmF0dXJlLCBUcmFuc2FjdGlvbkdyb3VwLCBPcmRlciB9IGZyb20gJ3N5bWJvbC1zZGsnOwppbXBvcnQgeyBjb21iaW5lTGF0ZXN0IH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsKaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnOyAvLyBpbnRlcm5hbCBkZXBlbmRlbmNpZXMKCmltcG9ydCB7IEF3YWl0TG9jayB9IGZyb20gJy4vQXdhaXRMb2NrJzsKaW1wb3J0IHsgVHJhbnNhY3Rpb25GaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9UcmFuc2FjdGlvbkZpbHRlclNlcnZpY2UnOwp2YXIgTG9jayA9IEF3YWl0TG9jay5jcmVhdGUoKTsKZXhwb3J0IHZhciBUcmFuc2FjdGlvbkdyb3VwU3RhdGU7CgooZnVuY3Rpb24gKFRyYW5zYWN0aW9uR3JvdXBTdGF0ZSkgewogIFRyYW5zYWN0aW9uR3JvdXBTdGF0ZVsiY29uZmlybWVkIl0gPSAiY29uZmlybWVkIjsKICBUcmFuc2FjdGlvbkdyb3VwU3RhdGVbInVuY29uZmlybWVkIl0gPSAidW5jb25maXJtZWQiOwogIFRyYW5zYWN0aW9uR3JvdXBTdGF0ZVsicGFydGlhbCJdID0gInBhcnRpYWwiOwogIFRyYW5zYWN0aW9uR3JvdXBTdGF0ZVsiYWxsIl0gPSAiYWxsIjsKfSkoVHJhbnNhY3Rpb25Hcm91cFN0YXRlIHx8IChUcmFuc2FjdGlvbkdyb3VwU3RhdGUgPSB7fSkpOwoKZXhwb3J0IHZhciBUcmFuc2FjdGlvbkZpbHRlck9wdGlvbnM7CgooZnVuY3Rpb24gKFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9ucykgewogIFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9uc1siY29uZmlybWVkIl0gPSAiaXNDb25maXJtZWRTZWxlY3RlZCI7CiAgVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zWyJ1bmNvbmZpcm1lZCJdID0gImlzVW5jb25maXJtZWRTZWxlY3RlZCI7CiAgVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zWyJwYXJ0aWFsIl0gPSAiaXNQYXJ0aWFsU2VsZWN0ZWQiOwogIFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9uc1sic2VudCJdID0gImlzU2VudFNlbGVjdGVkIjsKICBUcmFuc2FjdGlvbkZpbHRlck9wdGlvbnNbInJlY2VpdmVkIl0gPSAiaXNSZWNlaXZlZFNlbGVjdGVkIjsKfSkoVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zIHx8IChUcmFuc2FjdGlvbkZpbHRlck9wdGlvbnMgPSB7fSkpOwoKZXhwb3J0IHZhciBGaWx0ZXJPcHRpb24gPSBmdW5jdGlvbiBGaWx0ZXJPcHRpb24oKSB7CiAgdmFyIG9wdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zLmNvbmZpcm1lZDsKICB2YXIgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwoKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsdGVyT3B0aW9uKTsKCiAgdGhpcy5vcHRpb24gPSBvcHRpb247CiAgdGhpcy52YWx1ZSA9IHZhbHVlOwp9OwpleHBvcnQgdmFyIFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9uc1N0YXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBUcmFuc2FjdGlvbkZpbHRlck9wdGlvbnNTdGF0ZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmFuc2FjdGlvbkZpbHRlck9wdGlvbnNTdGF0ZSk7CgogICAgdGhpcy5pc0NvbmZpcm1lZFNlbGVjdGVkID0gZmFsc2U7CiAgICB0aGlzLmlzVW5jb25maXJtZWRTZWxlY3RlZCA9IGZhbHNlOwogICAgdGhpcy5pc1BhcnRpYWxTZWxlY3RlZCA9IGZhbHNlOwogICAgdGhpcy5pc1NlbnRTZWxlY3RlZCA9IGZhbHNlOwogICAgdGhpcy5pc1JlY2VpdmVkU2VsZWN0ZWQgPSBmYWxzZTsKICB9CiAgLyoqCiAgICogUmV0dXJucyBmYWxzZSB3aGVuIGFsbCBmcm9tIGFueSBncm91cCBvciBub3RoaW5nIHNlbGVjdGVkLgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9uc1N0YXRlLCBbewogICAga2V5OiAic2V0RmlsdGVyT3B0aW9uIiwKCiAgICAvKioKICAgICAqIFNldHMgc2VsZWN0ZWQga2V5LXZhbHVlIHBhaXIuCiAgICAgKiBAcGFyYW0gZmlsdGVyT3B0aW9uIG9uZSBvZiBleGlzdGluZyBmaWx0ZXIgb3B0aW9ucyBhbmQgdmFsdWUKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZpbHRlck9wdGlvbihmaWx0ZXJPcHRpb24pIHsKICAgICAgdGhpc1tmaWx0ZXJPcHRpb24ub3B0aW9uXSA9IGZpbHRlck9wdGlvbi52YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIGlmIGFsbCBwcm9wZXJ0eSBmYWxzeS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjaGVja0FsbFVuc2VsZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQWxsVW5zZWxlY3RlZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzKS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuICFfdGhpc1trZXldOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0ZpbHRlclNob3VsZEJlQXBwbGllZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMuY2hlY2tBbGxVbnNlbGVjdGVkKCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBpc0FsbEJ5Q29uZmlybWVkU3RhdHVzU2VsZWN0ZWQgPSB0aGlzLmlzQ29uZmlybWVkU2VsZWN0ZWQgJiYgdGhpcy5pc1VuY29uZmlybWVkU2VsZWN0ZWQgJiYgdGhpcy5pc1BhcnRpYWxTZWxlY3RlZDsKICAgICAgcmV0dXJuICFpc0FsbEJ5Q29uZmlybWVkU3RhdHVzU2VsZWN0ZWQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zU3RhdGU7Cn0oKTsKLyoqCiAqIEhlbHBlciB0byBmb3JtYXQgdHJhbnNhY3Rpb24gZ3JvdXAgaW4gbmFtZSBvZiBzdGF0ZSB2YXJpYWJsZS4KICoKICogQGludGVybmFsCiAqIEBwYXJhbSB7c3RyaW5nfSBncm91cAogKiBAcmV0dXJuIHtzdHJpbmd9IE9uZSBvZiAnY29uZmlybWVkVHJhbnNhY3Rpb25zJywgJ3VuY29uZmlybWVkVHJhbnNhY3Rpb25zJyBvcgogKiAgICdwYXJ0aWFsVHJhbnNhY3Rpb25zJwogKi8KCnZhciB0cmFuc2FjdGlvbkdyb3VwVG9TdGF0ZVZhcmlhYmxlID0gZnVuY3Rpb24gdHJhbnNhY3Rpb25Hcm91cFRvU3RhdGVWYXJpYWJsZShncm91cCkgewogIHJldHVybiBncm91cCArICdUcmFuc2FjdGlvbnMnOwp9OwoKdmFyIHRyYW5zYWN0aW9uQ29tcGFyYXRvciA9IGZ1bmN0aW9uIHRyYW5zYWN0aW9uQ29tcGFyYXRvcih0MSwgdDIpIHsKICAvLyAtIHVuY29uZmlybWVkL3BhcnRpYWwgc29ydGVkIGJ5IGluZGV4CiAgcmV0dXJuIHQxLnRyYW5zYWN0aW9uSW5mby5pbmRleCAtIHQyLnRyYW5zYWN0aW9uSW5mby5pbmRleDsKfTsKCnZhciBjb25maXJtZWRUcmFuc2FjdGlvbkNvbXBhcmF0b3IgPSBmdW5jdGlvbiBjb25maXJtZWRUcmFuc2FjdGlvbkNvbXBhcmF0b3IodDEsIHQyKSB7CiAgdmFyIGluZm8xID0gdDEudHJhbnNhY3Rpb25JbmZvOwogIHZhciBpbmZvMiA9IHQyLnRyYW5zYWN0aW9uSW5mbzsgLy8gLSBjb25maXJtZWQgc29ydGVkIGJ5IGhlaWdodCB0aGVuIGluZGV4CgogIHZhciBkaWZmSGVpZ2h0ID0gaW5mbzIuaGVpZ2h0LmNvbXBhY3QoKSAtIGluZm8xLmhlaWdodC5jb21wYWN0KCk7CiAgdmFyIGRpZmZJbmRleCA9IGluZm8xLmluZGV4IC0gaW5mbzIuaW5kZXg7CiAgcmV0dXJuIGRpZmZIZWlnaHQgIT09IDAgPyBkaWZmSGVpZ2h0IDogZGlmZkluZGV4Owp9OwoKZnVuY3Rpb24gY29uZGl0aW9uYWxTb3J0KGFycmF5LCBjb21wYXJhdG9yKSB7CiAgaWYgKCFhcnJheSkgewogICAgcmV0dXJuIGFycmF5OwogIH0KCiAgcmV0dXJuIGFycmF5LnNvcnQoY29tcGFyYXRvcik7Cn0KCnZhciB0cmFuc2FjdGlvblN0YXRlID0gewogIGluaXRpYWxpemVkOiBmYWxzZSwKICBpc0ZldGNoaW5nVHJhbnNhY3Rpb25zOiBmYWxzZSwKICB0cmFuc2FjdGlvbnM6IFtdLAogIGZpbHRlcmVkVHJhbnNhY3Rpb25zOiBbXSwKICBjb25maXJtZWRUcmFuc2FjdGlvbnM6IFtdLAogIHVuY29uZmlybWVkVHJhbnNhY3Rpb25zOiBbXSwKICBwYXJ0aWFsVHJhbnNhY3Rpb25zOiBbXSwKICBmaWx0ZXJPcHRpb25zOiBuZXcgVHJhbnNhY3Rpb25GaWx0ZXJPcHRpb25zU3RhdGUoKSwKICBjdXJyZW50Q29uZmlybWVkUGFnZTogewogICAgcGFnZU51bWJlcjogMSwKICAgIGlzTGFzdFBhZ2U6IGZhbHNlCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogdHJhbnNhY3Rpb25TdGF0ZSwKICBnZXR0ZXJzOiB7CiAgICBnZXRJbml0aWFsaXplZDogZnVuY3Rpb24gZ2V0SW5pdGlhbGl6ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmluaXRpYWxpemVkOwogICAgfSwKICAgIGlzRmV0Y2hpbmdUcmFuc2FjdGlvbnM6IGZ1bmN0aW9uIGlzRmV0Y2hpbmdUcmFuc2FjdGlvbnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzRmV0Y2hpbmdUcmFuc2FjdGlvbnM7CiAgICB9LAogICAgdHJhbnNhY3Rpb25zOiBmdW5jdGlvbiB0cmFuc2FjdGlvbnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRyYW5zYWN0aW9uczsKICAgIH0sCiAgICBmaWx0ZXJlZFRyYW5zYWN0aW9uczogZnVuY3Rpb24gZmlsdGVyZWRUcmFuc2FjdGlvbnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmZpbHRlcmVkVHJhbnNhY3Rpb25zOwogICAgfSwKICAgIGZpbHRlck9wdGlvbnM6IGZ1bmN0aW9uIGZpbHRlck9wdGlvbnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmZpbHRlck9wdGlvbnM7CiAgICB9LAogICAgY3VycmVudENvbmZpcm1lZFBhZ2U6IGZ1bmN0aW9uIGN1cnJlbnRDb25maXJtZWRQYWdlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50Q29uZmlybWVkUGFnZTsKICAgIH0sCiAgICBjb25maXJtZWRUcmFuc2FjdGlvbnM6IGZ1bmN0aW9uIGNvbmZpcm1lZFRyYW5zYWN0aW9ucyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY29uZmlybWVkVHJhbnNhY3Rpb25zOwogICAgfSwKICAgIHVuY29uZmlybWVkVHJhbnNhY3Rpb25zOiBmdW5jdGlvbiB1bmNvbmZpcm1lZFRyYW5zYWN0aW9ucyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudW5jb25maXJtZWRUcmFuc2FjdGlvbnM7CiAgICB9LAogICAgcGFydGlhbFRyYW5zYWN0aW9uczogZnVuY3Rpb24gcGFydGlhbFRyYW5zYWN0aW9ucyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucGFydGlhbFRyYW5zYWN0aW9uczsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0SW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uIHNldEluaXRpYWxpemVkKHN0YXRlLCBpbml0aWFsaXplZCkgewogICAgICBzdGF0ZS5pbml0aWFsaXplZCA9IGluaXRpYWxpemVkOwogICAgfSwKICAgIGlzRmV0Y2hpbmdUcmFuc2FjdGlvbnM6IGZ1bmN0aW9uIGlzRmV0Y2hpbmdUcmFuc2FjdGlvbnMoc3RhdGUsIF9pc0ZldGNoaW5nVHJhbnNhY3Rpb25zKSB7CiAgICAgIHN0YXRlLmlzRmV0Y2hpbmdUcmFuc2FjdGlvbnMgPSBfaXNGZXRjaGluZ1RyYW5zYWN0aW9uczsKICAgIH0sCiAgICBjb25maXJtZWRUcmFuc2FjdGlvbnM6IGZ1bmN0aW9uIGNvbmZpcm1lZFRyYW5zYWN0aW9ucyhzdGF0ZSwgX3JlZikgewogICAgICB2YXIgdHJhbnNhY3Rpb25zID0gX3JlZi50cmFuc2FjdGlvbnMsCiAgICAgICAgICByZWZyZXNoID0gX3JlZi5yZWZyZXNoLAogICAgICAgICAgcGFnZUluZm8gPSBfcmVmLnBhZ2VJbmZvOwoKICAgICAgLy8gaWYgaXQncyBhIHJlZnJlc2ggcmVxdWVzdCB0aGVuIHJlZnJlc2ggdGhlIGxpc3QsIGVsc2UgY29uY2F0IHRoZSBuZXcgaXRlbXMgdG8gdGhlIGxpc3QKICAgICAgaWYgKHJlZnJlc2gpIHsKICAgICAgICBzdGF0ZS5jb25maXJtZWRUcmFuc2FjdGlvbnMgPSBjb25kaXRpb25hbFNvcnQodHJhbnNhY3Rpb25zLCBjb25maXJtZWRUcmFuc2FjdGlvbkNvbXBhcmF0b3IpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmNvbmZpcm1lZFRyYW5zYWN0aW9ucyA9IGNvbmRpdGlvbmFsU29ydChzdGF0ZS5jb25maXJtZWRUcmFuc2FjdGlvbnMuY29uY2F0KHRyYW5zYWN0aW9ucyksIGNvbmZpcm1lZFRyYW5zYWN0aW9uQ29tcGFyYXRvcik7CiAgICAgIH0KCiAgICAgIHN0YXRlLmN1cnJlbnRDb25maXJtZWRQYWdlID0gcGFnZUluZm87CiAgICB9LAogICAgdW5jb25maXJtZWRUcmFuc2FjdGlvbnM6IGZ1bmN0aW9uIHVuY29uZmlybWVkVHJhbnNhY3Rpb25zKHN0YXRlLCBfcmVmMikgewogICAgICB2YXIgdHJhbnNhY3Rpb25zID0gX3JlZjIudHJhbnNhY3Rpb25zOwogICAgICBzdGF0ZS51bmNvbmZpcm1lZFRyYW5zYWN0aW9ucyA9IGNvbmRpdGlvbmFsU29ydCh0cmFuc2FjdGlvbnMsIHRyYW5zYWN0aW9uQ29tcGFyYXRvcik7CiAgICB9LAogICAgcGFydGlhbFRyYW5zYWN0aW9uczogZnVuY3Rpb24gcGFydGlhbFRyYW5zYWN0aW9ucyhzdGF0ZSwgX3JlZjMpIHsKICAgICAgdmFyIHRyYW5zYWN0aW9ucyA9IF9yZWYzLnRyYW5zYWN0aW9uczsKICAgICAgc3RhdGUucGFydGlhbFRyYW5zYWN0aW9ucyA9IGNvbmRpdGlvbmFsU29ydCh0cmFuc2FjdGlvbnMsIHRyYW5zYWN0aW9uQ29tcGFyYXRvcik7CiAgICB9LAogICAgc2V0QWxsVHJhbnNhY3Rpb25zOiBmdW5jdGlvbiBzZXRBbGxUcmFuc2FjdGlvbnMoc3RhdGUpIHsKICAgICAgc3RhdGUudHJhbnNhY3Rpb25zID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS5wYXJ0aWFsVHJhbnNhY3Rpb25zKSwgX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLnVuY29uZmlybWVkVHJhbnNhY3Rpb25zKSwgX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLmNvbmZpcm1lZFRyYW5zYWN0aW9ucykpOwogICAgfSwKICAgIGZpbHRlclRyYW5zYWN0aW9uczogZnVuY3Rpb24gZmlsdGVyVHJhbnNhY3Rpb25zKHN0YXRlLCBfcmVmNCkgewogICAgICB2YXIgZmlsdGVyT3B0aW9uID0gX3JlZjQuZmlsdGVyT3B0aW9uLAogICAgICAgICAgY3VycmVudFNpZ25lckFkZHJlc3MgPSBfcmVmNC5jdXJyZW50U2lnbmVyQWRkcmVzcywKICAgICAgICAgIF9yZWY0JHNob3VsZEZpbHRlck9wdCA9IF9yZWY0LnNob3VsZEZpbHRlck9wdGlvbkNoYW5nZSwKICAgICAgICAgIHNob3VsZEZpbHRlck9wdGlvbkNoYW5nZSA9IF9yZWY0JHNob3VsZEZpbHRlck9wdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY0JHNob3VsZEZpbHRlck9wdDsKCiAgICAgIGlmIChzaG91bGRGaWx0ZXJPcHRpb25DaGFuZ2UpIHsKICAgICAgICBpZiAoZmlsdGVyT3B0aW9uKSB7CiAgICAgICAgICBzdGF0ZS5maWx0ZXJPcHRpb25zLnNldEZpbHRlck9wdGlvbihmaWx0ZXJPcHRpb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZS5maWx0ZXJPcHRpb25zID0gbmV3IFRyYW5zYWN0aW9uRmlsdGVyT3B0aW9uc1N0YXRlKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBzdGF0ZS5maWx0ZXJlZFRyYW5zYWN0aW9ucyA9IFRyYW5zYWN0aW9uRmlsdGVyU2VydmljZS5maWx0ZXIoc3RhdGUsIGN1cnJlbnRTaWduZXJBZGRyZXNzKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoX3JlZjUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmNS5nZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMiwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGxhY2Vob2xkZXIgZm9yIGluaXRpYWxpemF0aW9uIGlmIG5lY2Vzc2FyeS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0SW5pdGlhbGl6ZWQnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH07IC8vIGFxdWlyZSBhc3luYyBsb2NrIHVudGlsIGluaXRpYWxpemVkCgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBMb2NrLmluaXRpYWxpemUoY2FsbGJhY2ssIHsKICAgICAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKICAgIH0sCiAgICB1bmluaXRpYWxpemU6IGZ1bmN0aW9uIHVuaW5pdGlhbGl6ZShfcmVmNikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWY2LmdldHRlcnMsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ1JFU0VUX1RSQU5TQUNUSU9OUycpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBMb2NrLnVuaW5pdGlhbGl6ZShjYWxsYmFjaywgewogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBnZXR0ZXJzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwogICAgfSwKICAgIExPQURfVFJBTlNBQ1RJT05TOiBmdW5jdGlvbiBMT0FEX1RSQU5TQUNUSU9OUyhfcmVmNykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmNy5yb290R2V0dGVyczsKCiAgICAgIHZhciBfcmVmOCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgICBwYWdlTnVtYmVyOiAxCiAgICAgIH0sCiAgICAgICAgICBwYWdlU2l6ZSA9IF9yZWY4LnBhZ2VTaXplLAogICAgICAgICAgcGFnZU51bWJlciA9IF9yZWY4LnBhZ2VOdW1iZXI7CgogICAgICB2YXIgY3VycmVudFNpZ25lckFkZHJlc3MgPSByb290R2V0dGVyc1snYWNjb3VudC9jdXJyZW50U2lnbmVyQWRkcmVzcyddOwoKICAgICAgaWYgKCFjdXJyZW50U2lnbmVyQWRkcmVzcykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgdmFyIHRyYW5zYWN0aW9uUmVwb3NpdG9yeSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZVRyYW5zYWN0aW9uUmVwb3NpdG9yeSgpOwoKICAgICAgdmFyIHN1YnNjcmliZVRyYW5zYWN0aW9ucyA9IGZ1bmN0aW9uIHN1YnNjcmliZVRyYW5zYWN0aW9ucyhncm91cCwgdHJhbnNhY3Rpb25DYWxsKSB7CiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSB0cmFuc2FjdGlvbkdyb3VwVG9TdGF0ZVZhcmlhYmxlKGdyb3VwKTsKICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25DYWxsLnBpcGUobWFwKGZ1bmN0aW9uICh0cmFuc2FjdGlvbnNQYWdlKSB7CiAgICAgICAgICBjb21taXQoYXR0cmlidXRlTmFtZSwgewogICAgICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9uc1BhZ2UuZGF0YSB8fCBbXSwKICAgICAgICAgICAgcmVmcmVzaDogdHJhbnNhY3Rpb25zUGFnZS5wYWdlTnVtYmVyID09PSAxLAogICAgICAgICAgICBwYWdlSW5mbzogewogICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IHRyYW5zYWN0aW9uc1BhZ2UucGFnZU51bWJlciwKICAgICAgICAgICAgICBpc0xhc3RQYWdlOiB0cmFuc2FjdGlvbnNQYWdlLmlzTGFzdFBhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25zUGFnZS5kYXRhOwogICAgICAgIH0pKTsKICAgICAgfTsKCiAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gW107CiAgICAgIGNvbW1pdCgnaXNGZXRjaGluZ1RyYW5zYWN0aW9ucycsIHRydWUpOwogICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaWJlVHJhbnNhY3Rpb25zKFRyYW5zYWN0aW9uR3JvdXBTdGF0ZS5jb25maXJtZWQsIHRyYW5zYWN0aW9uUmVwb3NpdG9yeS5zZWFyY2goewogICAgICAgIGdyb3VwOiBUcmFuc2FjdGlvbkdyb3VwLkNvbmZpcm1lZCwKICAgICAgICBhZGRyZXNzOiBjdXJyZW50U2lnbmVyQWRkcmVzcywKICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUsCiAgICAgICAgcGFnZU51bWJlcjogcGFnZU51bWJlciwKICAgICAgICBvcmRlcjogT3JkZXIuRGVzYwogICAgICB9KSkpOwoKICAgICAgaWYgKHBhZ2VOdW1iZXIgPT09IDEpIHsKICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaWJlVHJhbnNhY3Rpb25zKFRyYW5zYWN0aW9uR3JvdXBTdGF0ZS51bmNvbmZpcm1lZCwgdHJhbnNhY3Rpb25SZXBvc2l0b3J5LnNlYXJjaCh7CiAgICAgICAgICBncm91cDogVHJhbnNhY3Rpb25Hcm91cC5VbmNvbmZpcm1lZCwKICAgICAgICAgIGFkZHJlc3M6IGN1cnJlbnRTaWduZXJBZGRyZXNzLAogICAgICAgICAgcGFnZVNpemU6IDEwMCwKICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICBvcmRlcjogT3JkZXIuRGVzYwogICAgICAgIH0pKSk7CiAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmliZVRyYW5zYWN0aW9ucyhUcmFuc2FjdGlvbkdyb3VwU3RhdGUucGFydGlhbCwgdHJhbnNhY3Rpb25SZXBvc2l0b3J5LnNlYXJjaCh7CiAgICAgICAgICBncm91cDogVHJhbnNhY3Rpb25Hcm91cC5QYXJ0aWFsLAogICAgICAgICAgYWRkcmVzczogY3VycmVudFNpZ25lckFkZHJlc3MsCiAgICAgICAgICBwYWdlU2l6ZTogMTAwLAogICAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAgIG9yZGVyOiBPcmRlci5EZXNjCiAgICAgICAgfSkpKTsKICAgICAgfQoKICAgICAgY29tYmluZUxhdGVzdChzdWJzY3JpcHRpb25zKS5zdWJzY3JpYmUoewogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgIGNvbW1pdCgnc2V0QWxsVHJhbnNhY3Rpb25zJyk7CiAgICAgICAgICBjb21taXQoJ2ZpbHRlclRyYW5zYWN0aW9ucycsIHsKICAgICAgICAgICAgZmlsdGVyT3B0aW9uOiBudWxsLAogICAgICAgICAgICBjdXJyZW50U2lnbmVyQWRkcmVzczogY3VycmVudFNpZ25lckFkZHJlc3MucGxhaW4oKSwKICAgICAgICAgICAgc2hvdWxkRmlsdGVyT3B0aW9uQ2hhbmdlOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ2lzRmV0Y2hpbmdUcmFuc2FjdGlvbnMnLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBMT0FEX1RSQU5TQUNUSU9OX0RFVEFJTFM6IGZ1bmN0aW9uIExPQURfVFJBTlNBQ1RJT05fREVUQUlMUyhfcmVmOSwgX3JlZjEwKSB7CiAgICAgIHZhciByb290R2V0dGVycyA9IF9yZWY5LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgZ3JvdXAgPSBfcmVmMTAuZ3JvdXAsCiAgICAgICAgICB0cmFuc2FjdGlvbkhhc2ggPSBfcmVmMTAudHJhbnNhY3Rpb25IYXNoOwoKICAgICAgaWYgKCFncm91cCkgewogICAgICAgIHRocm93IEVycm9yKCJNaXNzaW5nIG1hbmRhdG9yeSBmaWVsZCAnZ3JvdXAnIGZvciBhY3Rpb24gdHJhbnNhY3Rpb24vTE9BRF9UUkFOU0FDVElPTl9ERVRBSUxTLiIpOwogICAgICB9CgogICAgICBpZiAoIXRyYW5zYWN0aW9uSGFzaCkgewogICAgICAgIHRocm93IEVycm9yKCJNaXNzaW5nIG1hbmRhdG9yeSBmaWVsZCAndHJhbnNhY3Rpb25IYXNoJyBmb3IgYWN0aW9uIHRyYW5zYWN0aW9uL0xPQURfVFJBTlNBQ1RJT05fREVUQUlMUy4iKTsKICAgICAgfSAvLyBwcmVwYXJlCgoKICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgdmFyIHRyYW5zYWN0aW9uUmVwb3NpdG9yeSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZVRyYW5zYWN0aW9uUmVwb3NpdG9yeSgpOwogICAgICB2YXIgc2RrR3JvdXAgPSBUcmFuc2FjdGlvbkdyb3VwLkNvbmZpcm1lZDsKCiAgICAgIGlmICghW1RyYW5zYWN0aW9uR3JvdXBTdGF0ZS5hbGwsIFRyYW5zYWN0aW9uR3JvdXBTdGF0ZS5jb25maXJtZWRdLmluY2x1ZGVzKGdyb3VwKSkgewogICAgICAgIHNka0dyb3VwID0gZ3JvdXAgPT09IFRyYW5zYWN0aW9uR3JvdXBTdGF0ZS5wYXJ0aWFsID8gVHJhbnNhY3Rpb25Hcm91cC5QYXJ0aWFsIDogVHJhbnNhY3Rpb25Hcm91cC5VbmNvbmZpcm1lZDsKICAgICAgfSAvLyBmZXRjaCB0cmFuc2FjdGlvbiBkZXRhaWxzCgoKICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uUmVwb3NpdG9yeS5nZXRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbkhhc2gsIHNka0dyb3VwKS50b1Byb21pc2UoKTsKICAgIH0sCiAgICBGRVRDSF9UUkFOU0FDVElPTl9TVEFUVVM6IGZ1bmN0aW9uIEZFVENIX1RSQU5TQUNUSU9OX1NUQVRVUyhfcmVmMTEsIF9yZWYxMikgewogICAgICB2YXIgcm9vdEdldHRlcnMgPSBfcmVmMTEucm9vdEdldHRlcnM7CiAgICAgIHZhciB0cmFuc2FjdGlvbkhhc2ggPSBfcmVmMTIudHJhbnNhY3Rpb25IYXNoOwoKICAgICAgaWYgKCF0cmFuc2FjdGlvbkhhc2gpIHsKICAgICAgICB0aHJvdyBFcnJvcigiTWlzc2luZyBtYW5kYXRvcnkgZmllbGQgJ3RyYW5zYWN0aW9uSGFzaCcgZm9yIGFjdGlvbiB0cmFuc2FjdGlvbi9GRVRDSF9UUkFOU0FDVElPTl9TVEFUVVMuIik7CiAgICAgIH0gLy8gcHJlcGFyZQoKCiAgICAgIHZhciByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgIHZhciB0cmFuc2FjdGlvblN0YXR1c1JlcG9zaXRvcnkgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVUcmFuc2FjdGlvblN0YXR1c1JlcG9zaXRvcnkoKTsgLy8gZmV0Y2ggdHJhbnNhY3Rpb24gc3RhdHVzCgogICAgICByZXR1cm4gdHJhbnNhY3Rpb25TdGF0dXNSZXBvc2l0b3J5LmdldFRyYW5zYWN0aW9uU3RhdHVzKHRyYW5zYWN0aW9uSGFzaCkudG9Qcm9taXNlKCk7CiAgICB9LAogICAgU0lHTkVSX0NIQU5HRUQ6IGZ1bmN0aW9uIFNJR05FUl9DSEFOR0VEKF9yZWYxMykgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTMuZGlzcGF0Y2g7CiAgICAgIGRpc3BhdGNoKCdMT0FEX1RSQU5TQUNUSU9OUycpOwogICAgfSwKICAgIFJFU0VUX1RSQU5TQUNUSU9OUzogZnVuY3Rpb24gUkVTRVRfVFJBTlNBQ1RJT05TKF9yZWYxNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE0LmNvbW1pdDsKICAgICAgT2JqZWN0LmtleXMoVHJhbnNhY3Rpb25Hcm91cFN0YXRlKS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkgewogICAgICAgIGlmIChncm91cCAhPT0gVHJhbnNhY3Rpb25Hcm91cFN0YXRlLmFsbCkgewogICAgICAgICAgY29tbWl0KHRyYW5zYWN0aW9uR3JvdXBUb1N0YXRlVmFyaWFibGUoZ3JvdXApLCB7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uczogW10sCiAgICAgICAgICAgIHBhZ2VJbmZvOiB7CiAgICAgICAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAgICAgICBpc0xhc3RQYWdlOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIEFERF9UUkFOU0FDVElPTjogZnVuY3Rpb24gQUREX1RSQU5TQUNUSU9OKF9yZWYxNSwgX3JlZjE2KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTUuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYxNS5nZXR0ZXJzLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTUucm9vdEdldHRlcnM7CiAgICAgIHZhciBncm91cCA9IF9yZWYxNi5ncm91cCwKICAgICAgICAgIHRyYW5zYWN0aW9uID0gX3JlZjE2LnRyYW5zYWN0aW9uOwoKICAgICAgaWYgKCFncm91cCkgewogICAgICAgIHRocm93IEVycm9yKCJNaXNzaW5nIG1hbmRhdG9yeSBmaWVsZCAnZ3JvdXAnIGZvciBhY3Rpb24gdHJhbnNhY3Rpb24vQUREX1RSQU5TQUNUSU9OLiIpOwogICAgICB9CgogICAgICBpZiAoIXRyYW5zYWN0aW9uKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoIk1pc3NpbmcgbWFuZGF0b3J5IGZpZWxkICd0cmFuc2FjdGlvbicgZm9yIGFjdGlvbiB0cmFuc2FjdGlvbi9BRERfVFJBTlNBQ1RJT04uIik7CiAgICAgIH0gLy8gZm9ybWF0IHRyYW5zYWN0aW9uQXR0cmlidXRlIHRvIHN0b3JlIHZhcmlhYmxlIG5hbWUKCgogICAgICB2YXIgdHJhbnNhY3Rpb25BdHRyaWJ1dGUgPSB0cmFuc2FjdGlvbkdyb3VwVG9TdGF0ZVZhcmlhYmxlKGdyb3VwKTsKICAgICAgdmFyIGN1cnJlbnRTaWduZXJBZGRyZXNzID0gcm9vdEdldHRlcnNbJ2FjY291bnQvY3VycmVudFNpZ25lckFkZHJlc3MnXTsgLy8gcmVnaXN0ZXIgdHJhbnNhY3Rpb24KCiAgICAgIHZhciB0cmFuc2FjdGlvbnMgPSBnZXR0ZXJzW3RyYW5zYWN0aW9uQXR0cmlidXRlXSB8fCBbXTsKCiAgICAgIGlmICghdHJhbnNhY3Rpb25zLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdC50cmFuc2FjdGlvbkluZm8uaGFzaCA9PT0gdHJhbnNhY3Rpb24udHJhbnNhY3Rpb25JbmZvLmhhc2g7CiAgICAgIH0pKSB7CiAgICAgICAgLy8gdXBkYXRlIHN0YXRlCiAgICAgICAgY29tbWl0KHRyYW5zYWN0aW9uQXR0cmlidXRlLCB7CiAgICAgICAgICB0cmFuc2FjdGlvbnM6IFt0cmFuc2FjdGlvbl0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0cmFuc2FjdGlvbnMpKSwKICAgICAgICAgIHJlZnJlc2g6IHRydWUsCiAgICAgICAgICBwYWdlSW5mbzogZ2V0dGVyc1snY3VycmVudENvbmZpcm1lZFBhZ2UnXQogICAgICAgIH0pOwogICAgICAgIGNvbW1pdCgnc2V0QWxsVHJhbnNhY3Rpb25zJyk7CiAgICAgICAgY29tbWl0KCdmaWx0ZXJUcmFuc2FjdGlvbnMnLCB7CiAgICAgICAgICBmaWx0ZXJPcHRpb246IG51bGwsCiAgICAgICAgICBjdXJyZW50U2lnbmVyQWRkcmVzczogY3VycmVudFNpZ25lckFkZHJlc3MucGxhaW4oKSwKICAgICAgICAgIHNob3VsZEZpbHRlck9wdGlvbkNoYW5nZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIFJFTU9WRV9UUkFOU0FDVElPTjogZnVuY3Rpb24gUkVNT1ZFX1RSQU5TQUNUSU9OKF9yZWYxNywgX3JlZjE4KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTcuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYxNy5nZXR0ZXJzLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTcucm9vdEdldHRlcnM7CiAgICAgIHZhciBncm91cCA9IF9yZWYxOC5ncm91cCwKICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaCA9IF9yZWYxOC50cmFuc2FjdGlvbkhhc2g7CgogICAgICBpZiAoIWdyb3VwKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoIk1pc3NpbmcgbWFuZGF0b3J5IGZpZWxkICdncm91cCcgZm9yIGFjdGlvbiB0cmFuc2FjdGlvbi9SRU1PVkVfVFJBTlNBQ1RJT04uIik7CiAgICAgIH0KCiAgICAgIGlmICghdHJhbnNhY3Rpb25IYXNoKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoIk1pc3NpbmcgbWFuZGF0b3J5IGZpZWxkICd0cmFuc2FjdGlvbkhhc2gnIGZvciBhY3Rpb24gdHJhbnNhY3Rpb24vUkVNT1ZFX1RSQU5TQUNUSU9OLiIpOwogICAgICB9IC8vIGZvcm1hdCB0cmFuc2FjdGlvbkF0dHJpYnV0ZSB0byBzdG9yZSB2YXJpYWJsZSBuYW1lCgoKICAgICAgdmFyIHRyYW5zYWN0aW9uQXR0cmlidXRlID0gdHJhbnNhY3Rpb25Hcm91cFRvU3RhdGVWYXJpYWJsZShncm91cCk7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107IC8vIHJlZ2lzdGVyIHRyYW5zYWN0aW9uCgogICAgICB2YXIgdHJhbnNhY3Rpb25zID0gZ2V0dGVyc1t0cmFuc2FjdGlvbkF0dHJpYnV0ZV0gfHwgW107CiAgICAgIGNvbW1pdCh0cmFuc2FjdGlvbkF0dHJpYnV0ZSwgewogICAgICAgIHRyYW5zYWN0aW9uczogdHJhbnNhY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIHQudHJhbnNhY3Rpb25JbmZvLmhhc2ggIT09IHRyYW5zYWN0aW9uSGFzaDsKICAgICAgICB9KSwKICAgICAgICByZWZyZXNoOiB0cnVlLAogICAgICAgIHBhZ2VJbmZvOiBnZXR0ZXJzWydjdXJyZW50Q29uZmlybWVkUGFnZSddCiAgICAgIH0pOwogICAgICBjb21taXQoJ3NldEFsbFRyYW5zYWN0aW9ucycpOwogICAgICBjb21taXQoJ2ZpbHRlclRyYW5zYWN0aW9ucycsIHsKICAgICAgICBmaWx0ZXJPcHRpb246IG51bGwsCiAgICAgICAgY3VycmVudFNpZ25lckFkZHJlc3M6IGN1cnJlbnRTaWduZXJBZGRyZXNzLnBsYWluKCksCiAgICAgICAgc2hvdWxkRmlsdGVyT3B0aW9uQ2hhbmdlOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICBPTl9ORVdfVFJBTlNBQ1RJT046IGZ1bmN0aW9uIE9OX05FV19UUkFOU0FDVElPTihfcmVmMTksIHRyYW5zYWN0aW9uKSB7CiAgICAgIHZhciBkaXNwYXRjaCA9IF9yZWYxOS5kaXNwYXRjaDsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgdHJhbnNhY3Rpb25UeXBlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgLy8gZXh0cmFjdCB0cmFuc2FjdGlvbiB0eXBlcyBmcm9tIHRoZSB0cmFuc2FjdGlvbgogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlcyA9IF8udW5pcSh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEFnZ3JlZ2F0ZVRyYW5zYWN0aW9uID8gdHJhbnNhY3Rpb24uaW5uZXJUcmFuc2FjdGlvbnMubWFwKGZ1bmN0aW9uIChfcmVmMjApIHsKICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBfcmVmMjAudHlwZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgICAgICAgICB9KSA6IFt0cmFuc2FjdGlvbi50eXBlXSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ0xPQURfVFJBTlNBQ1RJT05TJyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbWV0YWRhdGEvTE9BRF9NRVRBREFUQV9MSVNUJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIC8vIGFkZCBhY3Rpb25zIHRvIHRoZSBkaXNwYXRjaGVyIGFjY29yZGluZyB0byB0aGUgdHJhbnNhY3Rpb24gdHlwZXMKICAgICAgICAgICAgICAgIGlmIChbVHJhbnNhY3Rpb25UeXBlLk5BTUVTUEFDRV9SRUdJU1RSQVRJT04sIFRyYW5zYWN0aW9uVHlwZS5NT1NBSUNfQUxJQVMsIFRyYW5zYWN0aW9uVHlwZS5BRERSRVNTX0FMSUFTXS5zb21lKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblR5cGVzLnNvbWUoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiA9PT0gYTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbmFtZXNwYWNlL0xPQURfTkFNRVNQQUNFUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gLy8gUmVsb2FkaW5nIEJhbGFuY2VzCgoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2FjY291bnQvTE9BRF9BQ0NPVU5UX0lORk8nLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdtb3NhaWMvTE9BRF9NT1NBSUNTJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdyZXN0cmljdGlvbi9MT0FEX0FDQ09VTlRfUkVTVFJJQ1RJT05TJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CiAgICB9LAogICAgLy8vIGVuZC1yZWdpb24gc2NvcGVkIGFjdGlvbnMKICAgIEFERF9DT1NJR05BVFVSRTogZnVuY3Rpb24gQUREX0NPU0lHTkFUVVJFKF9yZWYyMSwgdHJhbnNhY3Rpb24pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyMS5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjIxLmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYyMS5yb290R2V0dGVyczsKCiAgICAgIGlmICghdHJhbnNhY3Rpb24gfHwgIXRyYW5zYWN0aW9uLnBhcmVudEhhc2gpIHsKICAgICAgICB0aHJvdyBFcnJvcigiTWlzc2luZyBtYW5kYXRvcnkgZmllbGQgJ3BhcmVudEhhc2gnIGZvciBhY3Rpb24gdHJhbnNhY3Rpb24vQUREX0NPU0lHTkFUVVJFLiIpOwogICAgICB9CgogICAgICB2YXIgdHJhbnNhY3Rpb25BdHRyaWJ1dGUgPSB0cmFuc2FjdGlvbkdyb3VwVG9TdGF0ZVZhcmlhYmxlKFRyYW5zYWN0aW9uR3JvdXBTdGF0ZS5wYXJ0aWFsKTsKICAgICAgdmFyIHRyYW5zYWN0aW9ucyA9IGdldHRlcnNbdHJhbnNhY3Rpb25BdHRyaWJ1dGVdIHx8IFtdOyAvLyByZXR1cm4gaWYgbm8gdHJhbnNhY3Rpb25zCgogICAgICBpZiAoIXRyYW5zYWN0aW9ucy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IHRyYW5zYWN0aW9ucy5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdC50cmFuc2FjdGlvbkluZm8uaGFzaCA9PT0gdHJhbnNhY3Rpb24ucGFyZW50SGFzaDsKICAgICAgfSk7IC8vIHBhcnRpYWwgdHggdW5rbm93biwgQFRPRE86IGhhbmRsZSB0aGlzIGNhc2UgKGZldGNoIHBhcnRpYWxzKQoKICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBjb252ZXJ0IENvc2lnbmF0dXJlU2lnbmVkVHJhbnNhY3Rpb24gdG8gQWdncmVnYXRlVHJhbnNhY3Rpb25Db3NpZ25hdHVyZQoKCiAgICAgIHZhciBnZW5lcmF0aW9uSGFzaCA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL2dlbmVyYXRpb25IYXNoJ107CiAgICAgIHZhciBjb3NpZ25lciA9IFB1YmxpY0FjY291bnQuY3JlYXRlRnJvbVB1YmxpY0tleSh0cmFuc2FjdGlvbi5zaWduZXJQdWJsaWNLZXksIGdlbmVyYXRpb25IYXNoKTsKICAgICAgdmFyIGNvc2lnbmF0dXJlID0gbmV3IEFnZ3JlZ2F0ZVRyYW5zYWN0aW9uQ29zaWduYXR1cmUodHJhbnNhY3Rpb24uc2lnbmF0dXJlLCBjb3NpZ25lcik7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107IC8vIHVwZGF0ZSB0aGUgcGFydGlhbCB0cmFuc2FjdGlvbiBjb3NpZ25hdHVyZXMKCiAgICAgIHRyYW5zYWN0aW9uc1tpbmRleF0gPSB0cmFuc2FjdGlvbnNbaW5kZXhdLmFkZENvc2lnbmF0dXJlcyhbY29zaWduYXR1cmVdKTsKICAgICAgY29tbWl0KCdwYXJ0aWFsVHJhbnNhY3Rpb25zJywgdHJhbnNhY3Rpb25zKTsKICAgICAgY29tbWl0KCdzZXRBbGxUcmFuc2FjdGlvbnMnKTsKICAgICAgY29tbWl0KCdmaWx0ZXJUcmFuc2FjdGlvbnMnLCB7CiAgICAgICAgZmlsdGVyT3B0aW9uOiBudWxsLAogICAgICAgIGN1cnJlbnRTaWduZXJBZGRyZXNzOiBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpLAogICAgICAgIHNob3VsZEZpbHRlck9wdGlvbkNoYW5nZTogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Transaction.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n//external dependencies\nimport {\n    Address,\n    AggregateTransaction,\n    CosignatureSignedTransaction,\n    RepositoryFactory,\n    Transaction,\n    TransactionType,\n    PublicAccount,\n    AggregateTransactionCosignature,\n    TransactionGroup,\n    Page,\n    TransactionStatus,\n    Order,\n} from 'symbol-sdk';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport * as _ from 'lodash';\n\n// internal dependencies\nimport { AwaitLock } from './AwaitLock';\nimport { TransactionFilterService } from '@/services/TransactionFilterService';\n\nconst Lock = AwaitLock.create();\n\nexport enum TransactionGroupState {\n    confirmed = 'confirmed',\n    unconfirmed = 'unconfirmed',\n    partial = 'partial',\n    all = 'all',\n}\n\nexport enum TransactionFilterOptions {\n    confirmed = 'isConfirmedSelected',\n    unconfirmed = 'isUnconfirmedSelected',\n    partial = 'isPartialSelected',\n    sent = 'isSentSelected',\n    received = 'isReceivedSelected',\n}\n\nexport class FilterOption {\n    constructor(public option: TransactionFilterOptions = TransactionFilterOptions.confirmed, public value: boolean = false) {}\n}\n\nexport class TransactionFilterOptionsState {\n    public isConfirmedSelected: boolean = false;\n    public isUnconfirmedSelected: boolean = false;\n    public isPartialSelected: boolean = false;\n    public isSentSelected: boolean = false;\n    public isReceivedSelected: boolean = false;\n\n    /**\n     * Returns false when all from any group or nothing selected.\n     */\n    public get isFilterShouldBeApplied(): boolean {\n        if (this.checkAllUnselected()) {\n            return false;\n        }\n\n        const isAllByConfirmedStatusSelected = this.isConfirmedSelected && this.isUnconfirmedSelected && this.isPartialSelected;\n\n        return !isAllByConfirmedStatusSelected;\n    }\n\n    /**\n     * Sets selected key-value pair.\n     * @param filterOption one of existing filter options and value\n     */\n    public setFilterOption(filterOption: FilterOption): void {\n        this[filterOption.option] = filterOption.value;\n    }\n\n    /**\n     * Checks if all property falsy.\n     */\n    private checkAllUnselected(): boolean {\n        return Object.keys(this).every((key) => !this[key]);\n    }\n}\n\n/**\n * Helper to format transaction group in name of state variable.\n *\n * @internal\n * @param {string} group\n * @return {string} One of 'confirmedTransactions', 'unconfirmedTransactions' or\n *   'partialTransactions'\n */\nconst transactionGroupToStateVariable = (group: TransactionGroupState): string => {\n    return group + 'Transactions';\n};\n\nconst transactionComparator = (t1, t2) => {\n    // - unconfirmed/partial sorted by index\n    return t1.transactionInfo.index - t2.transactionInfo.index;\n};\nconst confirmedTransactionComparator = (t1, t2) => {\n    const info1 = t1.transactionInfo;\n    const info2 = t2.transactionInfo;\n    // - confirmed sorted by height then index\n    const diffHeight = info2.height.compact() - info1.height.compact();\n    const diffIndex = info1.index - info2.index;\n    return diffHeight !== 0 ? diffHeight : diffIndex;\n};\n\nfunction conditionalSort<T>(array: T[] | undefined, comparator: (a: T, b: T) => number): T[] | undefined {\n    if (!array) {\n        return array;\n    }\n    return array.sort(comparator);\n}\n\nexport interface PageInfo {\n    pageNumber: number;\n    isLastPage: boolean;\n}\nexport interface TransactionState {\n    initialized: boolean;\n    isFetchingTransactions: boolean;\n    transactions: Transaction[];\n    filteredTransactions: Transaction[];\n    confirmedTransactions: Transaction[];\n    unconfirmedTransactions: Transaction[];\n    partialTransactions: Transaction[];\n    filterOptions: TransactionFilterOptionsState;\n    currentConfirmedPage: PageInfo;\n}\n\nconst transactionState: TransactionState = {\n    initialized: false,\n    isFetchingTransactions: false,\n    transactions: [],\n    filteredTransactions: [],\n    confirmedTransactions: [],\n    unconfirmedTransactions: [],\n    partialTransactions: [],\n    filterOptions: new TransactionFilterOptionsState(),\n    currentConfirmedPage: { pageNumber: 1, isLastPage: false },\n};\nexport default {\n    namespaced: true,\n    state: transactionState,\n    getters: {\n        getInitialized: (state: TransactionState) => state.initialized,\n        isFetchingTransactions: (state: TransactionState) => state.isFetchingTransactions,\n        transactions: (state: TransactionState) => state.transactions,\n        filteredTransactions: (state: TransactionState) => {\n            return state.filteredTransactions;\n        },\n        filterOptions: (state: TransactionState) => state.filterOptions,\n        currentConfirmedPage: (state: TransactionState) => state.currentConfirmedPage,\n        confirmedTransactions: (state: TransactionState) => state.confirmedTransactions,\n        unconfirmedTransactions: (state: TransactionState) => state.unconfirmedTransactions,\n        partialTransactions: (state: TransactionState) => state.partialTransactions,\n    },\n    mutations: {\n        setInitialized: (state: TransactionState, initialized: boolean) => {\n            state.initialized = initialized;\n        },\n        isFetchingTransactions: (state: TransactionState, isFetchingTransactions: boolean) => {\n            state.isFetchingTransactions = isFetchingTransactions;\n        },\n        confirmedTransactions: (\n            state: TransactionState,\n            { transactions, refresh, pageInfo }: { transactions: Transaction[]; refresh: boolean; pageInfo: PageInfo },\n        ) => {\n            // if it's a refresh request then refresh the list, else concat the new items to the list\n            if (refresh) {\n                state.confirmedTransactions = conditionalSort(transactions, confirmedTransactionComparator);\n            } else {\n                state.confirmedTransactions = conditionalSort(\n                    state.confirmedTransactions.concat(transactions),\n                    confirmedTransactionComparator,\n                );\n            }\n            state.currentConfirmedPage = pageInfo;\n        },\n        unconfirmedTransactions: (\n            state: TransactionState,\n            { transactions }: { transactions: Transaction[]; refresh: boolean; pageInfo: PageInfo },\n        ) => {\n            state.unconfirmedTransactions = conditionalSort(transactions, transactionComparator);\n        },\n        partialTransactions: (\n            state: TransactionState,\n            { transactions }: { transactions: Transaction[]; refresh: boolean; pageInfo: PageInfo },\n        ) => {\n            state.partialTransactions = conditionalSort(transactions, transactionComparator);\n        },\n        setAllTransactions: (state: TransactionState) => {\n            state.transactions = [...state.partialTransactions, ...state.unconfirmedTransactions, ...state.confirmedTransactions];\n        },\n        filterTransactions: (\n            state: TransactionState,\n            {\n                filterOption,\n                currentSignerAddress,\n                shouldFilterOptionChange = true,\n            }: { filterOption?: FilterOption; currentSignerAddress: string; shouldFilterOptionChange: boolean },\n        ) => {\n            if (shouldFilterOptionChange) {\n                if (filterOption) {\n                    state.filterOptions.setFilterOption(filterOption);\n                } else {\n                    state.filterOptions = new TransactionFilterOptionsState();\n                }\n            }\n\n            state.filteredTransactions = TransactionFilterService.filter(state, currentSignerAddress);\n        },\n    },\n    actions: {\n        async initialize({ commit, getters }) {\n            const callback = async () => {\n                // Placeholder for initialization if necessary.\n                commit('setInitialized', true);\n            };\n            // aquire async lock until initialized\n            await Lock.initialize(callback, { getters });\n        },\n\n        async uninitialize({ commit, getters, dispatch }) {\n            const callback = async () => {\n                await dispatch('RESET_TRANSACTIONS');\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n\n        LOAD_TRANSACTIONS(\n            { commit, rootGetters },\n            { pageSize, pageNumber }: { pageSize: number; pageNumber: number } = {\n                pageSize: 20,\n                pageNumber: 1,\n            },\n        ) {\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n            if (!currentSignerAddress) {\n                return;\n            }\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const transactionRepository = repositoryFactory.createTransactionRepository();\n            const subscribeTransactions = (\n                group: TransactionGroupState,\n                transactionCall: Observable<Page<Transaction>>,\n            ): Observable<Transaction[]> => {\n                const attributeName = transactionGroupToStateVariable(group);\n                return transactionCall.pipe(\n                    map((transactionsPage) => {\n                        commit(attributeName, {\n                            transactions: transactionsPage.data || [],\n                            refresh: transactionsPage.pageNumber === 1,\n                            pageInfo: {\n                                pageNumber: transactionsPage.pageNumber,\n                                isLastPage: transactionsPage.isLastPage,\n                            },\n                        });\n                        return transactionsPage.data;\n                    }),\n                );\n            };\n\n            const subscriptions: Observable<Transaction[]>[] = [];\n            commit('isFetchingTransactions', true);\n\n            subscriptions.push(\n                subscribeTransactions(\n                    TransactionGroupState.confirmed,\n                    transactionRepository.search({\n                        group: TransactionGroup.Confirmed,\n                        address: currentSignerAddress,\n                        pageSize,\n                        pageNumber,\n                        order: Order.Desc,\n                    }),\n                ),\n            );\n\n            if (pageNumber === 1) {\n                subscriptions.push(\n                    subscribeTransactions(\n                        TransactionGroupState.unconfirmed,\n                        transactionRepository.search({\n                            group: TransactionGroup.Unconfirmed,\n                            address: currentSignerAddress,\n                            pageSize: 100,\n                            pageNumber: 1, // not paginating\n                            order: Order.Desc,\n                        }),\n                    ),\n                );\n\n                subscriptions.push(\n                    subscribeTransactions(\n                        TransactionGroupState.partial,\n                        transactionRepository.search({\n                            group: TransactionGroup.Partial,\n                            address: currentSignerAddress,\n                            pageSize: 100,\n                            pageNumber: 1, // not paginating\n                            order: Order.Desc,\n                        }),\n                    ),\n                );\n            }\n\n            combineLatest(subscriptions).subscribe({\n                complete: () => {\n                    commit('setAllTransactions');\n                    commit('filterTransactions', {\n                        filterOption: null,\n                        currentSignerAddress: currentSignerAddress.plain(),\n                        shouldFilterOptionChange: false,\n                    });\n                    commit('isFetchingTransactions', false);\n                },\n            });\n        },\n\n        LOAD_TRANSACTION_DETAILS(\n            { rootGetters },\n            { group, transactionHash }: { group: TransactionGroupState; transactionHash: string },\n        ): Promise<Transaction | AggregateTransaction> {\n            if (!group) {\n                throw Error(\"Missing mandatory field 'group' for action transaction/LOAD_TRANSACTION_DETAILS.\");\n            }\n\n            if (!transactionHash) {\n                throw Error(\"Missing mandatory field 'transactionHash' for action transaction/LOAD_TRANSACTION_DETAILS.\");\n            }\n\n            // prepare\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const transactionRepository = repositoryFactory.createTransactionRepository();\n\n            let sdkGroup = TransactionGroup.Confirmed;\n            if (![TransactionGroupState.all, TransactionGroupState.confirmed].includes(group)) {\n                sdkGroup = group === TransactionGroupState.partial ? TransactionGroup.Partial : TransactionGroup.Unconfirmed;\n            }\n\n            // fetch transaction details\n            return transactionRepository.getTransaction(transactionHash, sdkGroup).toPromise();\n        },\n\n        FETCH_TRANSACTION_STATUS(\n            { rootGetters },\n            { transactionHash }: { transactionHash: string },\n        ): Promise<Transaction | TransactionStatus> {\n            if (!transactionHash) {\n                throw Error(\"Missing mandatory field 'transactionHash' for action transaction/FETCH_TRANSACTION_STATUS.\");\n            }\n\n            // prepare\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const transactionStatusRepository = repositoryFactory.createTransactionStatusRepository();\n\n            // fetch transaction status\n            return transactionStatusRepository.getTransactionStatus(transactionHash).toPromise();\n        },\n\n        SIGNER_CHANGED({ dispatch }) {\n            dispatch('LOAD_TRANSACTIONS');\n        },\n\n        RESET_TRANSACTIONS({ commit }) {\n            Object.keys(TransactionGroupState).forEach((group: TransactionGroupState) => {\n                if (group !== TransactionGroupState.all) {\n                    commit(transactionGroupToStateVariable(group), {\n                        transactions: [],\n                        pageInfo: { pageNumber: 1, isLastPage: false },\n                    });\n                }\n            });\n        },\n\n        ADD_TRANSACTION(\n            { commit, getters, rootGetters },\n            { group, transaction }: { group: TransactionGroupState; transaction: Transaction },\n        ) {\n            if (!group) {\n                throw Error(\"Missing mandatory field 'group' for action transaction/ADD_TRANSACTION.\");\n            }\n\n            if (!transaction) {\n                throw Error(\"Missing mandatory field 'transaction' for action transaction/ADD_TRANSACTION.\");\n            }\n            // format transactionAttribute to store variable name\n            const transactionAttribute = transactionGroupToStateVariable(group);\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n\n            // register transaction\n            const transactions = getters[transactionAttribute] || [];\n            if (!transactions.find((t) => t.transactionInfo.hash === transaction.transactionInfo.hash)) {\n                // update state\n                commit(transactionAttribute, {\n                    transactions: [transaction, ...transactions],\n                    refresh: true,\n                    pageInfo: getters['currentConfirmedPage'],\n                });\n\n                commit('setAllTransactions');\n                commit('filterTransactions', {\n                    filterOption: null,\n                    currentSignerAddress: currentSignerAddress.plain(),\n                    shouldFilterOptionChange: false,\n                });\n            }\n        },\n\n        REMOVE_TRANSACTION(\n            { commit, getters, rootGetters },\n            { group, transactionHash }: { group: TransactionGroupState; transactionHash: string },\n        ) {\n            if (!group) {\n                throw Error(\"Missing mandatory field 'group' for action transaction/REMOVE_TRANSACTION.\");\n            }\n\n            if (!transactionHash) {\n                throw Error(\"Missing mandatory field 'transactionHash' for action transaction/REMOVE_TRANSACTION.\");\n            }\n            // format transactionAttribute to store variable name\n            const transactionAttribute = transactionGroupToStateVariable(group);\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n\n            // register transaction\n            const transactions = getters[transactionAttribute] || [];\n            commit(transactionAttribute, {\n                transactions: transactions.filter((t) => t.transactionInfo.hash !== transactionHash),\n                refresh: true,\n                pageInfo: getters['currentConfirmedPage'],\n            });\n\n            commit('setAllTransactions');\n            commit('filterTransactions', {\n                filterOption: null,\n                currentSignerAddress: currentSignerAddress.plain(),\n                shouldFilterOptionChange: false,\n            });\n        },\n\n        async ON_NEW_TRANSACTION({ dispatch }, transaction: Transaction) {\n            if (!transaction) {\n                return;\n            }\n\n            // extract transaction types from the transaction\n            const transactionTypes: TransactionType[] = _.uniq(\n                transaction instanceof AggregateTransaction ? transaction.innerTransactions.map(({ type }) => type) : [transaction.type],\n            );\n\n            await dispatch('LOAD_TRANSACTIONS');\n\n            // reload metadata list first so that mosaics and namespaces can be updated\n            await dispatch('metadata/LOAD_METADATA_LIST', {}, { root: true });\n\n            // add actions to the dispatcher according to the transaction types\n            if (\n                [TransactionType.NAMESPACE_REGISTRATION, TransactionType.MOSAIC_ALIAS, TransactionType.ADDRESS_ALIAS].some((a) =>\n                    transactionTypes.some((b) => b === a),\n                )\n            ) {\n                dispatch('namespace/LOAD_NAMESPACES', {}, { root: true });\n            }\n\n            // Reloading Balances\n            await dispatch('account/LOAD_ACCOUNT_INFO', {}, { root: true });\n            dispatch('mosaic/LOAD_MOSAICS', {}, { root: true });\n\n            await dispatch('restriction/LOAD_ACCOUNT_RESTRICTIONS', {}, { root: true });\n        },\n        /// end-region scoped actions\n\n        ADD_COSIGNATURE({ commit, getters, rootGetters }, transaction: CosignatureSignedTransaction) {\n            if (!transaction || !transaction.parentHash) {\n                throw Error(\"Missing mandatory field 'parentHash' for action transaction/ADD_COSIGNATURE.\");\n            }\n            const transactionAttribute = transactionGroupToStateVariable(TransactionGroupState.partial);\n            const transactions: AggregateTransaction[] = getters[transactionAttribute] || [];\n\n            // return if no transactions\n            if (!transactions.length) {\n                return;\n            }\n\n            const index = transactions.findIndex((t) => t.transactionInfo.hash === transaction.parentHash);\n\n            // partial tx unknown, @TODO: handle this case (fetch partials)\n            if (index === -1) {\n                return;\n            }\n\n            // convert CosignatureSignedTransaction to AggregateTransactionCosignature\n            const generationHash = rootGetters['network/generationHash'];\n            const cosigner = PublicAccount.createFromPublicKey(transaction.signerPublicKey, generationHash);\n            const cosignature = new AggregateTransactionCosignature(transaction.signature, cosigner);\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n\n            // update the partial transaction cosignatures\n            transactions[index] = transactions[index].addCosignatures([cosignature]);\n\n            commit('partialTransactions', transactions);\n            commit('setAllTransactions');\n            commit('filterTransactions', {\n                filterOption: null,\n                currentSignerAddress: currentSignerAddress.plain(),\n                shouldFilterOptionChange: false,\n            });\n        },\n    },\n};\n"],"sourceRoot":""}]}