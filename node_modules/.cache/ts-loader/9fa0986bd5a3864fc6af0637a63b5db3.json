{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/store/Account.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/store/Account.ts","mtime":1606213958969},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvaGVyby9sYXJlZC13YWxsZXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmltcG9ydCB7IF9fYXdhaXRlciB9IGZyb20gInRzbGliIjsKLyoKICogQ29weXJpZ2h0IDIwMjAgTkVNIChodHRwczovL25lbS5pbykKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBBZGRyZXNzIH0gZnJvbSAnc3ltYm9sLXNkayc7CmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7IC8vIGludGVybmFsIGRlcGVuZGVuY2llcwoKaW1wb3J0IHsgJGV2ZW50QnVzIH0gZnJvbSAnLi4vZXZlbnRzJzsKaW1wb3J0IHsgUkVTVFNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL1JFU1RTZXJ2aWNlJzsKaW1wb3J0IHsgQXdhaXRMb2NrIH0gZnJvbSAnLi9Bd2FpdExvY2snOwppbXBvcnQgeyBBY2NvdW50TW9kZWwgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UvZW50aXRpZXMvQWNjb3VudE1vZGVsJzsKaW1wb3J0IHsgTXVsdGlzaWdTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9NdWx0aXNpZ1NlcnZpY2UnOwppbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IEFjY291bnRTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9BY2NvdW50U2VydmljZSc7CmltcG9ydCB7IGNhdGNoRXJyb3IsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsKaW1wb3J0IHsgUHJvZmlsZVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL1Byb2ZpbGVTZXJ2aWNlJzsgLy8vIHJlZ2lvbiBnbG9iYWxzCgp2YXIgTG9jayA9IEF3YWl0TG9jay5jcmVhdGUoKTsgLy8gYWNjb3VudCBzdGF0ZSBpbml0aWFsIGRlZmluaXRpb24KCnZhciBhY2NvdW50U3RhdGUgPSB7CiAgaW5pdGlhbGl6ZWQ6IGZhbHNlLAogIGN1cnJlbnRBY2NvdW50OiBudWxsLAogIGN1cnJlbnRBY2NvdW50QWRkcmVzczogbnVsbCwKICBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbzogbnVsbCwKICBjdXJyZW50QWNjb3VudEFsaWFzZXM6IFtdLAogIGlzQ29zaWduYXRvcnlNb2RlOiBmYWxzZSwKICBzaWduZXJzOiBbXSwKICBjdXJyZW50U2lnbmVyOiBudWxsLAogIGN1cnJlbnRTaWduZXJBZGRyZXNzOiBudWxsLAogIGN1cnJlbnRTaWduZXJQdWJsaWNLZXk6IG51bGwsCiAgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbzogbnVsbCwKICBrbm93bkFjY291bnRzOiBbXSwKICBrbm93bkFkZHJlc3NlczogW10sCiAgYWNjb3VudHNJbmZvOiBbXSwKICBtdWx0aXNpZ0FjY291bnRzSW5mbzogW10sCiAgc3Vic2NyaXB0aW9uczoge30sCiAgY3VycmVudFJlY2lwaWVudDogbnVsbCwKICBtdWx0aXNpZ0FjY291bnRHcmFwaDogbnVsbCwKICBzZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3Q6IFtdLAogIGN1cnJlbnRTaWduZXJBY2NvdW50TW9kZWw6IG51bGwKfTsKLyoqCiAqIEFjY291bnQgU3RvcmUKICovCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogYWNjb3VudFN0YXRlLAogIGdldHRlcnM6IHsKICAgIGdldEluaXRpYWxpemVkOiBmdW5jdGlvbiBnZXRJbml0aWFsaXplZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaW5pdGlhbGl6ZWQ7CiAgICB9LAogICAgY3VycmVudEFjY291bnQ6IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50QWNjb3VudDsKICAgIH0sCiAgICBzaWduZXJzOiBmdW5jdGlvbiBzaWduZXJzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zaWduZXJzOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXI6IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRTaWduZXI7CiAgICB9LAogICAgY3VycmVudEFjY291bnRBZGRyZXNzOiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudEFkZHJlc3Moc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRBY2NvdW50QWRkcmVzczsKICAgIH0sCiAgICBrbm93bkFkZHJlc3NlczogZnVuY3Rpb24ga25vd25BZGRyZXNzZXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmtub3duQWRkcmVzc2VzOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvOiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm87CiAgICB9LAogICAgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbzogZnVuY3Rpb24gY3VycmVudFNpZ25lck11bHRpc2lnSW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFNpZ25lck11bHRpc2lnSW5mbzsKICAgIH0sCiAgICBpc0Nvc2lnbmF0b3J5TW9kZTogZnVuY3Rpb24gaXNDb3NpZ25hdG9yeU1vZGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzQ29zaWduYXRvcnlNb2RlOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXJBZGRyZXNzOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyQWRkcmVzcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFNpZ25lckFkZHJlc3M7CiAgICB9LAogICAgY3VycmVudFNpZ25lclB1YmxpY0tleTogZnVuY3Rpb24gY3VycmVudFNpZ25lclB1YmxpY0tleShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFNpZ25lclB1YmxpY0tleTsKICAgIH0sCiAgICBrbm93bkFjY291bnRzOiBmdW5jdGlvbiBrbm93bkFjY291bnRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5rbm93bkFjY291bnRzOwogICAgfSwKICAgIGFjY291bnRzSW5mbzogZnVuY3Rpb24gYWNjb3VudHNJbmZvKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5hY2NvdW50c0luZm87CiAgICB9LAogICAgY3VycmVudEFjY291bnRBY2NvdW50SW5mbzogZnVuY3Rpb24gY3VycmVudEFjY291bnRBY2NvdW50SW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYWNjb3VudHNJbmZvLmZpbmQoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgcHVibGljS2V5ID0gX3JlZi5wdWJsaWNLZXk7CiAgICAgICAgcmV0dXJuIHB1YmxpY0tleSA9PT0gc3RhdGUuY3VycmVudEFjY291bnQucHVibGljS2V5OwogICAgICB9KTsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyQWNjb3VudEluZm86IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXJBY2NvdW50SW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYWNjb3VudHNJbmZvLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIGFkZHJlc3MgPSBfcmVmMi5hZGRyZXNzOwogICAgICAgIHJldHVybiBhZGRyZXNzLnBsYWluKCkgPT09IHN0YXRlLmN1cnJlbnRTaWduZXIuYWRkcmVzcy5wbGFpbigpOwogICAgICB9KTsKICAgIH0sCiAgICBtdWx0aXNpZ0FjY291bnRzSW5mbzogZnVuY3Rpb24gbXVsdGlzaWdBY2NvdW50c0luZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm11bHRpc2lnQWNjb3VudHNJbmZvOwogICAgfSwKICAgIGdldFN1YnNjcmlwdGlvbnM6IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN1YnNjcmlwdGlvbnM7CiAgICB9LAogICAgY3VycmVudFJlY2lwaWVudDogZnVuY3Rpb24gY3VycmVudFJlY2lwaWVudChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFJlY2lwaWVudDsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudEFsaWFzZXM6IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50QWxpYXNlcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudEFjY291bnRBbGlhc2VzOwogICAgfSwKICAgIG11bHRpc2lnQWNjb3VudEdyYXBoOiBmdW5jdGlvbiBtdWx0aXNpZ0FjY291bnRHcmFwaChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubXVsdGlzaWdBY2NvdW50R3JhcGg7CiAgICB9LAogICAgc2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0OiBmdW5jdGlvbiBzZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdDsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyQWNjb3VudE1vZGVsOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyQWNjb3VudE1vZGVsKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5rbm93bkFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gYS5hZGRyZXNzID09PSBzdGF0ZS5jdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpOwogICAgICB9KTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0SW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uIHNldEluaXRpYWxpemVkKHN0YXRlLCBpbml0aWFsaXplZCkgewogICAgICBzdGF0ZS5pbml0aWFsaXplZCA9IGluaXRpYWxpemVkOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50OiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudChzdGF0ZSwgYWNjb3VudE1vZGVsKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRBY2NvdW50ID0gYWNjb3VudE1vZGVsOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50QWRkcmVzczogZnVuY3Rpb24gY3VycmVudEFjY291bnRBZGRyZXNzKHN0YXRlLCBhY2NvdW50QWRkcmVzcykgewogICAgICBzdGF0ZS5jdXJyZW50QWNjb3VudEFkZHJlc3MgPSBhY2NvdW50QWRkcmVzczsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudEFsaWFzZXM6IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50QWxpYXNlcyhzdGF0ZSwgX2N1cnJlbnRBY2NvdW50QWxpYXNlcykgewogICAgICBzdGF0ZS5jdXJyZW50QWNjb3VudEFsaWFzZXMgPSBfY3VycmVudEFjY291bnRBbGlhc2VzOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXI6IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXIoc3RhdGUsIF9jdXJyZW50U2lnbmVyKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRTaWduZXIgPSBfY3VycmVudFNpZ25lcjsKICAgIH0sCiAgICBzaWduZXJzOiBmdW5jdGlvbiBzaWduZXJzKHN0YXRlLCBfc2lnbmVycykgewogICAgICBzdGF0ZS5zaWduZXJzID0gX3NpZ25lcnM7CiAgICB9LAogICAgY3VycmVudFNpZ25lckFkZHJlc3M6IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXJBZGRyZXNzKHN0YXRlLCBzaWduZXJBZGRyZXNzKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRTaWduZXJBZGRyZXNzID0gc2lnbmVyQWRkcmVzczsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyUHVibGljS2V5OiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyUHVibGljS2V5KHN0YXRlLCBzaWduZXJQdWJLZXkpIHsKICAgICAgc3RhdGUuY3VycmVudFNpZ25lclB1YmxpY0tleSA9IHNpZ25lclB1YktleTsKICAgIH0sCiAgICBrbm93bkFjY291bnRzOiBmdW5jdGlvbiBrbm93bkFjY291bnRzKHN0YXRlLCBfa25vd25BY2NvdW50cykgewogICAgICBzdGF0ZS5rbm93bkFjY291bnRzID0gX2tub3duQWNjb3VudHM7CiAgICB9LAogICAga25vd25BZGRyZXNzZXM6IGZ1bmN0aW9uIGtub3duQWRkcmVzc2VzKHN0YXRlLCBfa25vd25BZGRyZXNzZXMpIHsKICAgICAgc3RhdGUua25vd25BZGRyZXNzZXMgPSBfa25vd25BZGRyZXNzZXM7CiAgICB9LAogICAgaXNDb3NpZ25hdG9yeU1vZGU6IGZ1bmN0aW9uIGlzQ29zaWduYXRvcnlNb2RlKHN0YXRlLCBfaXNDb3NpZ25hdG9yeU1vZGUpIHsKICAgICAgc3RhdGUuaXNDb3NpZ25hdG9yeU1vZGUgPSBfaXNDb3NpZ25hdG9yeU1vZGU7CiAgICB9LAogICAgYWNjb3VudHNJbmZvOiBmdW5jdGlvbiBhY2NvdW50c0luZm8oc3RhdGUsIF9hY2NvdW50c0luZm8pIHsKICAgICAgc3RhdGUuYWNjb3VudHNJbmZvID0gX2FjY291bnRzSW5mbzsKICAgIH0sCiAgICBtdWx0aXNpZ0FjY291bnRzSW5mbzogZnVuY3Rpb24gbXVsdGlzaWdBY2NvdW50c0luZm8oc3RhdGUsIF9tdWx0aXNpZ0FjY291bnRzSW5mbykgewogICAgICBzdGF0ZS5tdWx0aXNpZ0FjY291bnRzSW5mbyA9IF9tdWx0aXNpZ0FjY291bnRzSW5mbzsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbzogZnVuY3Rpb24gY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8oc3RhdGUsIF9jdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbykgewogICAgICBzdGF0ZS5jdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbyA9IF9jdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbzsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvKHN0YXRlLCBfY3VycmVudFNpZ25lck11bHRpc2lnSW5mbykgewogICAgICBzdGF0ZS5jdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvID0gX2N1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm87CiAgICB9LAogICAgY3VycmVudFJlY2lwaWVudDogZnVuY3Rpb24gY3VycmVudFJlY2lwaWVudChzdGF0ZSwgX2N1cnJlbnRSZWNpcGllbnQpIHsKICAgICAgc3RhdGUuY3VycmVudFJlY2lwaWVudCA9IF9jdXJyZW50UmVjaXBpZW50OwogICAgfSwKICAgIHNldFN1YnNjcmlwdGlvbnM6IGZ1bmN0aW9uIHNldFN1YnNjcmlwdGlvbnMoc3RhdGUsIHN1YnNjcmlwdGlvbnMpIHsKICAgICAgc3RhdGUuc3Vic2NyaXB0aW9ucyA9IHN1YnNjcmlwdGlvbnM7CiAgICB9LAogICAgbXVsdGlzaWdBY2NvdW50R3JhcGg6IGZ1bmN0aW9uIG11bHRpc2lnQWNjb3VudEdyYXBoKHN0YXRlLCBfbXVsdGlzaWdBY2NvdW50R3JhcGgpIHsKICAgICAgc3RhdGUubXVsdGlzaWdBY2NvdW50R3JhcGggPSBfbXVsdGlzaWdBY2NvdW50R3JhcGg7CiAgICB9LAogICAgdXBkYXRlU3Vic2NyaXB0aW9uczogZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9ucyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgYWRkcmVzcyA9IHBheWxvYWQuYWRkcmVzcywKICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBwYXlsb2FkLnN1YnNjcmlwdGlvbnM7IC8vIGlmIHN1YnNjcmlwdGlvbnMgYXJlIGVtcHR5LCB1bnNldCB0aGUgYWRkcmVzcyBzdWJzY3JpcHRpb25zCgogICAgICBpZiAoIXN1YnNjcmlwdGlvbnMpIHsKICAgICAgICBWdWVbImRlbGV0ZSJdKHN0YXRlLnN1YnNjcmlwdGlvbnMsIGFkZHJlc3MpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBnZXQgY3VycmVudCBzdWJzY3JpcHRpb25zIGZyb20gc3RhdGUKCgogICAgICB2YXIgb2xkU3Vic2NyaXB0aW9ucyA9IHN0YXRlLnN1YnNjcmlwdGlvbnNbYWRkcmVzc10gfHwgW107IC8vIHVwZGF0ZSBzdWJzY3JpcHRpb25zCgogICAgICB2YXIgbmV3U3Vic2NyaXB0aW9ucyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkob2xkU3Vic2NyaXB0aW9ucyksIFtzdWJzY3JpcHRpb25zXSk7IC8vIHVwZGF0ZSBzdGF0ZQoKICAgICAgVnVlLnNldChzdGF0ZS5zdWJzY3JpcHRpb25zLCBhZGRyZXNzLCBuZXdTdWJzY3JpcHRpb25zKTsKICAgIH0sCiAgICBhZGRUb1NlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdDogZnVuY3Rpb24gYWRkVG9TZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3Qoc3RhdGUsIHBhdGhOdW1iZXIpIHsKICAgICAgdmFyIHNlbGVjdGVkQWNjb3VudHMgPSBfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGUuc2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0KTsKCiAgICAgIHNlbGVjdGVkQWNjb3VudHMucHVzaChwYXRoTnVtYmVyKTsKICAgICAgc3RhdGUuc2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0ID0gc2VsZWN0ZWRBY2NvdW50czsKICAgIH0sCiAgICByZW1vdmVGcm9tU2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0OiBmdW5jdGlvbiByZW1vdmVGcm9tU2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0KHN0YXRlLCBwYXRoTnVtYmVyKSB7CiAgICAgIHZhciBzZWxlY3RlZEFjY291bnRzID0gX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLnNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdCk7CgogICAgICB2YXIgaW5kZXhUb0RlbGV0ZSA9IHNlbGVjdGVkQWNjb3VudHMuaW5kZXhPZihwYXRoTnVtYmVyKTsKICAgICAgc2VsZWN0ZWRBY2NvdW50cy5zcGxpY2UoaW5kZXhUb0RlbGV0ZSwgMSk7CiAgICAgIHN0YXRlLnNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdCA9IHNlbGVjdGVkQWNjb3VudHM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvKioKICAgICAqIFBvc3NpYmxlIGBvcHRpb25zYCB2YWx1ZXMgaW5jbHVkZToKICAgICAqIEB0eXBlIHsKICAgICAqICAgIHNraXBUcmFuc2FjdGlvbnM6IGJvb2xlYW4sCiAgICAgKiB9CiAgICAgKi8KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoX3JlZjMsIF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjMuZ2V0dGVyczsKICAgICAgdmFyIGFkZHJlc3MgPSBfcmVmNC5hZGRyZXNzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHZhciBjYWxsYmFjazsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFhZGRyZXNzIHx8ICFhZGRyZXNzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBMb2NrLmluaXRpYWxpemUoY2FsbGJhY2ssIHsKICAgICAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKICAgIH0sCiAgICB1bmluaXRpYWxpemU6IGZ1bmN0aW9uIHVuaW5pdGlhbGl6ZShfcmVmNSwgX3JlZjYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2gsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjUuZ2V0dGVyczsKICAgICAgdmFyIGFkZHJlc3MgPSBfcmVmNi5hZGRyZXNzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMiwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ1VOU1VCU0NSSUJFJywgYWRkcmVzcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgndHJhbnNhY3Rpb24vUkVTRVRfVFJBTlNBQ1RJT05TJywge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0SW5pdGlhbGl6ZWQnLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIExvY2sudW5pbml0aWFsaXplKGNhbGxiYWNrLCB7CiAgICAgICAgICAgICAgICAgIGdldHRlcnM6IGdldHRlcnMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUG9zc2libGUgYG9wdGlvbnNgIHZhbHVlcyBpbmNsdWRlOgogICAgICogQHR5cGUgewogICAgICogICAgaXNDb3NpZ25hdG9yeU1vZGU6IGJvb2xlYW4sCiAgICAgKiB9CiAgICAgKi8KICAgIFNFVF9DVVJSRU5UX0FDQ09VTlQ6IGZ1bmN0aW9uIFNFVF9DVVJSRU5UX0FDQ09VTlQoX3JlZjcsIGN1cnJlbnRBY2NvdW50KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY3LmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWY3LmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHByZXZpb3VzLCBjdXJyZW50QWNjb3VudEFkZHJlc3M7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBwcmV2aW91cyA9IGdldHRlcnMuY3VycmVudEFjY291bnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocHJldmlvdXMgJiYgcHJldmlvdXMuYWRkcmVzcyA9PT0gY3VycmVudEFjY291bnQuYWRkcmVzcykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50QWRkcmVzcyA9IEFkZHJlc3MuY3JlYXRlRnJvbVJhd0FkZHJlc3MoY3VycmVudEFjY291bnQuYWRkcmVzcyk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnZGlhZ25vc3RpYy9BRERfREVCVUcnLCAnU3RvcmUgYWN0aW9uIGFjY291bnQvU0VUX0NVUlJFTlRfQUNDT1VOVCBkaXNwYXRjaGVkIHdpdGggJyArIGN1cnJlbnRBY2NvdW50QWRkcmVzcy5wbGFpbigpLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOyAvLyBzZXQgY3VycmVudCBhY2NvdW50CgogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudCcsIGN1cnJlbnRBY2NvdW50KTsgLy8gcmVzZXQgY3VycmVudCBzaWduZXIKCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnU0VUX0NVUlJFTlRfU0lHTkVSJywgewogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBjdXJyZW50QWNjb3VudEFkZHJlc3MKICAgICAgICAgICAgICAgIH0pOyAvL3Jlc2V0IGN1cnJlbnQgYWNjb3VudCBhbGlhcwoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdMT0FEX0NVUlJFTlRfQUNDT1VOVF9BTElBU0VTJywgY3VycmVudEFjY291bnRBZGRyZXNzKTsKICAgICAgICAgICAgICAgICRldmVudEJ1cy4kZW1pdCgnb25BY2NvdW50Q2hhbmdlJywgY3VycmVudEFjY291bnRBZGRyZXNzLnBsYWluKCkpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CiAgICB9LAogICAgUkVTRVRfQ1VSUkVOVF9BQ0NPVU5UOiBmdW5jdGlvbiBSRVNFVF9DVVJSRU5UX0FDQ09VTlQoX3JlZjgpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2g7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnZGlhZ25vc3RpYy9BRERfREVCVUcnLCAnU3RvcmUgYWN0aW9uIGFjY291bnQvUkVTRVRfQ1VSUkVOVF9BQ0NPVU5UIGRpc3BhdGNoZWQnLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudCcsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudEFkZHJlc3MnLCBudWxsKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lckFkZHJlc3MnLCBudWxsKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lclB1YmxpY0tleScsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudEFsaWFzZXMnLCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKICAgIH0sCiAgICBTRVRfQ1VSUkVOVF9TSUdORVI6IGZ1bmN0aW9uIFNFVF9DVVJSRU5UX1NJR05FUihfcmVmOSwgX3JlZjEwKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOS5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY5LmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWY5LmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY5LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgYWRkcmVzcyA9IF9yZWYxMC5hZGRyZXNzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBjdXJyZW50UHJvZmlsZSwgY3VycmVudEFjY291bnQsIHByZXZpb3VzU2lnbmVyQWRkcmVzcywgY3VycmVudFNpZ25lckFkZHJlc3MsIGN1cnJlbnRBY2NvdW50QWRkcmVzcywga25vd25BY2NvdW50czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgd2hlbiBjYWxsaW5nIGFjY291bnQvU0VUX0NVUlJFTlRfU0lHTkVSIScpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudCA9IGdldHRlcnMuY3VycmVudEFjY291bnQ7CiAgICAgICAgICAgICAgICBwcmV2aW91c1NpZ25lckFkZHJlc3MgPSBnZXR0ZXJzLmN1cnJlbnRTaWduZXJBZGRyZXNzOwogICAgICAgICAgICAgICAgY3VycmVudFNpZ25lckFkZHJlc3MgPSBhZGRyZXNzOwoKICAgICAgICAgICAgICAgIGlmICghKHByZXZpb3VzU2lnbmVyQWRkcmVzcyAmJiBwcmV2aW91c1NpZ25lckFkZHJlc3MuZXF1YWxzKGN1cnJlbnRTaWduZXJBZGRyZXNzKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdkaWFnbm9zdGljL0FERF9ERUJVRycsICdTdG9yZSBhY3Rpb24gYWNjb3VudC9TRVRfQ1VSUkVOVF9TSUdORVIgZGlzcGF0Y2hlZCB3aXRoICcgKyBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL1JFU0VUX1RSQU5TQUNUSU9OUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY3VycmVudEFjY291bnRBZGRyZXNzID0gQWRkcmVzcy5jcmVhdGVGcm9tUmF3QWRkcmVzcyhjdXJyZW50QWNjb3VudC5hZGRyZXNzKTsKICAgICAgICAgICAgICAgIGtub3duQWNjb3VudHMgPSBuZXcgQWNjb3VudFNlcnZpY2UoKS5nZXRLbm93bkFjY291bnRzKGN1cnJlbnRQcm9maWxlLmFjY291bnRzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lckFkZHJlc3MnLCBjdXJyZW50U2lnbmVyQWRkcmVzcyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRBY2NvdW50QWRkcmVzcycsIGN1cnJlbnRBY2NvdW50QWRkcmVzcyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2lzQ29zaWduYXRvcnlNb2RlJywgIWN1cnJlbnRTaWduZXJBZGRyZXNzLmVxdWFscyhjdXJyZW50QWNjb3VudEFkZHJlc3MpKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIGtub3duQWNjb3VudHMpOyAvLyBVcGdyYWRlCgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ25hbWVzcGFjZS9TSUdORVJfQ0hBTkdFRCcsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ21vc2FpYy9TSUdORVJfQ0hBTkdFRCcsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL1NJR05FUl9DSEFOR0VEJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbWV0YWRhdGEvU0lHTkVSX0NIQU5HRUQnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsgLy8gb3BlbiAvIGNsb3NlIHdlYnNvY2tldCBjb25uZWN0aW9ucwoKICAgICAgICAgICAgICAgIGlmICghcHJldmlvdXNTaWduZXJBZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ1VOU1VCU0NSSUJFJywgcHJldmlvdXNTaWduZXJBZGRyZXNzKTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ1NVQlNDUklCRScsIGN1cnJlbnRTaWduZXJBZGRyZXNzKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ0xPQURfQUNDT1VOVF9JTkZPJyk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbmFtZXNwYWNlL0xPQURfTkFNRVNQQUNFUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ21vc2FpYy9MT0FEX01PU0FJQ1MnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBORVRXT1JLX0NIQU5HRUQ6IGZ1bmN0aW9uIE5FVFdPUktfQ0hBTkdFRChfcmVmMTEpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZjExLmRpc3BhdGNoOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL1JFU0VUX1RSQU5TQUNUSU9OUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ25hbWVzcGFjZS9SRVNFVF9OQU1FU1BBQ0VTJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbW9zYWljL1JFU0VUX01PU0FJQ1MnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCd0cmFuc2FjdGlvbi9MT0FEX1RSQU5TQUNUSU9OUycsIHVuZGVmaW5lZCwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbW9zYWljL0xPQURfTkVUV09SS19DVVJSRU5DSUVTJywgdW5kZWZpbmVkLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ0xPQURfQUNDT1VOVF9JTkZPJyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCduYW1lc3BhY2UvTE9BRF9OQU1FU1BBQ0VTJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbW9zYWljL0xPQURfTU9TQUlDUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpOwogICAgfSwKICAgIEdFVF9SRUNJUElFTlQ6IGZ1bmN0aW9uIEdFVF9SRUNJUElFTlQoX3JlZjEyLCByZWNpcGllbnRBZGRyZXNzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTIuY29tbWl0LAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTIucm9vdEdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIGN1cnJlbnRQcm9maWxlLCBrbm93bkFjY291bnRzLCBrbm93blJlY2lwaWVudCwgcmVwb3NpdG9yeUZhY3RvcnksIGdldEFjY291bnRzSW5mb1Byb21pc2UsIGFjY291bnRzSW5mbzsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghcmVjaXBpZW50QWRkcmVzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0ZpcnN0IGNoZWNrIGtub3duIGFjY291bnRzCiAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CiAgICAgICAgICAgICAgICBrbm93bkFjY291bnRzID0gbmV3IEFjY291bnRTZXJ2aWNlKCkuZ2V0S25vd25BY2NvdW50cyhjdXJyZW50UHJvZmlsZS5hY2NvdW50cyk7CiAgICAgICAgICAgICAgICBrbm93blJlY2lwaWVudCA9IGtub3duQWNjb3VudHMuZmluZChmdW5jdGlvbiAoa2EpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGthLmFkZHJlc3MgPT09IHJlY2lwaWVudEFkZHJlc3MucGxhaW4oKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICgha25vd25SZWNpcGllbnQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRSZWNpcGllbnQnLCBBY2NvdW50TW9kZWwuZ2V0T2JqZWN0cyhrbm93blJlY2lwaWVudCkucHVibGljQWNjb3VudCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgICAgICAgICAgIGdldEFjY291bnRzSW5mb1Byb21pc2UgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVBY2NvdW50UmVwb3NpdG9yeSgpLmdldEFjY291bnRJbmZvKHJlY2lwaWVudEFkZHJlc3MpLnRvUHJvbWlzZSgpWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1pdCgnY3VycmVudFJlY2lwaWVudCcsIG51bGwpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFjY291bnRzSW5mb1Byb21pc2U7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBhY2NvdW50c0luZm8gPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFJlY2lwaWVudCcsIGFjY291bnRzSW5mby5wdWJsaWNBY2NvdW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFJlY2lwaWVudCcsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpOwogICAgfSwKICAgIExPQURfQ1VSUkVOVF9BQ0NPVU5UX0FMSUFTRVM6IGZ1bmN0aW9uIExPQURfQ1VSUkVOVF9BQ0NPVU5UX0FMSUFTRVMoX3JlZjEzLCBjdXJyZW50QWNjb3VudEFkZHJlc3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMy5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxMy5yb290R2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5LCBhbGlhc1Byb21pc2UsIGFsaWFzZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVwb3NpdG9yeUZhY3RvcnkgPSByb290R2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICAgICAgICAgICAgYWxpYXNQcm9taXNlID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTmFtZXNwYWNlUmVwb3NpdG9yeSgpLmdldEFjY291bnRzTmFtZXMoW2N1cnJlbnRBY2NvdW50QWRkcmVzc10pLnRvUHJvbWlzZSgpWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1pdCgnY3VycmVudEFjY291bnRBbGlhc2VzJywgW10pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFsaWFzUHJvbWlzZTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgYWxpYXNlcyA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudEFjY291bnRBbGlhc2VzJywgYWxpYXNlcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgfSkpOwogICAgfSwKICAgIExPQURfQUNDT1VOVF9JTkZPOiBmdW5jdGlvbiBMT0FEX0FDQ09VTlRfSU5GTyhfcmVmMTQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNC5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjE0LmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNC5yb290R2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIG5ldHdvcmtUeXBlLCBjdXJyZW50QWNjb3VudCwgcmVwb3NpdG9yeUZhY3RvcnksIGN1cnJlbnRTaWduZXJBZGRyZXNzLCBjdXJyZW50QWNjb3VudEFkZHJlc3MsIGtub3duQWNjb3VudHMsIGdldE11bHRpc2lnQWNjb3VudEdyYXBoSW5mb1Byb21pc2UsIGFsaWFzUHJvbWlzZSwgYWxpYXNlcywgbXVsdGlzaWdBY2NvdW50c0luZm8sIGN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvLCBjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvLCBhY2NvdW50U2VydmljZSwgc2lnbmVycywga25vd25BZGRyZXNzZXMsIGdldEFjY291bnRzSW5mb1Byb21pc2UsIGFjY291bnRzSW5mbywgc2lnbmVyTW9kZWw7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbmV0d29ya1R5cGUgPSByb290R2V0dGVyc1snbmV0d29yay9uZXR3b3JrVHlwZSddOwogICAgICAgICAgICAgICAgY3VycmVudEFjY291bnQgPSBnZXR0ZXJzLmN1cnJlbnRBY2NvdW50OwogICAgICAgICAgICAgICAgcmVwb3NpdG9yeUZhY3RvcnkgPSByb290R2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICAgICAgICAgICAgY3VycmVudFNpZ25lckFkZHJlc3MgPSBnZXR0ZXJzLmN1cnJlbnRTaWduZXJBZGRyZXNzOwogICAgICAgICAgICAgICAgY3VycmVudEFjY291bnRBZGRyZXNzID0gZ2V0dGVycy5jdXJyZW50QWNjb3VudEFkZHJlc3M7CiAgICAgICAgICAgICAgICBrbm93bkFjY291bnRzID0gZ2V0dGVycy5rbm93bkFjY291bnRzOyAvLyBhdm9pZCBjYWxscyBpZiBubyBhY2NvdW50IHNldAoKICAgICAgICAgICAgICAgIGlmICghKCFjdXJyZW50QWNjb3VudCB8fCAhY3VycmVudEFjY291bnRBZGRyZXNzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFjY291bnRBZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgZ2V0TXVsdGlzaWdBY2NvdW50R3JhcGhJbmZvUHJvbWlzZSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZU11bHRpc2lnUmVwb3NpdG9yeSgpLmdldE11bHRpc2lnQWNjb3VudEdyYXBoSW5mbyhjdXJyZW50QWNjb3VudEFkZHJlc3MpLnBpcGUobWFwKGZ1bmN0aW9uIChnKSB7CiAgICAgICAgICAgICAgICAgIC8vIHNvcnRlZCBhcnJheSB0byBiZSByZXByZXNlbnRlZCBpbiBtdWx0aXNpZyB0cmVlCiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnbXVsdGlzaWdBY2NvdW50R3JhcGgnLCBNdWx0aXNpZ1NlcnZpY2UuZ2V0TXVsdGlzaWdHcmFwaEFycmF5U29ydGVkKGcubXVsdGlzaWdFbnRyaWVzKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aXNpZ1NlcnZpY2UuZ2V0TXVsdGlzaWdJbmZvRnJvbU11bHRpc2lnR3JhcGhJbmZvKGcpOwogICAgICAgICAgICAgICAgfSksIGNhdGNoRXJyb3IoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gb2YoW10pOwogICAgICAgICAgICAgICAgfSkpLnRvUHJvbWlzZSgpOyAvLyBSRU1PVEUgQ0FMTAoKICAgICAgICAgICAgICAgIGFsaWFzUHJvbWlzZSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZU5hbWVzcGFjZVJlcG9zaXRvcnkoKS5nZXRBY2NvdW50c05hbWVzKFtjdXJyZW50QWNjb3VudEFkZHJlc3NdKS50b1Byb21pc2UoKVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb21taXQoJ2N1cnJlbnRBY2NvdW50QWxpYXNlcycsIFtdKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYWxpYXNQcm9taXNlOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgYWxpYXNlcyA9IF9jb250ZXh0MTEuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudEFjY291bnRBbGlhc2VzJywgYWxpYXNlcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxODsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRNdWx0aXNpZ0FjY291bnRHcmFwaEluZm9Qcm9taXNlOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgbXVsdGlzaWdBY2NvdW50c0luZm8gPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbyA9IG11bHRpc2lnQWNjb3VudHNJbmZvLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uYWNjb3VudEFkZHJlc3MuZXF1YWxzKGN1cnJlbnRBY2NvdW50QWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGN1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm8gPSBtdWx0aXNpZ0FjY291bnRzSW5mby5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtLmFjY291bnRBZGRyZXNzLmVxdWFscyhjdXJyZW50U2lnbmVyQWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KTsgLy8gdXBkYXRlIG11bHRpc2lnIGZsYWcgaW4gY3VycmVudEFjY291bnQKCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8gJiYgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8uaXNNdWx0aXNpZygpICYmICFjdXJyZW50QWNjb3VudC5pc011bHRpc2lnKSB7CiAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlID0gbmV3IEFjY291bnRTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlLnVwZGF0ZUlzTXVsdGlzaWcoY3VycmVudEFjY291bnQsIHRydWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNpZ25lcnMgPSBuZXcgTXVsdGlzaWdTZXJ2aWNlKCkuZ2V0U2lnbmVycyhuZXR3b3JrVHlwZSwga25vd25BY2NvdW50cywgY3VycmVudEFjY291bnQsIGN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvLCBtdWx0aXNpZ0FjY291bnRzSW5mbyk7CiAgICAgICAgICAgICAgICBrbm93bkFkZHJlc3NlcyA9IF8udW5pcUJ5KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2lnbmVycy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuYWRkcmVzczsKICAgICAgICAgICAgICAgIH0pKSwgX3RvQ29uc3VtYWJsZUFycmF5KGtub3duQWNjb3VudHMubWFwKGZ1bmN0aW9uICh3KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBZGRyZXNzLmNyZWF0ZUZyb21SYXdBZGRyZXNzKHcuYWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KSkpLmZpbHRlcihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgICAgICAgIH0pLCAnYWRkcmVzcycpOwogICAgICAgICAgICAgICAgY29tbWl0KCdrbm93bkFkZHJlc3NlcycsIGtub3duQWRkcmVzc2VzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lcicsIHNpZ25lcnMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICByZXR1cm4gcy5hZGRyZXNzLmVxdWFscyhjdXJyZW50U2lnbmVyQWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NpZ25lcnMnLCBzaWduZXJzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnbXVsdGlzaWdBY2NvdW50c0luZm8nLCBtdWx0aXNpZ0FjY291bnRzSW5mbyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvJywgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8pOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvJywgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbyk7IC8vIFJFTU9URSBDQUxMCgogICAgICAgICAgICAgICAgZ2V0QWNjb3VudHNJbmZvUHJvbWlzZSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZUFjY291bnRSZXBvc2l0b3J5KCkuZ2V0QWNjb3VudHNJbmZvKGtub3duQWRkcmVzc2VzKS50b1Byb21pc2UoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFjY291bnRzSW5mb1Byb21pc2U7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBhY2NvdW50c0luZm8gPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ2FjY291bnRzSW5mbycsIGFjY291bnRzSW5mbyk7IC8vIHJlYWQgc2lnbmVyIGluZm8gdG8gZ2V0IHB1YmxpYyBrZXkKCiAgICAgICAgICAgICAgICBzaWduZXJNb2RlbCA9IGtub3duQWNjb3VudHMuZmluZChmdW5jdGlvbiAodykgewogICAgICAgICAgICAgICAgICByZXR1cm4gdy5hZGRyZXNzID09PSBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHNpZ25lck1vZGVsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyUHVibGljS2V5Jywgc2lnbmVyTW9kZWwucHVibGljS2V5KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpOwogICAgfSwKICAgIFVQREFURV9DVVJSRU5UX0FDQ09VTlRfTkFNRTogZnVuY3Rpb24gVVBEQVRFX0NVUlJFTlRfQUNDT1VOVF9OQU1FKF9yZWYxNSwgbmFtZSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE1LmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmMTUuZ2V0dGVycywKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjE1LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgY3VycmVudEFjY291bnQgPSBnZXR0ZXJzLmN1cnJlbnRBY2NvdW50OwoKICAgICAgaWYgKCFjdXJyZW50QWNjb3VudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGN1cnJlbnRQcm9maWxlID0gcm9vdEdldHRlcnNbJ3Byb2ZpbGUvY3VycmVudFByb2ZpbGUnXTsKCiAgICAgIGlmICghY3VycmVudFByb2ZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhY2NvdW50U2VydmljZSA9IG5ldyBBY2NvdW50U2VydmljZSgpOwogICAgICBhY2NvdW50U2VydmljZS51cGRhdGVOYW1lKGN1cnJlbnRBY2NvdW50LCBuYW1lKTsKICAgICAgdmFyIGtub3duQWNjb3VudHMgPSBhY2NvdW50U2VydmljZS5nZXRLbm93bkFjY291bnRzKGN1cnJlbnRQcm9maWxlLmFjY291bnRzKTsKICAgICAgY29tbWl0KCdrbm93bkFjY291bnRzJywga25vd25BY2NvdW50cyk7IC8vIHVwZGF0ZSBjdXJyZW50IHNpZ25lciBuYW1lCgogICAgICB2YXIgc2lnbmVycyA9IGdldHRlcnMuc2lnbmVyczsKICAgICAgc2lnbmVycy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICBpZiAocy5hZGRyZXNzLnBsYWluKCkgPT09IGN1cnJlbnRBY2NvdW50LmFkZHJlc3MpIHsKICAgICAgICAgIHMubGFiZWwgPSBuYW1lOwogICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyJywgcyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBVUERBVEVfQ1VSUkVOVF9BQ0NPVU5UX1JFTU9URV9BQ0NPVU5UOiBmdW5jdGlvbiBVUERBVEVfQ1VSUkVOVF9BQ0NPVU5UX1JFTU9URV9BQ0NPVU5UKF9yZWYxNiwgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXkpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNi5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjE2LmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNi5yb290R2V0dGVycywKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjE2LmRpc3BhdGNoOwogICAgICB2YXIgY3VycmVudEFjY291bnQgPSBnZXR0ZXJzLmN1cnJlbnRBY2NvdW50OwoKICAgICAgaWYgKCFjdXJyZW50QWNjb3VudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGN1cnJlbnRQcm9maWxlID0gcm9vdEdldHRlcnNbJ3Byb2ZpbGUvY3VycmVudFByb2ZpbGUnXTsKCiAgICAgIGlmICghY3VycmVudFByb2ZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhY2NvdW50U2VydmljZSA9IG5ldyBBY2NvdW50U2VydmljZSgpOwogICAgICBhY2NvdW50U2VydmljZS51cGRhdGVSZW1vdGVBY2NvdW50KGN1cnJlbnRBY2NvdW50LCBlbmNSZW1vdGVBY2NvdW50UHJpdmF0ZUtleSk7CiAgICAgIHZhciBrbm93bkFjY291bnRzID0gYWNjb3VudFNlcnZpY2UuZ2V0S25vd25BY2NvdW50cyhjdXJyZW50UHJvZmlsZS5hY2NvdW50cyk7CiAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIGtub3duQWNjb3VudHMpOwogICAgICBkaXNwYXRjaCgnTE9BRF9BQ0NPVU5UX0lORk8nKTsKICAgIH0sCiAgICBVUERBVEVfQUNDT1VOVF9TSUdORURfUEVSU0lTVEVOVF9ERUxfUkVRX1RYUzogZnVuY3Rpb24gVVBEQVRFX0FDQ09VTlRfU0lHTkVEX1BFUlNJU1RFTlRfREVMX1JFUV9UWFMoX3JlZjE3LCBfcmVmMTgpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNy5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNy5yb290R2V0dGVyczsKICAgICAgdmFyIGFjY291bnRJZCA9IF9yZWYxOC5hY2NvdW50SWQsCiAgICAgICAgICBzaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzID0gX3JlZjE4LnNpZ25lZFBlcnNpc3RlbnREZWxSZXFUeHM7CiAgICAgIHZhciBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CgogICAgICBpZiAoIWN1cnJlbnRQcm9maWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKICAgICAgdmFyIGFjY291bnRUb2JlVXBkYXRlZCA9IGFjY291bnRTZXJ2aWNlLmdldEFjY291bnQoYWNjb3VudElkKTsKICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlU2lnbmVkUGVyc2lzdGVudERlbFJlcVR4cyhhY2NvdW50VG9iZVVwZGF0ZWQsIHNpZ25lZFBlcnNpc3RlbnREZWxSZXFUeHMpOwogICAgICB2YXIga25vd25BY2NvdW50cyA9IGFjY291bnRTZXJ2aWNlLmdldEtub3duQWNjb3VudHMoY3VycmVudFByb2ZpbGUuYWNjb3VudHMpOwogICAgICBjb21taXQoJ2tub3duQWNjb3VudHMnLCBrbm93bkFjY291bnRzKTsKICAgIH0sCiAgICBVUERBVEVfQUNDT1VOVF9JU19QRVJTSVNURU5UX0RFTF9SRVFfU0VOVDogZnVuY3Rpb24gVVBEQVRFX0FDQ09VTlRfSVNfUEVSU0lTVEVOVF9ERUxfUkVRX1NFTlQoX3JlZjE5LCBfcmVmMjApIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxOS5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxOS5yb290R2V0dGVyczsKICAgICAgdmFyIGFjY291bnRJZCA9IF9yZWYyMC5hY2NvdW50SWQsCiAgICAgICAgICBpc1BlcnNpc3RlbnREZWxSZXFTZW50ID0gX3JlZjIwLmlzUGVyc2lzdGVudERlbFJlcVNlbnQ7CiAgICAgIHZhciBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CgogICAgICBpZiAoIWN1cnJlbnRQcm9maWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKICAgICAgdmFyIGFjY291bnRUb2JlVXBkYXRlZCA9IGFjY291bnRTZXJ2aWNlLmdldEFjY291bnQoYWNjb3VudElkKTsKICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlSXNQZXJzaXN0ZW50RGVsUmVxU2VudChhY2NvdW50VG9iZVVwZGF0ZWQsIGlzUGVyc2lzdGVudERlbFJlcVNlbnQpOwogICAgICB2YXIga25vd25BY2NvdW50cyA9IGFjY291bnRTZXJ2aWNlLmdldEtub3duQWNjb3VudHMoY3VycmVudFByb2ZpbGUuYWNjb3VudHMpOwogICAgICBjb21taXQoJ2tub3duQWNjb3VudHMnLCBrbm93bkFjY291bnRzKTsKICAgIH0sCiAgICBVUERBVEVfQUNDT1VOVF9TRUxFQ1RFRF9IQVJWRVNUSU5HX05PREU6IGZ1bmN0aW9uIFVQREFURV9BQ0NPVU5UX1NFTEVDVEVEX0hBUlZFU1RJTkdfTk9ERShfcmVmMjEsIF9yZWYyMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIxLmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjIxLnJvb3RHZXR0ZXJzOwogICAgICB2YXIgYWNjb3VudElkID0gX3JlZjIyLmFjY291bnRJZCwKICAgICAgICAgIHNlbGVjdGVkSGFydmVzdGluZ05vZGUgPSBfcmVmMjIuc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZTsKICAgICAgdmFyIGN1cnJlbnRQcm9maWxlID0gcm9vdEdldHRlcnNbJ3Byb2ZpbGUvY3VycmVudFByb2ZpbGUnXTsKCiAgICAgIGlmICghY3VycmVudFByb2ZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhY2NvdW50U2VydmljZSA9IG5ldyBBY2NvdW50U2VydmljZSgpOwogICAgICB2YXIgYWNjb3VudFRvYmVVcGRhdGVkID0gYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudChhY2NvdW50SWQpOwogICAgICBhY2NvdW50U2VydmljZS51cGRhdGVTZWxlY3RlZEhhcnZlc3RpbmdOb2RlKGFjY291bnRUb2JlVXBkYXRlZCwgc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZSk7CiAgICAgIHZhciBrbm93bkFjY291bnRzID0gYWNjb3VudFNlcnZpY2UuZ2V0S25vd25BY2NvdW50cyhjdXJyZW50UHJvZmlsZS5hY2NvdW50cyk7CiAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIGtub3duQWNjb3VudHMpOwogICAgfSwKICAgIERFTEVURV9DVVJSRU5UX0FDQ09VTlQ6IGZ1bmN0aW9uIERFTEVURV9DVVJSRU5UX0FDQ09VTlQoX3JlZjIzLCBhY2NvdW50KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMjMuY29tbWl0LAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMjMucm9vdEdldHRlcnM7CgogICAgICBpZiAoIWFjY291bnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CgogICAgICBpZiAoIWN1cnJlbnRQcm9maWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKICAgICAgYWNjb3VudFNlcnZpY2UuZGVsZXRlQWNjb3VudChhY2NvdW50KTsKICAgICAgdmFyIGFjY291bnRzSWRzID0gYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudHMoKS5maWx0ZXIoZnVuY3Rpb24gKGFjYykgewogICAgICAgIHJldHVybiBhY2MucHJvZmlsZU5hbWUgPT09IGN1cnJlbnRQcm9maWxlLnByb2ZpbGVOYW1lOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGFjYykgewogICAgICAgIHJldHVybiBhY2MuaWQ7CiAgICAgIH0pOyAvLyB1cGRhdGUgYWNjb3VudHMgaW4gcHJvZmlsZQoKICAgICAgbmV3IFByb2ZpbGVTZXJ2aWNlKCkudXBkYXRlQWNjb3VudHMoY3VycmVudFByb2ZpbGUsIF90b0NvbnN1bWFibGVBcnJheShhY2NvdW50c0lkcykpOyAvLyBzZXQgZmlyc3QgYWNjb3VudCB0byBiZSBzZWxlY3RlZAoKICAgICAgdmFyIGtub3duQWNjb3VudHMgPSBhY2NvdW50U2VydmljZS5nZXRLbm93bkFjY291bnRzKGN1cnJlbnRQcm9maWxlLmFjY291bnRzKTsKICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudCcsIGtub3duQWNjb3VudHNbMF0pOyAvLyB1cGRhdGUga25vd24gQWNjb3VudHMKCiAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIGtub3duQWNjb3VudHMpOwogICAgfSwKICAgIFNFVF9LTk9XTl9BQ0NPVU5UUzogZnVuY3Rpb24gU0VUX0tOT1dOX0FDQ09VTlRTKF9yZWYyNCwgYWNjb3VudHMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyNC5jb21taXQ7CiAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIG5ldyBBY2NvdW50U2VydmljZSgpLmdldEtub3duQWNjb3VudHMoYWNjb3VudHMpKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBXZWJzb2NrZXQgQVBJCiAgICAgKi8KICAgIC8vIFN1YnNjcmliZSB0byBsYXRlc3QgYWNjb3VudCB0cmFuc2FjdGlvbnMuCiAgICBTVUJTQ1JJQkU6IGZ1bmN0aW9uIFNVQlNDUklCRShfcmVmMjUsIGFkZHJlc3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyNS5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYyNS5kaXNwYXRjaCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjI1LnJvb3RHZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICB2YXIgcGxhaW5BZGRyZXNzLCByZXBvc2l0b3J5RmFjdG9yeSwgc3Vic2NyaXB0aW9ucywgcGF5bG9hZDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBwbGFpbkFkZHJlc3MgPSBhZGRyZXNzLnBsYWluKCk7IC8vIHVzZSBSRVNUU2VydmljZSB0byBvcGVuIHdlYnNvY2tldCBjaGFubmVsIHN1YnNjcmlwdGlvbnMKCiAgICAgICAgICAgICAgICByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIFJFU1RTZXJ2aWNlLnN1YnNjcmliZVRyYW5zYWN0aW9uQ2hhbm5lbHMoewogICAgICAgICAgICAgICAgICBjb21taXQ6IGNvbW1pdCwKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoCiAgICAgICAgICAgICAgICB9LCByZXBvc2l0b3J5RmFjdG9yeSwgcGxhaW5BZGRyZXNzKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHBsYWluQWRkcmVzcywKICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgfTsgLy8gdXBkYXRlIHN0YXRlIG9mIGxpc3RlbmVycyAmIHN1YnNjcmlwdGlvbnMKCiAgICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZVN1YnNjcmlwdGlvbnMnLCBwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICB9KSk7CiAgICB9LAogICAgLy8gVW5zdWJzY3JpYmUgYW4gYWRkcmVzcyBvcGVuIHdlYnNvY2tldCBjb25uZWN0aW9ucwogICAgVU5TVUJTQ1JJQkU6IGZ1bmN0aW9uIFVOU1VCU0NSSUJFKF9yZWYyNiwgcGxhaW5BZGRyZXNzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMjYuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYyNi5nZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucywgc3Vic2NyaXB0aW9uVHlwZXMsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgc3Vic2NyaXB0aW9uVHlwZSwgbGlzdGVuZXIsIF9zdWJzY3JpcHRpb25zLCBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiwgX2RpZEl0ZXJhdG9yRXJyb3IyLCBfaXRlcmF0b3JFcnJvcjIsIF9pdGVyYXRvcjIsIF9zdGVwMiwgc3Vic2NyaXB0aW9uLCBwYXlsb2FkOwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIHN1YnNjcmlwdGlvbnMKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBnZXR0ZXJzLmdldFN1YnNjcmlwdGlvbnM7IC8vIHN1YnNjcmlwdGlvbnMgdG8gY2xvc2UKCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25UeXBlcyA9IHN1YnNjcmlwdGlvbnMgJiYgc3Vic2NyaXB0aW9uc1twbGFpbkFkZHJlc3MucGxhaW4oKV0gfHwgW107CgogICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvblR5cGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAvLyBjbG9zZSBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBzdWJzY3JpcHRpb25UeXBlc1tTeW1ib2wuaXRlcmF0b3JdKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBzdWJzY3JpcHRpb25UeXBlLmxpc3RlbmVyLCBfc3Vic2NyaXB0aW9ucyA9IHN1YnNjcmlwdGlvblR5cGUuc3Vic2NyaXB0aW9uczsKICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMTU7CgogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyID0gX3N1YnNjcmlwdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDE5OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy50MCA9IF9jb250ZXh0MTNbImNhdGNoIl0oMTUpOwogICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IF9jb250ZXh0MTMudDA7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAyMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDI0OwoKICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMlsicmV0dXJuIl0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyWyJyZXR1cm4iXSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMjY7CgogICAgICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcjIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmZpbmlzaCgyNik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5maW5pc2goMjMpOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgbGlzdGVuZXIuY2xvc2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDM3OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy50MSA9IF9jb250ZXh0MTNbImNhdGNoIl0oNyk7CiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0MTMudDE7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA0MTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDQyOwoKICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3JbInJldHVybiJdICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yWyJyZXR1cm4iXSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gNDQ7CgogICAgICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0NzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5maW5pc2goNDQpOwoKICAgICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuZmluaXNoKDQxKTsKCiAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzdGF0ZSBvZiBsaXN0ZW5lcnMgJiBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBwbGFpbkFkZHJlc3MucGxhaW4oKSwKICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogbnVsbAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlU3Vic2NyaXB0aW9ucycsIHBheWxvYWQpOwoKICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMsIG51bGwsIFtbNywgMzcsIDQxLCA0OV0sIFsxNSwgMTksIDIzLCAzMV0sIFsyNCwsIDI2LCAzMF0sIFs0MiwsIDQ0LCA0OF1dKTsKICAgICAgfSkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/hero/lared-wallet/src/store/Account.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport Vue from 'vue';\nimport {\n    AccountInfo,\n    AccountNames,\n    Address,\n    IListener,\n    MultisigAccountInfo,\n    NetworkType,\n    PublicAccount,\n    RepositoryFactory,\n    SignedTransaction,\n} from 'symbol-sdk';\nimport { of, Subscription } from 'rxjs';\n// internal dependencies\nimport { $eventBus } from '../events';\nimport { RESTService } from '@/services/RESTService';\nimport { AwaitLock } from './AwaitLock';\nimport { AccountModel } from '@/core/database/entities/AccountModel';\nimport { MultisigService } from '@/services/MultisigService';\nimport * as _ from 'lodash';\nimport { ProfileModel } from '@/core/database/entities/ProfileModel';\nimport { AccountService } from '@/services/AccountService';\nimport { catchError, map } from 'rxjs/operators';\nimport { ProfileService } from '@/services/ProfileService';\nimport { NodeModel } from '@/core/database/entities/NodeModel';\n\n/// region globals\nconst Lock = AwaitLock.create();\n/// end-region globals\n\n/**\n * Type SubscriptionType for account Store\n * @type {SubscriptionType}\n */\ntype SubscriptionType = {\n    listener: IListener;\n    subscriptions: Subscription[];\n};\n\nexport type Signer = {\n    label: string;\n    address: Address;\n    multisig: boolean;\n    requiredCosignatures: number;\n};\n\n// Account state typing\ninterface AccountState {\n    initialized: boolean;\n    currentAccount: AccountModel;\n    currentAccountAddress: Address;\n    currentAccountMultisigInfo: MultisigAccountInfo;\n    multisigAccountGraph: MultisigAccountInfo[][];\n    isCosignatoryMode: boolean;\n    signers: Signer[];\n    currentSigner: Signer;\n    currentSignerAddress: Address;\n    currentSignerPublicKey: string;\n    currentSignerMultisigInfo: MultisigAccountInfo;\n    // Known accounts database identifiers\n    knownAccounts: AccountModel[];\n    knownAddresses: Address[];\n    accountsInfo: AccountInfo[];\n    multisigAccountsInfo: MultisigAccountInfo[];\n    subscriptions: Record<string, SubscriptionType[]>;\n    currentRecipient: PublicAccount;\n    currentAccountAliases: AccountNames[];\n    selectedAddressesToInteract: number[];\n    currentSignerAccountModel: AccountModel;\n}\n\n// account state initial definition\nconst accountState: AccountState = {\n    initialized: false,\n    currentAccount: null,\n    currentAccountAddress: null,\n    currentAccountMultisigInfo: null,\n    currentAccountAliases: [],\n    isCosignatoryMode: false,\n    signers: [],\n    currentSigner: null,\n    currentSignerAddress: null,\n    currentSignerPublicKey: null,\n    currentSignerMultisigInfo: null,\n    knownAccounts: [],\n    knownAddresses: [],\n    accountsInfo: [],\n    multisigAccountsInfo: [],\n    subscriptions: {},\n    currentRecipient: null,\n    multisigAccountGraph: null,\n    selectedAddressesToInteract: [],\n    currentSignerAccountModel: null,\n};\n\n/**\n * Account Store\n */\nexport default {\n    namespaced: true,\n    state: accountState,\n    getters: {\n        getInitialized: (state: AccountState) => state.initialized,\n        currentAccount: (state: AccountState): AccountModel => {\n            return state.currentAccount;\n        },\n        signers: (state: AccountState): Signer[] => state.signers,\n        currentSigner: (state: AccountState): Signer => state.currentSigner,\n        currentAccountAddress: (state: AccountState) => state.currentAccountAddress,\n        knownAddresses: (state: AccountState) => state.knownAddresses,\n        currentAccountMultisigInfo: (state: AccountState) => state.currentAccountMultisigInfo,\n        currentSignerMultisigInfo: (state: AccountState) => state.currentSignerMultisigInfo,\n        isCosignatoryMode: (state: AccountState) => state.isCosignatoryMode,\n        currentSignerAddress: (state: AccountState) => state.currentSignerAddress,\n        currentSignerPublicKey: (state: AccountState) => state.currentSignerPublicKey,\n        knownAccounts: (state: AccountState) => state.knownAccounts,\n        accountsInfo: (state: AccountState) => state.accountsInfo,\n        currentAccountAccountInfo: (state: AccountState): AccountInfo => {\n            return state.accountsInfo.find(({ publicKey }) => publicKey === state.currentAccount.publicKey);\n        },\n        currentSignerAccountInfo: (state: AccountState): AccountInfo => {\n            return state.accountsInfo.find(({ address }) => address.plain() === state.currentSigner.address.plain());\n        },\n        multisigAccountsInfo: (state: AccountState) => state.multisigAccountsInfo,\n        getSubscriptions: (state: AccountState) => state.subscriptions,\n        currentRecipient: (state: AccountState) => state.currentRecipient,\n        currentAccountAliases: (state: AccountState) => state.currentAccountAliases,\n        multisigAccountGraph: (state: AccountState) => state.multisigAccountGraph,\n        selectedAddressesToInteract: (state: AccountState) => state.selectedAddressesToInteract,\n        currentSignerAccountModel: (state: AccountState) =>\n            state.knownAccounts.find((a) => a.address === state.currentSignerAddress.plain()),\n    },\n    mutations: {\n        setInitialized: (state: AccountState, initialized: boolean) => {\n            state.initialized = initialized;\n        },\n        currentAccount: (state: AccountState, accountModel: AccountModel) => {\n            state.currentAccount = accountModel;\n        },\n        currentAccountAddress: (state: AccountState, accountAddress: Address) => {\n            state.currentAccountAddress = accountAddress;\n        },\n        currentAccountAliases: (state: AccountState, currentAccountAliases: AccountNames[]) => {\n            state.currentAccountAliases = currentAccountAliases;\n        },\n        currentSigner: (state: AccountState, currentSigner: Signer) => {\n            state.currentSigner = currentSigner;\n        },\n        signers: (state: AccountState, signers: Signer[]) => {\n            state.signers = signers;\n        },\n        currentSignerAddress: (state: AccountState, signerAddress) => {\n            state.currentSignerAddress = signerAddress;\n        },\n        currentSignerPublicKey: (state: AccountState, signerPubKey) => {\n            state.currentSignerPublicKey = signerPubKey;\n        },\n        knownAccounts: (state: AccountState, knownAccounts: AccountModel[]) => {\n            state.knownAccounts = knownAccounts;\n        },\n        knownAddresses: (state: AccountState, knownAddresses: Address[]) => {\n            state.knownAddresses = knownAddresses;\n        },\n        isCosignatoryMode: (state: AccountState, isCosignatoryMode: boolean) => {\n            state.isCosignatoryMode = isCosignatoryMode;\n        },\n        accountsInfo: (state: AccountState, accountsInfo) => {\n            state.accountsInfo = accountsInfo;\n        },\n        multisigAccountsInfo: (state: AccountState, multisigAccountsInfo) => {\n            state.multisigAccountsInfo = multisigAccountsInfo;\n        },\n        currentAccountMultisigInfo: (state: AccountState, currentAccountMultisigInfo) => {\n            state.currentAccountMultisigInfo = currentAccountMultisigInfo;\n        },\n        currentSignerMultisigInfo: (state: AccountState, currentSignerMultisigInfo) => {\n            state.currentSignerMultisigInfo = currentSignerMultisigInfo;\n        },\n        currentRecipient: (state: AccountState, currentRecipient) => {\n            state.currentRecipient = currentRecipient;\n        },\n\n        setSubscriptions: (state: AccountState, subscriptions: Record<string, SubscriptionType[]>) => {\n            state.subscriptions = subscriptions;\n        },\n\n        multisigAccountGraph: (state: AccountState, multisigAccountGraph) => {\n            state.multisigAccountGraph = multisigAccountGraph;\n        },\n        updateSubscriptions: (state: AccountState, payload: { address: string; subscriptions: SubscriptionType }) => {\n            const { address, subscriptions } = payload;\n\n            // if subscriptions are empty, unset the address subscriptions\n            if (!subscriptions) {\n                Vue.delete(state.subscriptions, address);\n                return;\n            }\n\n            // get current subscriptions from state\n            const oldSubscriptions = state.subscriptions[address] || [];\n            // update subscriptions\n            const newSubscriptions: SubscriptionType[] = [...oldSubscriptions, subscriptions];\n            // update state\n            Vue.set(state.subscriptions, address, newSubscriptions);\n        },\n        addToSelectedAddressesToInteract: (state: AccountState, pathNumber: number) => {\n            const selectedAccounts = [...state.selectedAddressesToInteract];\n            selectedAccounts.push(pathNumber);\n            state.selectedAddressesToInteract = selectedAccounts;\n        },\n        removeFromSelectedAddressesToInteract: (state: AccountState, pathNumber: number) => {\n            const selectedAccounts = [...state.selectedAddressesToInteract];\n            const indexToDelete = selectedAccounts.indexOf(pathNumber);\n            selectedAccounts.splice(indexToDelete, 1);\n            state.selectedAddressesToInteract = selectedAccounts;\n        },\n    },\n    actions: {\n        /**\n         * Possible `options` values include:\n         * @type {\n         *    skipTransactions: boolean,\n         * }\n         */\n        async initialize({ commit, getters }, { address }) {\n            const callback = async () => {\n                if (!address || !address.length) {\n                    return;\n                }\n                commit('setInitialized', true);\n            };\n            await Lock.initialize(callback, { getters });\n        },\n        async uninitialize({ commit, dispatch, getters }, { address }) {\n            const callback = async () => {\n                // close websocket connections\n                await dispatch('UNSUBSCRIBE', address);\n                await dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n\n        /**\n         * Possible `options` values include:\n         * @type {\n         *    isCosignatoryMode: boolean,\n         * }\n         */\n        async SET_CURRENT_ACCOUNT({ commit, dispatch, getters }, currentAccount: AccountModel) {\n            const previous: AccountModel = getters.currentAccount;\n            if (previous && previous.address === currentAccount.address) {\n                return;\n            }\n\n            const currentAccountAddress: Address = Address.createFromRawAddress(currentAccount.address);\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/SET_CURRENT_ACCOUNT dispatched with ' + currentAccountAddress.plain(), {\n                root: true,\n            });\n\n            // set current account\n            commit('currentAccount', currentAccount);\n\n            // reset current signer\n            dispatch('SET_CURRENT_SIGNER', {\n                address: currentAccountAddress,\n            });\n            //reset current account alias\n            dispatch('LOAD_CURRENT_ACCOUNT_ALIASES', currentAccountAddress);\n\n            $eventBus.$emit('onAccountChange', currentAccountAddress.plain());\n        },\n\n        async RESET_CURRENT_ACCOUNT({ commit, dispatch }) {\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/RESET_CURRENT_ACCOUNT dispatched', { root: true });\n            commit('currentAccount', null);\n            commit('currentAccountAddress', null);\n            commit('currentSignerAddress', null);\n            commit('currentSignerPublicKey', null);\n            commit('currentAccountAliases', []);\n        },\n\n        async SET_CURRENT_SIGNER({ commit, dispatch, getters, rootGetters }, { address }: { address: Address }) {\n            if (!address) {\n                throw new Error('Address must be provided when calling account/SET_CURRENT_SIGNER!');\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            const currentAccount: AccountModel = getters.currentAccount;\n            const previousSignerAddress: Address = getters.currentSignerAddress;\n\n            const currentSignerAddress: Address = address;\n\n            if (previousSignerAddress && previousSignerAddress.equals(currentSignerAddress)) {\n                return;\n            }\n\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/SET_CURRENT_SIGNER dispatched with ' + currentSignerAddress.plain(), {\n                root: true,\n            });\n\n            dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n\n            const currentAccountAddress = Address.createFromRawAddress(currentAccount.address);\n            const knownAccounts = new AccountService().getKnownAccounts(currentProfile.accounts);\n\n            commit('currentSignerAddress', currentSignerAddress);\n            commit('currentAccountAddress', currentAccountAddress);\n            commit('isCosignatoryMode', !currentSignerAddress.equals(currentAccountAddress));\n            commit('knownAccounts', knownAccounts);\n\n            // Upgrade\n            dispatch('namespace/SIGNER_CHANGED', {}, { root: true });\n            dispatch('mosaic/SIGNER_CHANGED', {}, { root: true });\n            dispatch('transaction/SIGNER_CHANGED', {}, { root: true });\n            dispatch('metadata/SIGNER_CHANGED', {}, { root: true });\n\n            // open / close websocket connections\n            if (previousSignerAddress) {\n                await dispatch('UNSUBSCRIBE', previousSignerAddress);\n            }\n            await dispatch('SUBSCRIBE', currentSignerAddress);\n\n            await dispatch('LOAD_ACCOUNT_INFO');\n\n            dispatch('namespace/LOAD_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/LOAD_MOSAICS', {}, { root: true });\n        },\n\n        async NETWORK_CHANGED({ dispatch }) {\n            dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n            dispatch('namespace/RESET_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/RESET_MOSAICS', {}, { root: true });\n            dispatch('transaction/LOAD_TRANSACTIONS', undefined, { root: true });\n            await dispatch('mosaic/LOAD_NETWORK_CURRENCIES', undefined, {\n                root: true,\n            });\n            await dispatch('LOAD_ACCOUNT_INFO');\n            dispatch('namespace/LOAD_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/LOAD_MOSAICS', {}, { root: true });\n        },\n\n        async GET_RECIPIENT({ commit, rootGetters }, recipientAddress?: Address) {\n            if (recipientAddress) {\n                //First check known accounts\n                const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n                const knownAccounts = new AccountService().getKnownAccounts(currentProfile.accounts);\n                const knownRecipient = knownAccounts.find((ka) => ka.address === recipientAddress.plain());\n                if (knownRecipient) {\n                    commit('currentRecipient', AccountModel.getObjects(knownRecipient).publicAccount);\n                } else {\n                    const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n                    const getAccountsInfoPromise = repositoryFactory\n                        .createAccountRepository()\n                        .getAccountInfo(recipientAddress)\n                        .toPromise()\n                        .catch(() => commit('currentRecipient', null));\n                    const accountsInfo = await getAccountsInfoPromise;\n\n                    commit('currentRecipient', (accountsInfo as AccountInfo).publicAccount);\n                }\n            } else {\n                commit('currentRecipient', null);\n            }\n        },\n\n        async LOAD_CURRENT_ACCOUNT_ALIASES({ commit, rootGetters }, currentAccountAddress: Address) {\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const aliasPromise = repositoryFactory\n                .createNamespaceRepository()\n                .getAccountsNames([currentAccountAddress])\n                .toPromise()\n                .catch(() => commit('currentAccountAliases', []));\n            const aliases = await aliasPromise;\n            commit('currentAccountAliases', aliases);\n        },\n\n        async LOAD_ACCOUNT_INFO({ commit, getters, rootGetters }) {\n            const networkType: NetworkType = rootGetters['network/networkType'];\n            const currentAccount: AccountModel = getters.currentAccount;\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const currentSignerAddress: Address = getters.currentSignerAddress;\n            const currentAccountAddress: Address = getters.currentAccountAddress;\n            const knownAccounts: AccountModel[] = getters.knownAccounts;\n\n            // avoid calls if no account set\n            if (!currentAccount || !currentAccountAddress) {\n                return;\n            }\n\n            // remote calls:\n\n            if (!currentAccountAddress) {\n                return;\n            }\n\n            const getMultisigAccountGraphInfoPromise = repositoryFactory\n                .createMultisigRepository()\n                .getMultisigAccountGraphInfo(currentAccountAddress)\n                .pipe(\n                    map((g) => {\n                        // sorted array to be represented in multisig tree\n                        commit('multisigAccountGraph', MultisigService.getMultisigGraphArraySorted(g.multisigEntries));\n                        return MultisigService.getMultisigInfoFromMultisigGraphInfo(g);\n                    }),\n                    catchError(() => {\n                        return of([]);\n                    }),\n                )\n                .toPromise();\n\n            // REMOTE CALL\n            const aliasPromise = repositoryFactory\n                .createNamespaceRepository()\n                .getAccountsNames([currentAccountAddress])\n                .toPromise()\n                .catch(() => commit('currentAccountAliases', []));\n            const aliases = await aliasPromise;\n            commit('currentAccountAliases', aliases);\n\n            const multisigAccountsInfo: MultisigAccountInfo[] = await getMultisigAccountGraphInfoPromise;\n            const currentAccountMultisigInfo = multisigAccountsInfo.find((m) => m.accountAddress.equals(currentAccountAddress));\n            const currentSignerMultisigInfo = multisigAccountsInfo.find((m) => m.accountAddress.equals(currentSignerAddress));\n            // update multisig flag in currentAccount\n            if (currentAccountMultisigInfo && currentAccountMultisigInfo.isMultisig() && !currentAccount.isMultisig) {\n                const accountService = new AccountService();\n                accountService.updateIsMultisig(currentAccount, true);\n            }\n\n            const signers = new MultisigService().getSigners(\n                networkType,\n                knownAccounts,\n                currentAccount,\n                currentAccountMultisigInfo,\n                multisigAccountsInfo,\n            );\n\n            const knownAddresses = _.uniqBy(\n                [...signers.map((s) => s.address), ...knownAccounts.map((w) => Address.createFromRawAddress(w.address))].filter((a) => a),\n                'address',\n            );\n\n            commit('knownAddresses', knownAddresses);\n            commit(\n                'currentSigner',\n                signers.find((s) => s.address.equals(currentSignerAddress)),\n            );\n            commit('signers', signers);\n            commit('multisigAccountsInfo', multisigAccountsInfo);\n            commit('currentAccountMultisigInfo', currentAccountMultisigInfo);\n            commit('currentSignerMultisigInfo', currentSignerMultisigInfo);\n\n            // REMOTE CALL\n            const getAccountsInfoPromise = repositoryFactory.createAccountRepository().getAccountsInfo(knownAddresses).toPromise();\n            const accountsInfo = await getAccountsInfoPromise;\n\n            commit('accountsInfo', accountsInfo);\n\n            // read signer info to get public key\n            const signerModel = knownAccounts.find((w) => w.address === currentSignerAddress.plain());\n            if (signerModel !== undefined) {\n                commit('currentSignerPublicKey', signerModel.publicKey);\n            }\n        },\n\n        UPDATE_CURRENT_ACCOUNT_NAME({ commit, getters, rootGetters }, name: string) {\n            const currentAccount: AccountModel = getters.currentAccount;\n            if (!currentAccount) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.updateName(currentAccount, name);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n            // update current signer name\n            const signers: Signer[] = getters.signers;\n            signers.map((s) => {\n                if (s.address.plain() === currentAccount.address) {\n                    s.label = name;\n                    commit('currentSigner', s);\n                }\n            });\n        },\n\n        UPDATE_CURRENT_ACCOUNT_REMOTE_ACCOUNT({ commit, getters, rootGetters, dispatch }, encRemoteAccountPrivateKey: string) {\n            const currentAccount: AccountModel = getters.currentAccount;\n            if (!currentAccount) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.updateRemoteAccount(currentAccount, encRemoteAccountPrivateKey);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n            dispatch('LOAD_ACCOUNT_INFO');\n        },\n        UPDATE_ACCOUNT_SIGNED_PERSISTENT_DEL_REQ_TXS(\n            { commit, rootGetters },\n            { accountId, signedPersistentDelReqTxs }: { accountId: string; signedPersistentDelReqTxs: SignedTransaction[] },\n        ) {\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            const accountTobeUpdated = accountService.getAccount(accountId);\n            accountService.updateSignedPersistentDelReqTxs(accountTobeUpdated, signedPersistentDelReqTxs);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n        },\n        UPDATE_ACCOUNT_IS_PERSISTENT_DEL_REQ_SENT(\n            { commit, rootGetters },\n            { accountId, isPersistentDelReqSent }: { accountId: string; isPersistentDelReqSent: boolean },\n        ) {\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            const accountTobeUpdated = accountService.getAccount(accountId);\n            accountService.updateIsPersistentDelReqSent(accountTobeUpdated, isPersistentDelReqSent);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n        },\n        UPDATE_ACCOUNT_SELECTED_HARVESTING_NODE(\n            { commit, rootGetters },\n            { accountId, selectedHarvestingNode }: { accountId: string; selectedHarvestingNode: NodeModel },\n        ) {\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            const accountTobeUpdated = accountService.getAccount(accountId);\n            accountService.updateSelectedHarvestingNode(accountTobeUpdated, selectedHarvestingNode);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n        },\n        DELETE_CURRENT_ACCOUNT({ commit, rootGetters }, account: AccountModel) {\n            if (!account) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.deleteAccount(account);\n            const accountsIds = accountService\n                .getAccounts()\n                .filter((acc) => acc.profileName === currentProfile.profileName)\n                .map((acc) => acc.id);\n            // update accounts in profile\n            new ProfileService().updateAccounts(currentProfile, [...accountsIds]);\n            // set first account to be selected\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('currentAccount', knownAccounts[0]);\n            // update known Accounts\n            commit('knownAccounts', knownAccounts);\n        },\n\n        SET_KNOWN_ACCOUNTS({ commit }, accounts: string[]) {\n            commit('knownAccounts', new AccountService().getKnownAccounts(accounts));\n        },\n\n        /**\n         * Websocket API\n         */\n        // Subscribe to latest account transactions.\n        async SUBSCRIBE({ commit, dispatch, rootGetters }, address: Address) {\n            if (!address) {\n                return;\n            }\n\n            const plainAddress = address.plain();\n\n            // use RESTService to open websocket channel subscriptions\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const subscriptions: SubscriptionType = await RESTService.subscribeTransactionChannels(\n                { commit, dispatch },\n                repositoryFactory,\n                plainAddress,\n            );\n            const payload: { address: string; subscriptions: SubscriptionType } = { address: plainAddress, subscriptions };\n            // update state of listeners & subscriptions\n            commit('updateSubscriptions', payload);\n        },\n\n        // Unsubscribe an address open websocket connections\n        async UNSUBSCRIBE({ commit, getters }, plainAddress: Address) {\n            // get all subscriptions\n            const subscriptions: Record<string, SubscriptionType[]> = getters.getSubscriptions;\n            // subscriptions to close\n            const subscriptionTypes = (subscriptions && subscriptions[plainAddress.plain()]) || [];\n\n            if (!subscriptionTypes.length) {\n                return;\n            }\n\n            // close subscriptions\n            for (const subscriptionType of subscriptionTypes) {\n                const { listener, subscriptions } = subscriptionType;\n                for (const subscription of subscriptions) {\n                    subscription.unsubscribe();\n                }\n                listener.close();\n            }\n\n            // update state of listeners & subscriptions\n            const payload: { address: string; subscriptions: SubscriptionType } = {\n                address: plainAddress.plain(),\n                subscriptions: null,\n            };\n            commit('updateSubscriptions', payload);\n        },\n    },\n};\n"],"sourceRoot":""}]}