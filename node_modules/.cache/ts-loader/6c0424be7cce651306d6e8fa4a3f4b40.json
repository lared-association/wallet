{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Account.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Account.ts","mtime":1611927227397},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL21udC9jL1VzZXJzL2p1c3RpL0Rlc2t0b3AvU1VQRVJIT1cvU3ltYm9sV2FsbGV0L2xhcmVkLXdhbGxldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgppbXBvcnQgeyBfX2F3YWl0ZXIgfSBmcm9tICJ0c2xpYiI7Ci8qCiAqIENvcHlyaWdodCAyMDIwIE5FTSAoaHR0cHM6Ly9uZW0uaW8pCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgQWRkcmVzcyB9IGZyb20gJ3N5bWJvbC1zZGsnOwppbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnOyAvLyBpbnRlcm5hbCBkZXBlbmRlbmNpZXMKCmltcG9ydCB7ICRldmVudEJ1cyB9IGZyb20gJy4uL2V2ZW50cyc7CmltcG9ydCB7IFJFU1RTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9SRVNUU2VydmljZSc7CmltcG9ydCB7IEF3YWl0TG9jayB9IGZyb20gJy4vQXdhaXRMb2NrJzsKaW1wb3J0IHsgQWNjb3VudE1vZGVsIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL2VudGl0aWVzL0FjY291bnRNb2RlbCc7CmltcG9ydCB7IE11bHRpc2lnU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvTXVsdGlzaWdTZXJ2aWNlJzsKaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBBY2NvdW50U2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvQWNjb3VudFNlcnZpY2UnOwppbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CmltcG9ydCB7IFByb2ZpbGVTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9Qcm9maWxlU2VydmljZSc7IC8vLyByZWdpb24gZ2xvYmFscwoKdmFyIExvY2sgPSBBd2FpdExvY2suY3JlYXRlKCk7IC8vIGFjY291bnQgc3RhdGUgaW5pdGlhbCBkZWZpbml0aW9uCgp2YXIgYWNjb3VudFN0YXRlID0gewogIGluaXRpYWxpemVkOiBmYWxzZSwKICBjdXJyZW50QWNjb3VudDogbnVsbCwKICBjdXJyZW50QWNjb3VudEFkZHJlc3M6IG51bGwsCiAgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm86IG51bGwsCiAgY3VycmVudEFjY291bnRBbGlhc2VzOiBbXSwKICBpc0Nvc2lnbmF0b3J5TW9kZTogZmFsc2UsCiAgc2lnbmVyczogW10sCiAgY3VycmVudFNpZ25lcjogbnVsbCwKICBjdXJyZW50U2lnbmVyQWRkcmVzczogbnVsbCwKICBjdXJyZW50U2lnbmVyUHVibGljS2V5OiBudWxsLAogIGN1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm86IG51bGwsCiAga25vd25BY2NvdW50czogW10sCiAga25vd25BZGRyZXNzZXM6IFtdLAogIGFjY291bnRzSW5mbzogW10sCiAgbXVsdGlzaWdBY2NvdW50c0luZm86IFtdLAogIHN1YnNjcmlwdGlvbnM6IHt9LAogIGN1cnJlbnRSZWNpcGllbnQ6IG51bGwsCiAgbXVsdGlzaWdBY2NvdW50R3JhcGg6IG51bGwsCiAgc2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0OiBbXSwKICBjdXJyZW50U2lnbmVyQWNjb3VudE1vZGVsOiBudWxsCn07Ci8qKgogKiBBY2NvdW50IFN0b3JlCiAqLwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IGFjY291bnRTdGF0ZSwKICBnZXR0ZXJzOiB7CiAgICBnZXRJbml0aWFsaXplZDogZnVuY3Rpb24gZ2V0SW5pdGlhbGl6ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmluaXRpYWxpemVkOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50OiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudEFjY291bnQ7CiAgICB9LAogICAgc2lnbmVyczogZnVuY3Rpb24gc2lnbmVycyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc2lnbmVyczsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50U2lnbmVyOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50QWRkcmVzczogZnVuY3Rpb24gY3VycmVudEFjY291bnRBZGRyZXNzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50QWNjb3VudEFkZHJlc3M7CiAgICB9LAogICAga25vd25BZGRyZXNzZXM6IGZ1bmN0aW9uIGtub3duQWRkcmVzc2VzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5rbm93bkFkZHJlc3NlczsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbzogZnVuY3Rpb24gY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm86IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm87CiAgICB9LAogICAgaXNDb3NpZ25hdG9yeU1vZGU6IGZ1bmN0aW9uIGlzQ29zaWduYXRvcnlNb2RlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc0Nvc2lnbmF0b3J5TW9kZTsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyQWRkcmVzczogZnVuY3Rpb24gY3VycmVudFNpZ25lckFkZHJlc3Moc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRTaWduZXJBZGRyZXNzOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXJQdWJsaWNLZXk6IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXJQdWJsaWNLZXkoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRTaWduZXJQdWJsaWNLZXk7CiAgICB9LAogICAga25vd25BY2NvdW50czogZnVuY3Rpb24ga25vd25BY2NvdW50cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUua25vd25BY2NvdW50czsKICAgIH0sCiAgICBhY2NvdW50c0luZm86IGZ1bmN0aW9uIGFjY291bnRzSW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYWNjb3VudHNJbmZvOwogICAgfSwKICAgIGN1cnJlbnRBY2NvdW50QWNjb3VudEluZm86IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50QWNjb3VudEluZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmFjY291bnRzSW5mby5maW5kKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHB1YmxpY0tleSA9IF9yZWYucHVibGljS2V5OwogICAgICAgIHJldHVybiBwdWJsaWNLZXkgPT09IHN0YXRlLmN1cnJlbnRBY2NvdW50LnB1YmxpY0tleTsKICAgICAgfSk7CiAgICB9LAogICAgY3VycmVudFNpZ25lckFjY291bnRJbmZvOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyQWNjb3VudEluZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmFjY291bnRzSW5mby5maW5kKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBhZGRyZXNzID0gX3JlZjIuYWRkcmVzczsKICAgICAgICByZXR1cm4gYWRkcmVzcy5wbGFpbigpID09PSBzdGF0ZS5jdXJyZW50U2lnbmVyLmFkZHJlc3MucGxhaW4oKTsKICAgICAgfSk7CiAgICB9LAogICAgbXVsdGlzaWdBY2NvdW50c0luZm86IGZ1bmN0aW9uIG11bHRpc2lnQWNjb3VudHNJbmZvKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5tdWx0aXNpZ0FjY291bnRzSW5mbzsKICAgIH0sCiAgICBnZXRTdWJzY3JpcHRpb25zOiBmdW5jdGlvbiBnZXRTdWJzY3JpcHRpb25zKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdWJzY3JpcHRpb25zOwogICAgfSwKICAgIGN1cnJlbnRSZWNpcGllbnQ6IGZ1bmN0aW9uIGN1cnJlbnRSZWNpcGllbnQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRSZWNpcGllbnQ7CiAgICB9LAogICAgY3VycmVudEFjY291bnRBbGlhc2VzOiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudEFsaWFzZXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRBY2NvdW50QWxpYXNlczsKICAgIH0sCiAgICBtdWx0aXNpZ0FjY291bnRHcmFwaDogZnVuY3Rpb24gbXVsdGlzaWdBY2NvdW50R3JhcGgoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm11bHRpc2lnQWNjb3VudEdyYXBoOwogICAgfSwKICAgIHNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdDogZnVuY3Rpb24gc2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3Q7CiAgICB9LAogICAgY3VycmVudFNpZ25lckFjY291bnRNb2RlbDogZnVuY3Rpb24gY3VycmVudFNpZ25lckFjY291bnRNb2RlbChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUua25vd25BY2NvdW50cy5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEuYWRkcmVzcyA9PT0gc3RhdGUuY3VycmVudFNpZ25lckFkZHJlc3MucGxhaW4oKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldEluaXRpYWxpemVkOiBmdW5jdGlvbiBzZXRJbml0aWFsaXplZChzdGF0ZSwgaW5pdGlhbGl6ZWQpIHsKICAgICAgc3RhdGUuaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplZDsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudDogZnVuY3Rpb24gY3VycmVudEFjY291bnQoc3RhdGUsIGFjY291bnRNb2RlbCkgewogICAgICBzdGF0ZS5jdXJyZW50QWNjb3VudCA9IGFjY291bnRNb2RlbDsKICAgIH0sCiAgICBjdXJyZW50QWNjb3VudEFkZHJlc3M6IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50QWRkcmVzcyhzdGF0ZSwgYWNjb3VudEFkZHJlc3MpIHsKICAgICAgc3RhdGUuY3VycmVudEFjY291bnRBZGRyZXNzID0gYWNjb3VudEFkZHJlc3M7CiAgICB9LAogICAgY3VycmVudEFjY291bnRBbGlhc2VzOiBmdW5jdGlvbiBjdXJyZW50QWNjb3VudEFsaWFzZXMoc3RhdGUsIF9jdXJyZW50QWNjb3VudEFsaWFzZXMpIHsKICAgICAgc3RhdGUuY3VycmVudEFjY291bnRBbGlhc2VzID0gX2N1cnJlbnRBY2NvdW50QWxpYXNlczsKICAgIH0sCiAgICBjdXJyZW50U2lnbmVyOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyKHN0YXRlLCBfY3VycmVudFNpZ25lcikgewogICAgICBzdGF0ZS5jdXJyZW50U2lnbmVyID0gX2N1cnJlbnRTaWduZXI7CiAgICB9LAogICAgc2lnbmVyczogZnVuY3Rpb24gc2lnbmVycyhzdGF0ZSwgX3NpZ25lcnMpIHsKICAgICAgc3RhdGUuc2lnbmVycyA9IF9zaWduZXJzOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXJBZGRyZXNzOiBmdW5jdGlvbiBjdXJyZW50U2lnbmVyQWRkcmVzcyhzdGF0ZSwgc2lnbmVyQWRkcmVzcykgewogICAgICBzdGF0ZS5jdXJyZW50U2lnbmVyQWRkcmVzcyA9IHNpZ25lckFkZHJlc3M7CiAgICB9LAogICAgY3VycmVudFNpZ25lclB1YmxpY0tleTogZnVuY3Rpb24gY3VycmVudFNpZ25lclB1YmxpY0tleShzdGF0ZSwgc2lnbmVyUHViS2V5KSB7CiAgICAgIHN0YXRlLmN1cnJlbnRTaWduZXJQdWJsaWNLZXkgPSBzaWduZXJQdWJLZXk7CiAgICB9LAogICAga25vd25BY2NvdW50czogZnVuY3Rpb24ga25vd25BY2NvdW50cyhzdGF0ZSwgX2tub3duQWNjb3VudHMpIHsKICAgICAgc3RhdGUua25vd25BY2NvdW50cyA9IF9rbm93bkFjY291bnRzOwogICAgfSwKICAgIGtub3duQWRkcmVzc2VzOiBmdW5jdGlvbiBrbm93bkFkZHJlc3NlcyhzdGF0ZSwgX2tub3duQWRkcmVzc2VzKSB7CiAgICAgIHN0YXRlLmtub3duQWRkcmVzc2VzID0gX2tub3duQWRkcmVzc2VzOwogICAgfSwKICAgIGlzQ29zaWduYXRvcnlNb2RlOiBmdW5jdGlvbiBpc0Nvc2lnbmF0b3J5TW9kZShzdGF0ZSwgX2lzQ29zaWduYXRvcnlNb2RlKSB7CiAgICAgIHN0YXRlLmlzQ29zaWduYXRvcnlNb2RlID0gX2lzQ29zaWduYXRvcnlNb2RlOwogICAgfSwKICAgIGFjY291bnRzSW5mbzogZnVuY3Rpb24gYWNjb3VudHNJbmZvKHN0YXRlLCBfYWNjb3VudHNJbmZvKSB7CiAgICAgIHN0YXRlLmFjY291bnRzSW5mbyA9IF9hY2NvdW50c0luZm87CiAgICB9LAogICAgbXVsdGlzaWdBY2NvdW50c0luZm86IGZ1bmN0aW9uIG11bHRpc2lnQWNjb3VudHNJbmZvKHN0YXRlLCBfbXVsdGlzaWdBY2NvdW50c0luZm8pIHsKICAgICAgc3RhdGUubXVsdGlzaWdBY2NvdW50c0luZm8gPSBfbXVsdGlzaWdBY2NvdW50c0luZm87CiAgICB9LAogICAgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm86IGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvKHN0YXRlLCBfY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8pIHsKICAgICAgc3RhdGUuY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8gPSBfY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm87CiAgICB9LAogICAgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbzogZnVuY3Rpb24gY3VycmVudFNpZ25lck11bHRpc2lnSW5mbyhzdGF0ZSwgX2N1cnJlbnRTaWduZXJNdWx0aXNpZ0luZm8pIHsKICAgICAgc3RhdGUuY3VycmVudFNpZ25lck11bHRpc2lnSW5mbyA9IF9jdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvOwogICAgfSwKICAgIGN1cnJlbnRSZWNpcGllbnQ6IGZ1bmN0aW9uIGN1cnJlbnRSZWNpcGllbnQoc3RhdGUsIF9jdXJyZW50UmVjaXBpZW50KSB7CiAgICAgIHN0YXRlLmN1cnJlbnRSZWNpcGllbnQgPSBfY3VycmVudFJlY2lwaWVudDsKICAgIH0sCiAgICBzZXRTdWJzY3JpcHRpb25zOiBmdW5jdGlvbiBzZXRTdWJzY3JpcHRpb25zKHN0YXRlLCBzdWJzY3JpcHRpb25zKSB7CiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zOwogICAgfSwKICAgIG11bHRpc2lnQWNjb3VudEdyYXBoOiBmdW5jdGlvbiBtdWx0aXNpZ0FjY291bnRHcmFwaChzdGF0ZSwgX211bHRpc2lnQWNjb3VudEdyYXBoKSB7CiAgICAgIHN0YXRlLm11bHRpc2lnQWNjb3VudEdyYXBoID0gX211bHRpc2lnQWNjb3VudEdyYXBoOwogICAgfSwKICAgIHVwZGF0ZVN1YnNjcmlwdGlvbnM6IGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbnMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIGFkZHJlc3MgPSBwYXlsb2FkLmFkZHJlc3MsCiAgICAgICAgICBzdWJzY3JpcHRpb25zID0gcGF5bG9hZC5zdWJzY3JpcHRpb25zOyAvLyBpZiBzdWJzY3JpcHRpb25zIGFyZSBlbXB0eSwgdW5zZXQgdGhlIGFkZHJlc3Mgc3Vic2NyaXB0aW9ucwoKICAgICAgaWYgKCFzdWJzY3JpcHRpb25zKSB7CiAgICAgICAgVnVlLmRlbGV0ZShzdGF0ZS5zdWJzY3JpcHRpb25zLCBhZGRyZXNzKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gZ2V0IGN1cnJlbnQgc3Vic2NyaXB0aW9ucyBmcm9tIHN0YXRlCgoKICAgICAgdmFyIG9sZFN1YnNjcmlwdGlvbnMgPSBzdGF0ZS5zdWJzY3JpcHRpb25zW2FkZHJlc3NdIHx8IFtdOyAvLyB1cGRhdGUgc3Vic2NyaXB0aW9ucwoKICAgICAgdmFyIG5ld1N1YnNjcmlwdGlvbnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG9sZFN1YnNjcmlwdGlvbnMpLCBbc3Vic2NyaXB0aW9uc10pOyAvLyB1cGRhdGUgc3RhdGUKCiAgICAgIFZ1ZS5zZXQoc3RhdGUuc3Vic2NyaXB0aW9ucywgYWRkcmVzcywgbmV3U3Vic2NyaXB0aW9ucyk7CiAgICB9LAogICAgYWRkVG9TZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3Q6IGZ1bmN0aW9uIGFkZFRvU2VsZWN0ZWRBZGRyZXNzZXNUb0ludGVyYWN0KHN0YXRlLCBwYXRoTnVtYmVyKSB7CiAgICAgIHZhciBzZWxlY3RlZEFjY291bnRzID0gX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLnNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdCk7CgogICAgICBzZWxlY3RlZEFjY291bnRzLnB1c2gocGF0aE51bWJlcik7CiAgICAgIHN0YXRlLnNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdCA9IHNlbGVjdGVkQWNjb3VudHM7CiAgICB9LAogICAgcmVtb3ZlRnJvbVNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdDogZnVuY3Rpb24gcmVtb3ZlRnJvbVNlbGVjdGVkQWRkcmVzc2VzVG9JbnRlcmFjdChzdGF0ZSwgcGF0aE51bWJlcikgewogICAgICB2YXIgc2VsZWN0ZWRBY2NvdW50cyA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS5zZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3QpOwoKICAgICAgdmFyIGluZGV4VG9EZWxldGUgPSBzZWxlY3RlZEFjY291bnRzLmluZGV4T2YocGF0aE51bWJlcik7CiAgICAgIHNlbGVjdGVkQWNjb3VudHMuc3BsaWNlKGluZGV4VG9EZWxldGUsIDEpOwogICAgICBzdGF0ZS5zZWxlY3RlZEFkZHJlc3Nlc1RvSW50ZXJhY3QgPSBzZWxlY3RlZEFjY291bnRzOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLyoqCiAgICAgKiBQb3NzaWJsZSBgb3B0aW9uc2AgdmFsdWVzIGluY2x1ZGU6CiAgICAgKiBAdHlwZSB7CiAgICAgKiAgICBza2lwVHJhbnNhY3Rpb25zOiBib29sZWFuLAogICAgICogfQogICAgICovCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKF9yZWYzLCBfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYzLmdldHRlcnM7CiAgICAgIHZhciBhZGRyZXNzID0gX3JlZjQuYWRkcmVzczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghYWRkcmVzcyB8fCAhYWRkcmVzcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRJbml0aWFsaXplZCcsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTG9jay5pbml0aWFsaXplKGNhbGxiYWNrLCB7CiAgICAgICAgICAgICAgICAgIGdldHRlcnM6IGdldHRlcnMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CiAgICB9LAogICAgdW5pbml0aWFsaXplOiBmdW5jdGlvbiB1bmluaXRpYWxpemUoX3JlZjUsIF9yZWY2KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWY1LmdldHRlcnM7CiAgICAgIHZhciBhZGRyZXNzID0gX3JlZjYuYWRkcmVzczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgdmFyIGNhbGxiYWNrOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczIsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdVTlNVQlNDUklCRScsIGFkZHJlc3MpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL1JFU0VUX1RSQU5TQUNUSU9OUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBMb2NrLnVuaW5pdGlhbGl6ZShjYWxsYmFjaywgewogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBnZXR0ZXJzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwogICAgfSwKCiAgICAvKioKICAgICAqIFBvc3NpYmxlIGBvcHRpb25zYCB2YWx1ZXMgaW5jbHVkZToKICAgICAqIEB0eXBlIHsKICAgICAqICAgIGlzQ29zaWduYXRvcnlNb2RlOiBib29sZWFuLAogICAgICogfQogICAgICovCiAgICBTRVRfQ1VSUkVOVF9BQ0NPVU5UOiBmdW5jdGlvbiBTRVRfQ1VSUkVOVF9BQ0NPVU5UKF9yZWY3LCBjdXJyZW50QWNjb3VudCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNy5kaXNwYXRjaCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmNy5nZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBwcmV2aW91cywgY3VycmVudEFjY291bnRBZGRyZXNzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcHJldmlvdXMgPSBnZXR0ZXJzLmN1cnJlbnRBY2NvdW50OwoKICAgICAgICAgICAgICAgIGlmICghKHByZXZpb3VzICYmIHByZXZpb3VzLmFkZHJlc3MgPT09IGN1cnJlbnRBY2NvdW50LmFkZHJlc3MpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudEFkZHJlc3MgPSBBZGRyZXNzLmNyZWF0ZUZyb21SYXdBZGRyZXNzKGN1cnJlbnRBY2NvdW50LmFkZHJlc3MpOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2RpYWdub3N0aWMvQUREX0RFQlVHJywgJ1N0b3JlIGFjdGlvbiBhY2NvdW50L1NFVF9DVVJSRU5UX0FDQ09VTlQgZGlzcGF0Y2hlZCB3aXRoICcgKyBjdXJyZW50QWNjb3VudEFkZHJlc3MucGxhaW4oKSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsgLy8gc2V0IGN1cnJlbnQgYWNjb3VudAoKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudEFjY291bnQnLCBjdXJyZW50QWNjb3VudCk7IC8vIHJlc2V0IGN1cnJlbnQgc2lnbmVyCgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdTRVRfQ1VSUkVOVF9TSUdORVInLCB7CiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGN1cnJlbnRBY2NvdW50QWRkcmVzcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ0xPQURfQ1VSUkVOVF9BQ0NPVU5UX0FMSUFTRVMnLCBjdXJyZW50QWNjb3VudEFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgJGV2ZW50QnVzLiRlbWl0KCdvbkFjY291bnRDaGFuZ2UnLCBjdXJyZW50QWNjb3VudEFkZHJlc3MucGxhaW4oKSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CiAgICB9LAogICAgUkVTRVRfQ1VSUkVOVF9BQ0NPVU5UOiBmdW5jdGlvbiBSRVNFVF9DVVJSRU5UX0FDQ09VTlQoX3JlZjgpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2g7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnZGlhZ25vc3RpYy9BRERfREVCVUcnLCAnU3RvcmUgYWN0aW9uIGFjY291bnQvUkVTRVRfQ1VSUkVOVF9BQ0NPVU5UIGRpc3BhdGNoZWQnLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudCcsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudEFkZHJlc3MnLCBudWxsKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lckFkZHJlc3MnLCBudWxsKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lclB1YmxpY0tleScsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudEFsaWFzZXMnLCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKICAgIH0sCiAgICBTRVRfQ1VSUkVOVF9TSUdORVI6IGZ1bmN0aW9uIFNFVF9DVVJSRU5UX1NJR05FUihfcmVmOSwgX3JlZjEwKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOS5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY5LmRpc3BhdGNoLAogICAgICAgICAgZ2V0dGVycyA9IF9yZWY5LmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY5LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgYWRkcmVzcyA9IF9yZWYxMC5hZGRyZXNzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBjdXJyZW50UHJvZmlsZSwgY3VycmVudEFjY291bnQsIHByZXZpb3VzU2lnbmVyQWRkcmVzcywgY3VycmVudFNpZ25lckFkZHJlc3MsIGN1cnJlbnRBY2NvdW50QWRkcmVzcywga25vd25BY2NvdW50czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgd2hlbiBjYWxsaW5nIGFjY291bnQvU0VUX0NVUlJFTlRfU0lHTkVSIScpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudCA9IGdldHRlcnMuY3VycmVudEFjY291bnQ7CiAgICAgICAgICAgICAgICBwcmV2aW91c1NpZ25lckFkZHJlc3MgPSBnZXR0ZXJzLmN1cnJlbnRTaWduZXJBZGRyZXNzOwogICAgICAgICAgICAgICAgY3VycmVudFNpZ25lckFkZHJlc3MgPSBhZGRyZXNzOwoKICAgICAgICAgICAgICAgIGlmICghKHByZXZpb3VzU2lnbmVyQWRkcmVzcyAmJiBwcmV2aW91c1NpZ25lckFkZHJlc3MuZXF1YWxzKGN1cnJlbnRTaWduZXJBZGRyZXNzKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdkaWFnbm9zdGljL0FERF9ERUJVRycsICdTdG9yZSBhY3Rpb24gYWNjb3VudC9TRVRfQ1VSUkVOVF9TSUdORVIgZGlzcGF0Y2hlZCB3aXRoICcgKyBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL1JFU0VUX1RSQU5TQUNUSU9OUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Jlc3RyaWN0aW9uL1JFU0VUX0FDQ09VTlRfUkVTVFJJQ1RJT05TJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudEFkZHJlc3MgPSBBZGRyZXNzLmNyZWF0ZUZyb21SYXdBZGRyZXNzKGN1cnJlbnRBY2NvdW50LmFkZHJlc3MpOwogICAgICAgICAgICAgICAga25vd25BY2NvdW50cyA9IG5ldyBBY2NvdW50U2VydmljZSgpLmdldEtub3duQWNjb3VudHMoY3VycmVudFByb2ZpbGUuYWNjb3VudHMpOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyQWRkcmVzcycsIGN1cnJlbnRTaWduZXJBZGRyZXNzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudEFjY291bnRBZGRyZXNzJywgY3VycmVudEFjY291bnRBZGRyZXNzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnaXNDb3NpZ25hdG9yeU1vZGUnLCAhY3VycmVudFNpZ25lckFkZHJlc3MuZXF1YWxzKGN1cnJlbnRBY2NvdW50QWRkcmVzcykpOwogICAgICAgICAgICAgICAgY29tbWl0KCdrbm93bkFjY291bnRzJywga25vd25BY2NvdW50cyk7IC8vIFVwZ3JhZGUKCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbmFtZXNwYWNlL1NJR05FUl9DSEFOR0VEJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbW9zYWljL1NJR05FUl9DSEFOR0VEJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgndHJhbnNhY3Rpb24vU0lHTkVSX0NIQU5HRUQnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdtZXRhZGF0YS9TSUdORVJfQ0hBTkdFRCcsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2hhcnZlc3RpbmcvU0VUX0NVUlJFTlRfU0lHTkVSX0hBUlZFU1RJTkdfTU9ERUwnLCBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOyAvLyBvcGVuIC8gY2xvc2Ugd2Vic29ja2V0IGNvbm5lY3Rpb25zCgogICAgICAgICAgICAgICAgaWYgKCFwcmV2aW91c1NpZ25lckFkZHJlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnVU5TVUJTQ1JJQkUnLCBwcmV2aW91c1NpZ25lckFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnU1VCU0NSSUJFJywgY3VycmVudFNpZ25lckFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnTE9BRF9BQ0NPVU5UX0lORk8nKTsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCduYW1lc3BhY2UvTE9BRF9OQU1FU1BBQ0VTJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbW9zYWljL0xPQURfTU9TQUlDUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpOwogICAgfSwKICAgIE5FVFdPUktfQ0hBTkdFRDogZnVuY3Rpb24gTkVUV09SS19DSEFOR0VEKF9yZWYxMSkgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTEuZGlzcGF0Y2g7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgndHJhbnNhY3Rpb24vUkVTRVRfVFJBTlNBQ1RJT05TJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbmFtZXNwYWNlL1JFU0VUX05BTUVTUEFDRVMnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdtb3NhaWMvUkVTRVRfTU9TQUlDUycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RyYW5zYWN0aW9uL0xPQURfVFJBTlNBQ1RJT05TJywgdW5kZWZpbmVkLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdtb3NhaWMvTE9BRF9ORVRXT1JLX0NVUlJFTkNJRVMnLCB1bmRlZmluZWQsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnTE9BRF9BQ0NPVU5UX0lORk8nKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ25hbWVzcGFjZS9MT0FEX05BTUVTUEFDRVMnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdtb3NhaWMvTE9BRF9NT1NBSUNTJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSk7CiAgICB9LAogICAgR0VUX1JFQ0lQSUVOVDogZnVuY3Rpb24gR0VUX1JFQ0lQSUVOVChfcmVmMTIsIHJlY2lwaWVudEFkZHJlc3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMi5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxMi5yb290R2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgY3VycmVudFByb2ZpbGUsIGtub3duQWNjb3VudHMsIGtub3duUmVjaXBpZW50LCByZXBvc2l0b3J5RmFjdG9yeSwgZ2V0QWNjb3VudHNJbmZvUHJvbWlzZSwgYWNjb3VudHNJbmZvOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFyZWNpcGllbnRBZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vRmlyc3QgY2hlY2sga25vd24gYWNjb3VudHMKICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlID0gcm9vdEdldHRlcnNbJ3Byb2ZpbGUvY3VycmVudFByb2ZpbGUnXTsKICAgICAgICAgICAgICAgIGtub3duQWNjb3VudHMgPSBuZXcgQWNjb3VudFNlcnZpY2UoKS5nZXRLbm93bkFjY291bnRzKGN1cnJlbnRQcm9maWxlLmFjY291bnRzKTsKICAgICAgICAgICAgICAgIGtub3duUmVjaXBpZW50ID0ga25vd25BY2NvdW50cy5maW5kKGZ1bmN0aW9uIChrYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4ga2EuYWRkcmVzcyA9PT0gcmVjaXBpZW50QWRkcmVzcy5wbGFpbigpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCFrbm93blJlY2lwaWVudCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFJlY2lwaWVudCcsIEFjY291bnRNb2RlbC5nZXRPYmplY3RzKGtub3duUmVjaXBpZW50KS5wdWJsaWNBY2NvdW50KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcmVwb3NpdG9yeUZhY3RvcnkgPSByb290R2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICAgICAgICAgICAgZ2V0QWNjb3VudHNJbmZvUHJvbWlzZSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZUFjY291bnRSZXBvc2l0b3J5KCkuZ2V0QWNjb3VudEluZm8ocmVjaXBpZW50QWRkcmVzcykudG9Qcm9taXNlKCkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWl0KCdjdXJyZW50UmVjaXBpZW50JywgbnVsbCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QWNjb3VudHNJbmZvUHJvbWlzZTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGFjY291bnRzSW5mbyA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50UmVjaXBpZW50JywgYWNjb3VudHNJbmZvLnB1YmxpY0FjY291bnQpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50UmVjaXBpZW50JywgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSk7CiAgICB9LAogICAgTE9BRF9DVVJSRU5UX0FDQ09VTlRfQUxJQVNFUzogZnVuY3Rpb24gTE9BRF9DVVJSRU5UX0FDQ09VTlRfQUxJQVNFUyhfcmVmMTMsIGN1cnJlbnRBY2NvdW50QWRkcmVzcykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEzLmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjEzLnJvb3RHZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgcmVwb3NpdG9yeUZhY3RvcnksIGFsaWFzUHJvbWlzZSwgYWxpYXNlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgICAgICAgICAgICBhbGlhc1Byb21pc2UgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVOYW1lc3BhY2VSZXBvc2l0b3J5KCkuZ2V0QWNjb3VudHNOYW1lcyhbY3VycmVudEFjY291bnRBZGRyZXNzXSkudG9Qcm9taXNlKCkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWl0KCdjdXJyZW50QWNjb3VudEFsaWFzZXMnLCBbXSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYWxpYXNQcm9taXNlOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBhbGlhc2VzID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50QWNjb3VudEFsaWFzZXMnLCBhbGlhc2VzKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSk7CiAgICB9LAogICAgTE9BRF9BQ0NPVU5UX0lORk86IGZ1bmN0aW9uIExPQURfQUNDT1VOVF9JTkZPKF9yZWYxNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE0LmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmMTQuZ2V0dGVycywKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjE0LnJvb3RHZXR0ZXJzLAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMTQuZGlzcGF0Y2g7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBuZXR3b3JrVHlwZSwgY3VycmVudEFjY291bnQsIHJlcG9zaXRvcnlGYWN0b3J5LCBjdXJyZW50U2lnbmVyQWRkcmVzcywgY3VycmVudEFjY291bnRBZGRyZXNzLCBrbm93bkFjY291bnRzLCBnZXRNdWx0aXNpZ0FjY291bnRHcmFwaEluZm9Qcm9taXNlLCBhbGlhc1Byb21pc2UsIGFsaWFzZXMsIG11bHRpc2lnQWNjb3VudHNJbmZvLCBjdXJyZW50QWNjb3VudE11bHRpc2lnSW5mbywgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbywgYWNjb3VudFNlcnZpY2UsIHNpZ25lcnMsIGtub3duQWRkcmVzc2VzLCBnZXRBY2NvdW50c0luZm9Qcm9taXNlLCBhY2NvdW50c0luZm8sIHNpZ25lck1vZGVsOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5ldHdvcmtUeXBlID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvbmV0d29ya1R5cGUnXTsKICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50ID0gZ2V0dGVycy5jdXJyZW50QWNjb3VudDsKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgICAgICAgICAgIGN1cnJlbnRTaWduZXJBZGRyZXNzID0gZ2V0dGVycy5jdXJyZW50U2lnbmVyQWRkcmVzczsKICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50QWRkcmVzcyA9IGdldHRlcnMuY3VycmVudEFjY291bnRBZGRyZXNzOwogICAgICAgICAgICAgICAga25vd25BY2NvdW50cyA9IGdldHRlcnMua25vd25BY2NvdW50czsgLy8gYXZvaWQgY2FsbHMgaWYgbm8gYWNjb3VudCBzZXQKCiAgICAgICAgICAgICAgICBpZiAoISghY3VycmVudEFjY291bnQgfHwgIWN1cnJlbnRBY2NvdW50QWRkcmVzcykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRBY2NvdW50QWRkcmVzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGdldE11bHRpc2lnQWNjb3VudEdyYXBoSW5mb1Byb21pc2UgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVNdWx0aXNpZ1JlcG9zaXRvcnkoKS5nZXRNdWx0aXNpZ0FjY291bnRHcmFwaEluZm8oY3VycmVudEFjY291bnRBZGRyZXNzKS5waXBlKG1hcChmdW5jdGlvbiAoZykgewogICAgICAgICAgICAgICAgICAvLyBzb3J0ZWQgYXJyYXkgdG8gYmUgcmVwcmVzZW50ZWQgaW4gbXVsdGlzaWcgdHJlZQogICAgICAgICAgICAgICAgICBjb21taXQoJ211bHRpc2lnQWNjb3VudEdyYXBoJywgZy5tdWx0aXNpZ0VudHJpZXMpOwogICAgICAgICAgICAgICAgICByZXR1cm4gTXVsdGlzaWdTZXJ2aWNlLmdldE11bHRpc2lnSW5mb0Zyb21NdWx0aXNpZ0dyYXBoSW5mbyhnKTsKICAgICAgICAgICAgICAgIH0pLCBjYXRjaEVycm9yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKFtdKTsKICAgICAgICAgICAgICAgIH0pKS50b1Byb21pc2UoKTsgLy8gUkVNT1RFIENBTEwKCiAgICAgICAgICAgICAgICBhbGlhc1Byb21pc2UgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVOYW1lc3BhY2VSZXBvc2l0b3J5KCkuZ2V0QWNjb3VudHNOYW1lcyhbY3VycmVudEFjY291bnRBZGRyZXNzXSkudG9Qcm9taXNlKCkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWl0KCdjdXJyZW50QWNjb3VudEFsaWFzZXMnLCBbXSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFsaWFzUHJvbWlzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGFsaWFzZXMgPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRBY2NvdW50QWxpYXNlcycsIGFsaWFzZXMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TXVsdGlzaWdBY2NvdW50R3JhcGhJbmZvUHJvbWlzZTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIG11bHRpc2lnQWNjb3VudHNJbmZvID0gX2NvbnRleHQxMS5zZW50OwogICAgICAgICAgICAgICAgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8gPSBtdWx0aXNpZ0FjY291bnRzSW5mby5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtLmFjY291bnRBZGRyZXNzLmVxdWFscyhjdXJyZW50QWNjb3VudEFkZHJlc3MpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvID0gbXVsdGlzaWdBY2NvdW50c0luZm8uZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbS5hY2NvdW50QWRkcmVzcy5lcXVhbHMoY3VycmVudFNpZ25lckFkZHJlc3MpOwogICAgICAgICAgICAgICAgfSk7IC8vIHVwZGF0ZSBtdWx0aXNpZyBmbGFnIGluIGN1cnJlbnRBY2NvdW50CgogICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8gJiYgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8uY29zaWduYXRvcnlBZGRyZXNzZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRBY2NvdW50LmlzTXVsdGlzaWcpIHsKICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS51cGRhdGVJc011bHRpc2lnKGN1cnJlbnRBY2NvdW50LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlSXNNdWx0aXNpZyhjdXJyZW50QWNjb3VudCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNpZ25lcnMgPSBuZXcgTXVsdGlzaWdTZXJ2aWNlKCkuZ2V0U2lnbmVycyhuZXR3b3JrVHlwZSwga25vd25BY2NvdW50cywgY3VycmVudEFjY291bnQsIGN1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvLCBtdWx0aXNpZ0FjY291bnRzSW5mbyk7CiAgICAgICAgICAgICAgICBrbm93bkFkZHJlc3NlcyA9IF8udW5pcUJ5KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2lnbmVycy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuYWRkcmVzczsKICAgICAgICAgICAgICAgIH0pKSwgX3RvQ29uc3VtYWJsZUFycmF5KGtub3duQWNjb3VudHMubWFwKGZ1bmN0aW9uICh3KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBZGRyZXNzLmNyZWF0ZUZyb21SYXdBZGRyZXNzKHcuYWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KSkpLmZpbHRlcihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgICAgICAgIH0pLCAnYWRkcmVzcycpOwogICAgICAgICAgICAgICAgY29tbWl0KCdrbm93bkFkZHJlc3NlcycsIGtub3duQWRkcmVzc2VzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lcicsIHNpZ25lcnMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICByZXR1cm4gcy5hZGRyZXNzLmVxdWFscyhjdXJyZW50U2lnbmVyQWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NpZ25lcnMnLCBzaWduZXJzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnbXVsdGlzaWdBY2NvdW50c0luZm8nLCBtdWx0aXNpZ0FjY291bnRzSW5mbyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRBY2NvdW50TXVsdGlzaWdJbmZvJywgY3VycmVudEFjY291bnRNdWx0aXNpZ0luZm8pOwogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyTXVsdGlzaWdJbmZvJywgY3VycmVudFNpZ25lck11bHRpc2lnSW5mbyk7IC8vIFJFTU9URSBDQUxMCgogICAgICAgICAgICAgICAgZ2V0QWNjb3VudHNJbmZvUHJvbWlzZSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZUFjY291bnRSZXBvc2l0b3J5KCkuZ2V0QWNjb3VudHNJbmZvKGtub3duQWRkcmVzc2VzKS50b1Byb21pc2UoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFjY291bnRzSW5mb1Byb21pc2U7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBhY2NvdW50c0luZm8gPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ2FjY291bnRzSW5mbycsIGFjY291bnRzSW5mbyk7IC8vIHJlYWQgc2lnbmVyIGluZm8gdG8gZ2V0IHB1YmxpYyBrZXkKCiAgICAgICAgICAgICAgICBzaWduZXJNb2RlbCA9IGtub3duQWNjb3VudHMuZmluZChmdW5jdGlvbiAodykgewogICAgICAgICAgICAgICAgICByZXR1cm4gdy5hZGRyZXNzID09PSBjdXJyZW50U2lnbmVyQWRkcmVzcy5wbGFpbigpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHNpZ25lck1vZGVsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVyUHVibGljS2V5Jywgc2lnbmVyTW9kZWwucHVibGljS2V5KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChnZXR0ZXJzLmN1cnJlbnRTaWduZXJBY2NvdW50SW5mbykgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lclB1YmxpY0tleScsIGdldHRlcnMuY3VycmVudFNpZ25lckFjY291bnRJbmZvLnB1YmxpY0tleSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnYWdncmVnYXRlVHJhbnNhY3Rpb24vQ0xFQVJfQUdHUkVHQVRFX1RSQU5TQUNUSU9OU19MSVNUJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBVUERBVEVfQ1VSUkVOVF9BQ0NPVU5UX05BTUU6IGZ1bmN0aW9uIFVQREFURV9DVVJSRU5UX0FDQ09VTlRfTkFNRShfcmVmMTUsIG5hbWUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNS5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjE1LmdldHRlcnMsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNS5yb290R2V0dGVyczsKICAgICAgdmFyIGN1cnJlbnRBY2NvdW50ID0gZ2V0dGVycy5jdXJyZW50QWNjb3VudDsKCiAgICAgIGlmICghY3VycmVudEFjY291bnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CgogICAgICBpZiAoIWN1cnJlbnRQcm9maWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlTmFtZShjdXJyZW50QWNjb3VudCwgbmFtZSk7CiAgICAgIHZhciBrbm93bkFjY291bnRzID0gYWNjb3VudFNlcnZpY2UuZ2V0S25vd25BY2NvdW50cyhjdXJyZW50UHJvZmlsZS5hY2NvdW50cyk7CiAgICAgIGNvbW1pdCgna25vd25BY2NvdW50cycsIGtub3duQWNjb3VudHMpOyAvLyB1cGRhdGUgY3VycmVudCBzaWduZXIgbmFtZQoKICAgICAgdmFyIHNpZ25lcnMgPSBnZXR0ZXJzLnNpZ25lcnM7CiAgICAgIHNpZ25lcnMubWFwKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgaWYgKHMuYWRkcmVzcy5wbGFpbigpID09PSBjdXJyZW50QWNjb3VudC5hZGRyZXNzKSB7CiAgICAgICAgICBzLmxhYmVsID0gbmFtZTsKICAgICAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lcicsIHMpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgVVBEQVRFX0NVUlJFTlRfQUNDT1VOVF9SRU1PVEVfQUNDT1VOVDogZnVuY3Rpb24gVVBEQVRFX0NVUlJFTlRfQUNDT1VOVF9SRU1PVEVfQUNDT1VOVChfcmVmMTYsIGVuY1JlbW90ZUFjY291bnRQcml2YXRlS2V5KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTYuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYxNi5nZXR0ZXJzLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTYucm9vdEdldHRlcnMsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYxNi5kaXNwYXRjaDsKICAgICAgdmFyIGN1cnJlbnRBY2NvdW50ID0gZ2V0dGVycy5jdXJyZW50QWNjb3VudDsKCiAgICAgIGlmICghY3VycmVudEFjY291bnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjdXJyZW50UHJvZmlsZSA9IHJvb3RHZXR0ZXJzWydwcm9maWxlL2N1cnJlbnRQcm9maWxlJ107CgogICAgICBpZiAoIWN1cnJlbnRQcm9maWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWNjb3VudFNlcnZpY2UgPSBuZXcgQWNjb3VudFNlcnZpY2UoKTsKICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlUmVtb3RlQWNjb3VudChjdXJyZW50QWNjb3VudCwgZW5jUmVtb3RlQWNjb3VudFByaXZhdGVLZXkpOwogICAgICB2YXIga25vd25BY2NvdW50cyA9IGFjY291bnRTZXJ2aWNlLmdldEtub3duQWNjb3VudHMoY3VycmVudFByb2ZpbGUuYWNjb3VudHMpOwogICAgICBjb21taXQoJ2tub3duQWNjb3VudHMnLCBrbm93bkFjY291bnRzKTsKICAgICAgZGlzcGF0Y2goJ0xPQURfQUNDT1VOVF9JTkZPJyk7CiAgICB9LAogICAgREVMRVRFX0NVUlJFTlRfQUNDT1VOVDogZnVuY3Rpb24gREVMRVRFX0NVUlJFTlRfQUNDT1VOVChfcmVmMTcsIGFjY291bnQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNy5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWYxNy5yb290R2V0dGVyczsKCiAgICAgIGlmICghYWNjb3VudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGN1cnJlbnRQcm9maWxlID0gcm9vdEdldHRlcnNbJ3Byb2ZpbGUvY3VycmVudFByb2ZpbGUnXTsKCiAgICAgIGlmICghY3VycmVudFByb2ZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhY2NvdW50U2VydmljZSA9IG5ldyBBY2NvdW50U2VydmljZSgpOwogICAgICBhY2NvdW50U2VydmljZS5kZWxldGVBY2NvdW50KGFjY291bnQpOwogICAgICB2YXIgYWNjb3VudHNJZHMgPSBhY2NvdW50U2VydmljZS5nZXRBY2NvdW50cygpLmZpbHRlcihmdW5jdGlvbiAoYWNjKSB7CiAgICAgICAgcmV0dXJuIGFjYy5wcm9maWxlTmFtZSA9PT0gY3VycmVudFByb2ZpbGUucHJvZmlsZU5hbWU7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoYWNjKSB7CiAgICAgICAgcmV0dXJuIGFjYy5pZDsKICAgICAgfSk7IC8vIHVwZGF0ZSBhY2NvdW50cyBpbiBwcm9maWxlCgogICAgICBuZXcgUHJvZmlsZVNlcnZpY2UoKS51cGRhdGVBY2NvdW50cyhjdXJyZW50UHJvZmlsZSwgX3RvQ29uc3VtYWJsZUFycmF5KGFjY291bnRzSWRzKSk7IC8vIHNldCBmaXJzdCBhY2NvdW50IHRvIGJlIHNlbGVjdGVkCgogICAgICB2YXIga25vd25BY2NvdW50cyA9IGFjY291bnRTZXJ2aWNlLmdldEtub3duQWNjb3VudHMoY3VycmVudFByb2ZpbGUuYWNjb3VudHMpOwogICAgICBjb21taXQoJ2N1cnJlbnRBY2NvdW50Jywga25vd25BY2NvdW50c1swXSk7IC8vIHVwZGF0ZSBrbm93biBBY2NvdW50cwoKICAgICAgY29tbWl0KCdrbm93bkFjY291bnRzJywga25vd25BY2NvdW50cyk7CiAgICB9LAogICAgU0VUX0tOT1dOX0FDQ09VTlRTOiBmdW5jdGlvbiBTRVRfS05PV05fQUNDT1VOVFMoX3JlZjE4LCBhY2NvdW50cykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE4LmNvbW1pdDsKICAgICAgY29tbWl0KCdrbm93bkFjY291bnRzJywgbmV3IEFjY291bnRTZXJ2aWNlKCkuZ2V0S25vd25BY2NvdW50cyhhY2NvdW50cykpOwogICAgfSwKCiAgICAvKioKICAgICAqIFdlYnNvY2tldCBBUEkKICAgICAqLwogICAgLy8gU3Vic2NyaWJlIHRvIGxhdGVzdCBhY2NvdW50IHRyYW5zYWN0aW9ucy4KICAgIFNVQlNDUklCRTogZnVuY3Rpb24gU1VCU0NSSUJFKF9yZWYxOSwgYWRkcmVzcykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE5LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjE5LmRpc3BhdGNoLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMTkucm9vdEdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgIHZhciBwbGFpbkFkZHJlc3MsIHJlcG9zaXRvcnlGYWN0b3J5LCBzdWJzY3JpcHRpb25zLCBwYXlsb2FkOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHBsYWluQWRkcmVzcyA9IGFkZHJlc3MucGxhaW4oKTsgLy8gdXNlIFJFU1RTZXJ2aWNlIHRvIG9wZW4gd2Vic29ja2V0IGNoYW5uZWwgc3Vic2NyaXB0aW9ucwoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gcm9vdEdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gUkVTVFNlcnZpY2Uuc3Vic2NyaWJlVHJhbnNhY3Rpb25DaGFubmVscyh7CiAgICAgICAgICAgICAgICAgIGNvbW1pdDogY29tbWl0LAogICAgICAgICAgICAgICAgICBkaXNwYXRjaDogZGlzcGF0Y2gKICAgICAgICAgICAgICAgIH0sIHJlcG9zaXRvcnlGYWN0b3J5LCBwbGFpbkFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgICAgYWRkcmVzczogcGxhaW5BZGRyZXNzLAogICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zOiBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICB9OyAvLyB1cGRhdGUgc3RhdGUgb2YgbGlzdGVuZXJzICYgc3Vic2NyaXB0aW9ucwoKICAgICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlU3Vic2NyaXB0aW9ucycsIHBheWxvYWQpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKTsKICAgIH0sCiAgICAvLyBVbnN1YnNjcmliZSBhbiBhZGRyZXNzIG9wZW4gd2Vic29ja2V0IGNvbm5lY3Rpb25zCiAgICBVTlNVQlNDUklCRTogZnVuY3Rpb24gVU5TVUJTQ1JJQkUoX3JlZjIwLCBwbGFpbkFkZHJlc3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyMC5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjIwLmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciBzdWJzY3JpcHRpb25zLCBzdWJzY3JpcHRpb25UeXBlcywgX2l0ZXJhdG9yLCBfc3RlcCwgc3Vic2NyaXB0aW9uVHlwZSwgbGlzdGVuZXIsIF9zdWJzY3JpcHRpb25zLCBfaXRlcmF0b3IyLCBfc3RlcDIsIHN1YnNjcmlwdGlvbiwgcGF5bG9hZDsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zID0gZ2V0dGVycy5nZXRTdWJzY3JpcHRpb25zOyAvLyBzdWJzY3JpcHRpb25zIHRvIGNsb3NlCgogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZXMgPSBzdWJzY3JpcHRpb25zICYmIHN1YnNjcmlwdGlvbnNbcGxhaW5BZGRyZXNzLnBsYWluKCldIHx8IFtdOwoKICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25UeXBlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgLy8gY2xvc2Ugc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc3Vic2NyaXB0aW9uVHlwZXMpOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gc3Vic2NyaXB0aW9uVHlwZS5saXN0ZW5lciwgX3N1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25UeXBlLnN1YnNjcmlwdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF9zdWJzY3JpcHRpb25zKTsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5jbG9zZSgpOwogICAgICAgICAgICAgICAgICB9IC8vIHVwZGF0ZSBzdGF0ZSBvZiBsaXN0ZW5lcnMgJiBzdWJzY3JpcHRpb25zCgogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHBsYWluQWRkcmVzcy5wbGFpbigpLAogICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zOiBudWxsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVTdWJzY3JpcHRpb25zJywgcGF5bG9hZCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgfSkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Account.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport Vue from 'vue';\nimport {\n    AccountInfo,\n    AccountNames,\n    Address,\n    IListener,\n    MultisigAccountInfo,\n    NetworkType,\n    PublicAccount,\n    RepositoryFactory,\n} from 'symbol-sdk';\nimport { of, Subscription } from 'rxjs';\n// internal dependencies\nimport { $eventBus } from '../events';\nimport { RESTService } from '@/services/RESTService';\nimport { AwaitLock } from './AwaitLock';\nimport { AccountModel } from '@/core/database/entities/AccountModel';\nimport { MultisigService } from '@/services/MultisigService';\nimport * as _ from 'lodash';\nimport { ProfileModel } from '@/core/database/entities/ProfileModel';\nimport { AccountService } from '@/services/AccountService';\nimport { catchError, map } from 'rxjs/operators';\nimport { ProfileService } from '@/services/ProfileService';\n/// region globals\nconst Lock = AwaitLock.create();\n/// end-region globals\n\n/**\n * Type SubscriptionType for account Store\n * @type {SubscriptionType}\n */\ntype SubscriptionType = {\n    listener: IListener;\n    subscriptions: Subscription[];\n};\n\nexport type Signer = {\n    label: string;\n    address: Address;\n    multisig: boolean;\n    requiredCosignatures: number;\n};\n\n// Account state typing\ninterface AccountState {\n    initialized: boolean;\n    currentAccount: AccountModel;\n    currentAccountAddress: Address;\n    currentAccountMultisigInfo: MultisigAccountInfo;\n    multisigAccountGraph: MultisigAccountInfo[][];\n    isCosignatoryMode: boolean;\n    signers: Signer[];\n    currentSigner: Signer;\n    currentSignerAddress: Address;\n    currentSignerPublicKey: string;\n    currentSignerMultisigInfo: MultisigAccountInfo;\n    // Known accounts database identifiers\n    knownAccounts: AccountModel[];\n    knownAddresses: Address[];\n    accountsInfo: AccountInfo[];\n    multisigAccountsInfo: MultisigAccountInfo[];\n    subscriptions: Record<string, SubscriptionType[]>;\n    currentRecipient: PublicAccount;\n    currentAccountAliases: AccountNames[];\n    selectedAddressesToInteract: number[];\n    currentSignerAccountModel: AccountModel;\n}\n\n// account state initial definition\nconst accountState: AccountState = {\n    initialized: false,\n    currentAccount: null,\n    currentAccountAddress: null,\n    currentAccountMultisigInfo: null,\n    currentAccountAliases: [],\n    isCosignatoryMode: false,\n    signers: [],\n    currentSigner: null,\n    currentSignerAddress: null,\n    currentSignerPublicKey: null,\n    currentSignerMultisigInfo: null,\n    knownAccounts: [],\n    knownAddresses: [],\n    accountsInfo: [],\n    multisigAccountsInfo: [],\n    subscriptions: {},\n    currentRecipient: null,\n    multisigAccountGraph: null,\n    selectedAddressesToInteract: [],\n    currentSignerAccountModel: null,\n};\n\n/**\n * Account Store\n */\nexport default {\n    namespaced: true,\n    state: accountState,\n    getters: {\n        getInitialized: (state: AccountState) => state.initialized,\n        currentAccount: (state: AccountState): AccountModel => {\n            return state.currentAccount;\n        },\n        signers: (state: AccountState): Signer[] => state.signers,\n        currentSigner: (state: AccountState): Signer => state.currentSigner,\n        currentAccountAddress: (state: AccountState) => state.currentAccountAddress,\n        knownAddresses: (state: AccountState) => state.knownAddresses,\n        currentAccountMultisigInfo: (state: AccountState) => state.currentAccountMultisigInfo,\n        currentSignerMultisigInfo: (state: AccountState) => state.currentSignerMultisigInfo,\n        isCosignatoryMode: (state: AccountState) => state.isCosignatoryMode,\n        currentSignerAddress: (state: AccountState) => state.currentSignerAddress,\n        currentSignerPublicKey: (state: AccountState) => state.currentSignerPublicKey,\n        knownAccounts: (state: AccountState) => state.knownAccounts,\n        accountsInfo: (state: AccountState) => state.accountsInfo,\n        currentAccountAccountInfo: (state: AccountState): AccountInfo => {\n            return state.accountsInfo.find(({ publicKey }) => publicKey === state.currentAccount.publicKey);\n        },\n        currentSignerAccountInfo: (state: AccountState): AccountInfo => {\n            return state.accountsInfo.find(({ address }) => address.plain() === state.currentSigner.address.plain());\n        },\n        multisigAccountsInfo: (state: AccountState) => state.multisigAccountsInfo,\n        getSubscriptions: (state: AccountState) => state.subscriptions,\n        currentRecipient: (state: AccountState) => state.currentRecipient,\n        currentAccountAliases: (state: AccountState) => state.currentAccountAliases,\n        multisigAccountGraph: (state: AccountState) => state.multisigAccountGraph,\n        selectedAddressesToInteract: (state: AccountState) => state.selectedAddressesToInteract,\n        currentSignerAccountModel: (state: AccountState) =>\n            state.knownAccounts.find((a) => a.address === state.currentSignerAddress.plain()),\n    },\n    mutations: {\n        setInitialized: (state: AccountState, initialized: boolean) => {\n            state.initialized = initialized;\n        },\n        currentAccount: (state: AccountState, accountModel: AccountModel) => {\n            state.currentAccount = accountModel;\n        },\n        currentAccountAddress: (state: AccountState, accountAddress: Address) => {\n            state.currentAccountAddress = accountAddress;\n        },\n        currentAccountAliases: (state: AccountState, currentAccountAliases: AccountNames[]) => {\n            state.currentAccountAliases = currentAccountAliases;\n        },\n        currentSigner: (state: AccountState, currentSigner: Signer) => {\n            state.currentSigner = currentSigner;\n        },\n        signers: (state: AccountState, signers: Signer[]) => {\n            state.signers = signers;\n        },\n        currentSignerAddress: (state: AccountState, signerAddress) => {\n            state.currentSignerAddress = signerAddress;\n        },\n        currentSignerPublicKey: (state: AccountState, signerPubKey) => {\n            state.currentSignerPublicKey = signerPubKey;\n        },\n        knownAccounts: (state: AccountState, knownAccounts: AccountModel[]) => {\n            state.knownAccounts = knownAccounts;\n        },\n        knownAddresses: (state: AccountState, knownAddresses: Address[]) => {\n            state.knownAddresses = knownAddresses;\n        },\n        isCosignatoryMode: (state: AccountState, isCosignatoryMode: boolean) => {\n            state.isCosignatoryMode = isCosignatoryMode;\n        },\n        accountsInfo: (state: AccountState, accountsInfo) => {\n            state.accountsInfo = accountsInfo;\n        },\n        multisigAccountsInfo: (state: AccountState, multisigAccountsInfo) => {\n            state.multisigAccountsInfo = multisigAccountsInfo;\n        },\n        currentAccountMultisigInfo: (state: AccountState, currentAccountMultisigInfo) => {\n            state.currentAccountMultisigInfo = currentAccountMultisigInfo;\n        },\n        currentSignerMultisigInfo: (state: AccountState, currentSignerMultisigInfo) => {\n            state.currentSignerMultisigInfo = currentSignerMultisigInfo;\n        },\n        currentRecipient: (state: AccountState, currentRecipient) => {\n            state.currentRecipient = currentRecipient;\n        },\n\n        setSubscriptions: (state: AccountState, subscriptions: Record<string, SubscriptionType[]>) => {\n            state.subscriptions = subscriptions;\n        },\n\n        multisigAccountGraph: (state: AccountState, multisigAccountGraph) => {\n            state.multisigAccountGraph = multisigAccountGraph;\n        },\n        updateSubscriptions: (state: AccountState, payload: { address: string; subscriptions: SubscriptionType }) => {\n            const { address, subscriptions } = payload;\n\n            // if subscriptions are empty, unset the address subscriptions\n            if (!subscriptions) {\n                Vue.delete(state.subscriptions, address);\n                return;\n            }\n\n            // get current subscriptions from state\n            const oldSubscriptions = state.subscriptions[address] || [];\n            // update subscriptions\n            const newSubscriptions: SubscriptionType[] = [...oldSubscriptions, subscriptions];\n            // update state\n            Vue.set(state.subscriptions, address, newSubscriptions);\n        },\n        addToSelectedAddressesToInteract: (state: AccountState, pathNumber: number) => {\n            const selectedAccounts = [...state.selectedAddressesToInteract];\n            selectedAccounts.push(pathNumber);\n            state.selectedAddressesToInteract = selectedAccounts;\n        },\n        removeFromSelectedAddressesToInteract: (state: AccountState, pathNumber: number) => {\n            const selectedAccounts = [...state.selectedAddressesToInteract];\n            const indexToDelete = selectedAccounts.indexOf(pathNumber);\n            selectedAccounts.splice(indexToDelete, 1);\n            state.selectedAddressesToInteract = selectedAccounts;\n        },\n    },\n    actions: {\n        /**\n         * Possible `options` values include:\n         * @type {\n         *    skipTransactions: boolean,\n         * }\n         */\n        async initialize({ commit, getters }, { address }) {\n            const callback = async () => {\n                if (!address || !address.length) {\n                    return;\n                }\n                commit('setInitialized', true);\n            };\n            await Lock.initialize(callback, { getters });\n        },\n        async uninitialize({ commit, dispatch, getters }, { address }) {\n            const callback = async () => {\n                // close websocket connections\n                await dispatch('UNSUBSCRIBE', address);\n                await dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n\n        /**\n         * Possible `options` values include:\n         * @type {\n         *    isCosignatoryMode: boolean,\n         * }\n         */\n        async SET_CURRENT_ACCOUNT({ commit, dispatch, getters }, currentAccount: AccountModel) {\n            const previous: AccountModel = getters.currentAccount;\n            if (previous && previous.address === currentAccount.address) {\n                return;\n            }\n\n            const currentAccountAddress: Address = Address.createFromRawAddress(currentAccount.address);\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/SET_CURRENT_ACCOUNT dispatched with ' + currentAccountAddress.plain(), {\n                root: true,\n            });\n\n            // set current account\n            commit('currentAccount', currentAccount);\n\n            // reset current signer\n            await dispatch('SET_CURRENT_SIGNER', {\n                address: currentAccountAddress,\n            });\n            //reset current account alias\n            await dispatch('LOAD_CURRENT_ACCOUNT_ALIASES', currentAccountAddress);\n\n            $eventBus.$emit('onAccountChange', currentAccountAddress.plain());\n        },\n\n        async RESET_CURRENT_ACCOUNT({ commit, dispatch }) {\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/RESET_CURRENT_ACCOUNT dispatched', { root: true });\n            commit('currentAccount', null);\n            commit('currentAccountAddress', null);\n            commit('currentSignerAddress', null);\n            commit('currentSignerPublicKey', null);\n            commit('currentAccountAliases', []);\n        },\n\n        async SET_CURRENT_SIGNER({ commit, dispatch, getters, rootGetters }, { address }: { address: Address }) {\n            if (!address) {\n                throw new Error('Address must be provided when calling account/SET_CURRENT_SIGNER!');\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            const currentAccount: AccountModel = getters.currentAccount;\n            const previousSignerAddress: Address = getters.currentSignerAddress;\n\n            const currentSignerAddress: Address = address;\n\n            if (previousSignerAddress && previousSignerAddress.equals(currentSignerAddress)) {\n                return;\n            }\n\n            dispatch('diagnostic/ADD_DEBUG', 'Store action account/SET_CURRENT_SIGNER dispatched with ' + currentSignerAddress.plain(), {\n                root: true,\n            });\n\n            dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n            dispatch('restriction/RESET_ACCOUNT_RESTRICTIONS', {}, { root: true });\n\n            const currentAccountAddress = Address.createFromRawAddress(currentAccount.address);\n            const knownAccounts = new AccountService().getKnownAccounts(currentProfile.accounts);\n\n            commit('currentSignerAddress', currentSignerAddress);\n            commit('currentAccountAddress', currentAccountAddress);\n            commit('isCosignatoryMode', !currentSignerAddress.equals(currentAccountAddress));\n            commit('knownAccounts', knownAccounts);\n\n            // Upgrade\n            dispatch('namespace/SIGNER_CHANGED', {}, { root: true });\n            dispatch('mosaic/SIGNER_CHANGED', {}, { root: true });\n            dispatch('transaction/SIGNER_CHANGED', {}, { root: true });\n            dispatch('metadata/SIGNER_CHANGED', {}, { root: true });\n            dispatch('harvesting/SET_CURRENT_SIGNER_HARVESTING_MODEL', currentSignerAddress.plain(), { root: true });\n\n            // open / close websocket connections\n            if (previousSignerAddress) {\n                await dispatch('UNSUBSCRIBE', previousSignerAddress);\n            }\n            await dispatch('SUBSCRIBE', currentSignerAddress);\n\n            await dispatch('LOAD_ACCOUNT_INFO');\n\n            dispatch('namespace/LOAD_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/LOAD_MOSAICS', {}, { root: true });\n        },\n\n        async NETWORK_CHANGED({ dispatch }) {\n            dispatch('transaction/RESET_TRANSACTIONS', {}, { root: true });\n            dispatch('namespace/RESET_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/RESET_MOSAICS', {}, { root: true });\n            dispatch('transaction/LOAD_TRANSACTIONS', undefined, { root: true });\n            await dispatch('mosaic/LOAD_NETWORK_CURRENCIES', undefined, {\n                root: true,\n            });\n            await dispatch('LOAD_ACCOUNT_INFO');\n            dispatch('namespace/LOAD_NAMESPACES', {}, { root: true });\n            dispatch('mosaic/LOAD_MOSAICS', {}, { root: true });\n        },\n\n        async GET_RECIPIENT({ commit, rootGetters }, recipientAddress?: Address) {\n            if (recipientAddress) {\n                //First check known accounts\n                const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n                const knownAccounts = new AccountService().getKnownAccounts(currentProfile.accounts);\n                const knownRecipient = knownAccounts.find((ka) => ka.address === recipientAddress.plain());\n                if (knownRecipient) {\n                    commit('currentRecipient', AccountModel.getObjects(knownRecipient).publicAccount);\n                } else {\n                    const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n                    const getAccountsInfoPromise = repositoryFactory\n                        .createAccountRepository()\n                        .getAccountInfo(recipientAddress)\n                        .toPromise()\n                        .catch(() => commit('currentRecipient', null));\n                    const accountsInfo = await getAccountsInfoPromise;\n\n                    commit('currentRecipient', (accountsInfo as AccountInfo).publicAccount);\n                }\n            } else {\n                commit('currentRecipient', null);\n            }\n        },\n\n        async LOAD_CURRENT_ACCOUNT_ALIASES({ commit, rootGetters }, currentAccountAddress: Address) {\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const aliasPromise = repositoryFactory\n                .createNamespaceRepository()\n                .getAccountsNames([currentAccountAddress])\n                .toPromise()\n                .catch(() => commit('currentAccountAliases', []));\n            const aliases = await aliasPromise;\n            commit('currentAccountAliases', aliases);\n        },\n\n        async LOAD_ACCOUNT_INFO({ commit, getters, rootGetters, dispatch }) {\n            const networkType: NetworkType = rootGetters['network/networkType'];\n            const currentAccount: AccountModel = getters.currentAccount;\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const currentSignerAddress: Address = getters.currentSignerAddress;\n            const currentAccountAddress: Address = getters.currentAccountAddress;\n            const knownAccounts: AccountModel[] = getters.knownAccounts;\n\n            // avoid calls if no account set\n            if (!currentAccount || !currentAccountAddress) {\n                return;\n            }\n\n            // remote calls:\n\n            if (!currentAccountAddress) {\n                return;\n            }\n\n            const getMultisigAccountGraphInfoPromise = repositoryFactory\n                .createMultisigRepository()\n                .getMultisigAccountGraphInfo(currentAccountAddress)\n                .pipe(\n                    map((g) => {\n                        // sorted array to be represented in multisig tree\n                        commit('multisigAccountGraph', g.multisigEntries);\n                        return MultisigService.getMultisigInfoFromMultisigGraphInfo(g);\n                    }),\n                    catchError(() => {\n                        return of([]);\n                    }),\n                )\n                .toPromise();\n\n            // REMOTE CALL\n            const aliasPromise = repositoryFactory\n                .createNamespaceRepository()\n                .getAccountsNames([currentAccountAddress])\n                .toPromise()\n                .catch(() => commit('currentAccountAliases', []));\n            const aliases = await aliasPromise;\n            commit('currentAccountAliases', aliases);\n\n            const multisigAccountsInfo: MultisigAccountInfo[] = await getMultisigAccountGraphInfoPromise;\n            const currentAccountMultisigInfo = multisigAccountsInfo.find((m) => m.accountAddress.equals(currentAccountAddress));\n            const currentSignerMultisigInfo = multisigAccountsInfo.find((m) => m.accountAddress.equals(currentSignerAddress));\n            // update multisig flag in currentAccount\n            const accountService = new AccountService();\n            if (currentAccountMultisigInfo && currentAccountMultisigInfo.cosignatoryAddresses.length > 0) {\n                if (!currentAccount.isMultisig) {\n                    accountService.updateIsMultisig(currentAccount, true);\n                }\n            } else {\n                accountService.updateIsMultisig(currentAccount, false);\n            }\n\n            const signers = new MultisigService().getSigners(\n                networkType,\n                knownAccounts,\n                currentAccount,\n                currentAccountMultisigInfo,\n                multisigAccountsInfo,\n            );\n\n            const knownAddresses = _.uniqBy(\n                [...signers.map((s) => s.address), ...knownAccounts.map((w) => Address.createFromRawAddress(w.address))].filter((a) => a),\n                'address',\n            );\n\n            commit('knownAddresses', knownAddresses);\n            commit(\n                'currentSigner',\n                signers.find((s) => s.address.equals(currentSignerAddress)),\n            );\n            commit('signers', signers);\n            commit('multisigAccountsInfo', multisigAccountsInfo);\n            commit('currentAccountMultisigInfo', currentAccountMultisigInfo);\n            commit('currentSignerMultisigInfo', currentSignerMultisigInfo);\n\n            // REMOTE CALL\n            const getAccountsInfoPromise = repositoryFactory.createAccountRepository().getAccountsInfo(knownAddresses).toPromise();\n            const accountsInfo = await getAccountsInfoPromise;\n\n            commit('accountsInfo', accountsInfo);\n\n            // read signer info to get public key\n            const signerModel = knownAccounts.find((w) => w.address === currentSignerAddress.plain());\n            if (signerModel !== undefined) {\n                commit('currentSignerPublicKey', signerModel.publicKey);\n            } else {\n                if (getters.currentSignerAccountInfo) {\n                    commit('currentSignerPublicKey', getters.currentSignerAccountInfo.publicKey);\n                }\n            }\n            dispatch('aggregateTransaction/CLEAR_AGGREGATE_TRANSACTIONS_LIST', {}, { root: true });\n        },\n\n        UPDATE_CURRENT_ACCOUNT_NAME({ commit, getters, rootGetters }, name: string) {\n            const currentAccount: AccountModel = getters.currentAccount;\n            if (!currentAccount) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.updateName(currentAccount, name);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n            // update current signer name\n            const signers: Signer[] = getters.signers;\n            signers.map((s) => {\n                if (s.address.plain() === currentAccount.address) {\n                    s.label = name;\n                    commit('currentSigner', s);\n                }\n            });\n        },\n\n        UPDATE_CURRENT_ACCOUNT_REMOTE_ACCOUNT({ commit, getters, rootGetters, dispatch }, encRemoteAccountPrivateKey: string) {\n            const currentAccount: AccountModel = getters.currentAccount;\n            if (!currentAccount) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.updateRemoteAccount(currentAccount, encRemoteAccountPrivateKey);\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('knownAccounts', knownAccounts);\n            dispatch('LOAD_ACCOUNT_INFO');\n        },\n\n        DELETE_CURRENT_ACCOUNT({ commit, rootGetters }, account: AccountModel) {\n            if (!account) {\n                return;\n            }\n            const currentProfile: ProfileModel = rootGetters['profile/currentProfile'];\n            if (!currentProfile) {\n                return;\n            }\n            const accountService = new AccountService();\n            accountService.deleteAccount(account);\n            const accountsIds = accountService\n                .getAccounts()\n                .filter((acc) => acc.profileName === currentProfile.profileName)\n                .map((acc) => acc.id);\n            // update accounts in profile\n            new ProfileService().updateAccounts(currentProfile, [...accountsIds]);\n            // set first account to be selected\n            const knownAccounts = accountService.getKnownAccounts(currentProfile.accounts);\n            commit('currentAccount', knownAccounts[0]);\n            // update known Accounts\n            commit('knownAccounts', knownAccounts);\n        },\n\n        SET_KNOWN_ACCOUNTS({ commit }, accounts: string[]) {\n            commit('knownAccounts', new AccountService().getKnownAccounts(accounts));\n        },\n\n        /**\n         * Websocket API\n         */\n        // Subscribe to latest account transactions.\n        async SUBSCRIBE({ commit, dispatch, rootGetters }, address: Address) {\n            if (!address) {\n                return;\n            }\n\n            const plainAddress = address.plain();\n\n            // use RESTService to open websocket channel subscriptions\n            const repositoryFactory = rootGetters['network/repositoryFactory'] as RepositoryFactory;\n            const subscriptions: SubscriptionType = await RESTService.subscribeTransactionChannels(\n                { commit, dispatch },\n                repositoryFactory,\n                plainAddress,\n            );\n            const payload: { address: string; subscriptions: SubscriptionType } = { address: plainAddress, subscriptions };\n            // update state of listeners & subscriptions\n            commit('updateSubscriptions', payload);\n        },\n\n        // Unsubscribe an address open websocket connections\n        async UNSUBSCRIBE({ commit, getters }, plainAddress: Address) {\n            // get all subscriptions\n            const subscriptions: Record<string, SubscriptionType[]> = getters.getSubscriptions;\n            // subscriptions to close\n            const subscriptionTypes = (subscriptions && subscriptions[plainAddress.plain()]) || [];\n\n            if (!subscriptionTypes.length) {\n                return;\n            }\n\n            // close subscriptions\n            for (const subscriptionType of subscriptionTypes) {\n                const { listener, subscriptions } = subscriptionType;\n                for (const subscription of subscriptions) {\n                    subscription.unsubscribe();\n                }\n                listener.close();\n            }\n\n            // update state of listeners & subscriptions\n            const payload: { address: string; subscriptions: SubscriptionType } = {\n                address: plainAddress.plain(),\n                subscriptions: null,\n            };\n            commit('updateSubscriptions', payload);\n        },\n    },\n};\n"],"sourceRoot":""}]}