{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/core/utils/FilterHelpers.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/core/utils/FilterHelpers.ts","mtime":1606213958965},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCi8qKgogKiBDb3B5cmlnaHQgMjAyMCBORU0gKGh0dHBzOi8vbmVtLmlvKQogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KZXhwb3J0IHZhciBGaWx0ZXJIZWxwZXJzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBGaWx0ZXJIZWxwZXJzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbHRlckhlbHBlcnMpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEZpbHRlckhlbHBlcnMsIG51bGwsIFt7CiAgICBrZXk6ICJzdHJpcEZpbHRlciIsCgogICAgLyoqCiAgICAgKiByZXBsYWNlIGFsbCB0YWdzCiAgICAgKiBAcGFyYW0gaW5wdXRTdHIKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHN0cmlwRmlsdGVyKGlucHV0U3RyKSB7CiAgICAgIHZhciBhbGxvd2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKICAgICAgLy8gbWFraW5nIHN1cmUgdGhlIGFsbG93ZWQgYXJnIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgb25seSB0YWdzIGluIGxvd2VyY2FzZSAoPGE+PGI+PGM+KQogICAgICBhbGxvd2VkID0gKCgoYWxsb3dlZCB8fCAnJykgKyAnJykudG9Mb3dlckNhc2UoKS5tYXRjaCgvPFthLXpdW2EtejAtOV0qPi9nKSB8fCBbXSkuam9pbignJyk7CiAgICAgIHZhciB0YWdzID0gLzxcLz8oW2EtejAtOV0qKVxiW14+XSo+Py9naTsKICAgICAgdmFyIGNvbW1lbnRzQW5kUGhwVGFncyA9IC88IS0tW1xzXFNdKj8tLT58PFw/KD86cGhwKT9bXHNcU10qP1w/Pi9naTsgLy8gcmVtb3ZlcyB0aGEgJzwnIGNoYXIgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nIHRvIHJlcGxpY2F0ZSBQSFAncyBiZWhhdmlvdXIKCiAgICAgIHZhciBhZnRlciA9IGlucHV0U3RyOwogICAgICBhZnRlciA9IGFmdGVyLnN1YnN0cmluZyhhZnRlci5sZW5ndGggLSAxKSA9PT0gJzwnID8gYWZ0ZXIuc3Vic3RyaW5nKDAsIGFmdGVyLmxlbmd0aCAtIDEpIDogYWZ0ZXI7IC8vIHJlY3Vyc2l2ZWx5IHJlbW92ZSB0YWdzIHRvIGVuc3VyZSB0aGF0IHRoZSByZXR1cm5lZCBzdHJpbmcgZG9lc24ndCBjb250YWluCiAgICAgIC8vIGZvcmJpZGRlbiB0YWdzIGFmdGVyIHByZXZpb3VzIHBhc3NlcyAoZS5nLiAnPDxiYWl0Lz5zd2l0Y2gvPicpCgogICAgICB2YXIgYmVmb3JlOwoKICAgICAgZG8gewogICAgICAgIGJlZm9yZSA9IGFmdGVyOwogICAgICAgIGFmdGVyID0gYmVmb3JlLnJlcGxhY2UoY29tbWVudHNBbmRQaHBUYWdzLCAnJykucmVwbGFjZSh0YWdzLCBmdW5jdGlvbiAoJDAsICQxKSB7CiAgICAgICAgICByZXR1cm4gYWxsb3dlZC5pbmRleE9mKCc8JyArICQxLnRvTG93ZXJDYXNlKCkgKyAnPicpID4gLTEgPyAkMCA6ICcnOwogICAgICAgIH0pOyAvLyByZXR1cm4gb25jZSBubyBtb3JlIHRhZ3MgYXJlIHJlbW92ZWQKCiAgICAgICAgaWYgKGJlZm9yZSA9PT0gYWZ0ZXIpIHsKICAgICAgICAgIHJldHVybiBhZnRlcjsKICAgICAgICB9CiAgICAgIH0gd2hpbGUgKGJlZm9yZSAhPT0gYWZ0ZXIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZpbHRlckhlbHBlcnM7Cn0oKTs="},{"version":3,"sources":["/home/hero/lared-wallet/src/core/utils/FilterHelpers.ts"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;;AAgBA,WAAa,aAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACI;;;;AADJ,gCAK8B,QAL9B,EAKoE;AAAA,UAApB,OAAoB,uEAAF,EAAE;AAC5D;AACA,MAAA,OAAO,GAAG,CAAC,CAAC,CAAC,OAAO,IAAI,EAAZ,IAAkB,EAAnB,EAAuB,WAAvB,GAAqC,KAArC,CAA2C,mBAA3C,KAAmE,EAApE,EAAwE,IAAxE,CAA6E,EAA7E,CAAV;AAEA,UAAM,IAAI,GAAG,4BAAb;AACA,UAAM,kBAAkB,GAAG,0CAA3B,CAL4D,CAO5D;;AACA,UAAI,KAAK,GAAG,QAAZ;AACA,MAAA,KAAK,GAAG,KAAK,CAAC,SAAN,CAAgB,KAAK,CAAC,MAAN,GAAe,CAA/B,MAAsC,GAAtC,GAA4C,KAAK,CAAC,SAAN,CAAgB,CAAhB,EAAmB,KAAK,CAAC,MAAN,GAAe,CAAlC,CAA5C,GAAmF,KAA3F,CAT4D,CAW5D;AACA;;AACA,UAAI,MAAJ;;AACA,SAAG;AACC,QAAA,MAAM,GAAG,KAAT;AACA,QAAA,KAAK,GAAG,MAAM,CAAC,OAAP,CAAe,kBAAf,EAAmC,EAAnC,EAAuC,OAAvC,CAA+C,IAA/C,EAAqD,UAAU,EAAV,EAAc,EAAd,EAAgB;AACzE,iBAAO,OAAO,CAAC,OAAR,CAAgB,MAAM,EAAE,CAAC,WAAH,EAAN,GAAyB,GAAzC,IAAgD,CAAC,CAAjD,GAAqD,EAArD,GAA0D,EAAjE;AACH,SAFO,CAAR,CAFD,CAMC;;AACA,YAAI,MAAM,KAAK,KAAf,EAAsB;AAClB,iBAAO,KAAP;AACH;AACJ,OAVD,QAUS,MAAM,KAAK,KAVpB;AAWH;AA9BL;;AAAA;AAAA","sourcesContent":["/**\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class FilterHelpers {\n    /**\n     * replace all tags\n     * @param inputStr\n     */\n    public static stripFilter(inputStr: string, allowed: string = '') {\n        // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)\n        allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n\n        const tags = /<\\/?([a-z0-9]*)\\b[^>]*>?/gi;\n        const commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\n\n        // removes tha '<' char at the end of the string to replicate PHP's behaviour\n        let after = inputStr;\n        after = after.substring(after.length - 1) === '<' ? after.substring(0, after.length - 1) : after;\n\n        // recursively remove tags to ensure that the returned string doesn't contain\n        // forbidden tags after previous passes (e.g. '<<bait/>switch/>')\n        let before;\n        do {\n            before = after;\n            after = before.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\n                return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n            });\n\n            // return once no more tags are removed\n            if (before === after) {\n                return after;\n            }\n        } while (before !== after);\n    }\n}\n"],"sourceRoot":""}]}