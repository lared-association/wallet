{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-2!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/MosaicService.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/MosaicService.ts","mtime":1611927204231},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgovKgogKiBDb3B5cmlnaHQgMjAyMCBORU0gKGh0dHBzOi8vbmVtLmlvKQogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCi8vIGV4dGVybmFsIGRlcGVuZGVuY2llcwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBNb3NhaWNJZCB9IGZyb20gJ3N5bWJvbC1zZGsnOwppbXBvcnQgeyBjb21iaW5lTGF0ZXN0LCBmcm9tLCBvZiB9IGZyb20gJ3J4anMnOwppbXBvcnQgeyBtYXAsIG1lcmdlTWFwLCB0YXAsIHRvQXJyYXkgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7IC8vIGludGVybmFsIGRlcGVuZGVuY2llcwoKaW1wb3J0IHsgTW9zYWljQ29uZmlndXJhdGlvbk1vZGVsIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL2VudGl0aWVzL01vc2FpY0NvbmZpZ3VyYXRpb25Nb2RlbCc7CmltcG9ydCB7IE1vc2FpY01vZGVsIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL2VudGl0aWVzL01vc2FpY01vZGVsJzsKaW1wb3J0IHsgTmV0d29ya0N1cnJlbmN5TW9kZWwgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UvZW50aXRpZXMvTmV0d29ya0N1cnJlbmN5TW9kZWwnOwppbXBvcnQgeyBPYnNlcnZhYmxlSGVscGVycyB9IGZyb20gJ0AvY29yZS91dGlscy9PYnNlcnZhYmxlSGVscGVycyc7CmltcG9ydCB7IFRpbWVIZWxwZXJzIH0gZnJvbSAnQC9jb3JlL3V0aWxzL1RpbWVIZWxwZXJzJzsKaW1wb3J0IHsgTmV0d29ya0N1cnJlbmNpZXNNb2RlbCB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZS9lbnRpdGllcy9OZXR3b3JrQ3VycmVuY2llc01vZGVsJzsKaW1wb3J0IHsgTW9zYWljTW9kZWxTdG9yYWdlIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlL3N0b3JhZ2UvTW9zYWljTW9kZWxTdG9yYWdlJzsKaW1wb3J0IHsgTmV0d29ya0N1cnJlbmNpZXNNb2RlbFN0b3JhZ2UgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2Uvc3RvcmFnZS9OZXR3b3JrQ3VycmVuY2llc01vZGVsU3RvcmFnZSc7CmltcG9ydCB7IE1vc2FpY0NvbmZpZ3VyYXRpb25Nb2RlbFN0b3JhZ2UgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2Uvc3RvcmFnZS9Nb3NhaWNDb25maWd1cmF0aW9uTW9kZWxTdG9yYWdlJzsKLyoqCiAqIFRoZSBzZXJ2aWNlIGluIGNoYXJnZSBvZiBsb2FkaW5nIGFuZCBjYWNoaW5nIGFueXRoaW5nIHJlbGF0ZWQgdG8gTW9zYWljcyBmcm9tIFJlc3QuCiAqIFRoZSBjYWNoZSBpcyBkb25lIGJ5IHN0b3JpbmcgdGhlIHBheWxvYWRzIGluIFNpbXBsZU9iamVjdFN0b3JhZ2UuCiAqCiAqIFRoZSBzZXJ2aWNlIGFsc28gaG9sZHMgY29uZmlndXJhdGlvbiBhYm91dCB0aGUgY3VycmVudCBtb3NhaWNzLCBmb3IgZXhhbXBsZSB3aGljaCBtb3NhaWMKICogYmFsYW5jZXMgYXJlIGN1cnJlbnRseSBoaWRkZW4uCiAqLwoKZXhwb3J0IHZhciBNb3NhaWNTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNb3NhaWNTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vc2FpY1NlcnZpY2UpOwoKICAgIC8qKgogICAgICogU3RvcmUgdGhhdCBjYWNoZXMgdGhlIG1vc2FpYyBpbmZvcm1hdGlvbiBvZiB0aGUgY3VycmVudCBhY2NvdW50cyB3aGVuIHJldHVybmVkIGZyb20gcmVzdC4KICAgICAqLwogICAgdGhpcy5tb3NhaWNEYXRhU3RvcmFnZSA9IE1vc2FpY01vZGVsU3RvcmFnZS5JTlNUQU5DRTsKICAgIC8qKgogICAgICogVGhlIHN0b3JhZ2UgdG8ga2VlcCB1c2VyIGNvbmZpZ3VyYXRpb24gYXJvdW5kIG1vc2FpY3MuICBGb3IgZXhhbXBsZSwgdGhlIGJhbGFuY2UgaGlkZGVuCiAgICAgKiBmZWF0dXJlLgogICAgICovCgogICAgdGhpcy5tb3NhaWNDb25maWd1cmF0aW9uc1N0b3JhZ2UgPSBNb3NhaWNDb25maWd1cmF0aW9uTW9kZWxTdG9yYWdlLklOU1RBTkNFOwogICAgLyoqCiAgICAgKiBTdG9yZSB0aGF0IGNhY2hlcyB0aGUgaW5mb3JtYXRpb24gYXJvdW5kIHRoZSBuZXR3b3JrIGN1cnJlbmN5LgogICAgICovCgogICAgdGhpcy5uZXR3b3JrQ3VycmVuY3lTdG9yYWdlID0gTmV0d29ya0N1cnJlbmNpZXNNb2RlbFN0b3JhZ2UuSU5TVEFOQ0U7CiAgfQogIC8qKgogICAqIFRoaXMgbWV0aG9kIGxvYWRzIGFuZCBjYWNoZXMgdGhlIG1vc2FpYyBpbmZvcm1hdGlvbiBmb3IgdGhlIGdpdmVuIGFjY291bnRzLgogICAqIFRoZSByZXR1cm5lZCBPYnNlcnZhYmxlIHdpbGwgYW5ub3VuY2UgdGhlIGNhY2hlZCBpbmZvcm1hdGlvbiBmaXJzdCwgdGhlbiB0aGUgcmVzdCByZXR1cm5lZAogICAqIGluZm9ybWF0aW9uIChpZiBwb3NzaWJsZSkuCiAgICoKICAgKiBAcGFyYW0ge1JlcG9zaXRvcnlGYWN0b3J5fSByZXBvc2l0b3J5RmFjdG9yeQogICAqIEBwYXJhbSB7c3RyaW5nfSBnZW5lcmF0aW9uSGFzaAogICAqIEBwYXJhbSB7TmV0d29ya0N1cnJlbmN5TW9kZWx9IG5ldHdvcmtDdXJyZW5jeQogICAqIEBwYXJhbSB7QWNjb3VudEluZm9bXX0gYWNjb3VudHNJbmZvCiAgICogQHJldHVybnMge09ic2VydmFibGU8TW9zYWljTW9kZWxbXT59CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoTW9zYWljU2VydmljZSwgW3sKICAgIGtleTogImdldE1vc2FpY3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1vc2FpY3MocmVwb3NpdG9yeUZhY3RvcnksIGdlbmVyYXRpb25IYXNoLCBuZXR3b3JrQ3VycmVuY3ksIGFjY291bnRzSW5mbykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFhY2NvdW50c0luZm8ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIG9mKFtdKTsKICAgICAgfQoKICAgICAgdmFyIG1vc2FpY0RhdGFMaXN0ID0gdGhpcy5sb2FkTW9zYWljRGF0YShnZW5lcmF0aW9uSGFzaCkgfHwgW107CiAgICAgIHZhciByZXNvbHZlZEJhbGFuY2VzT2JzZXJ2YWJsZSA9IHRoaXMucmVzb2x2ZUJhbGFuY2VzKHJlcG9zaXRvcnlGYWN0b3J5LCBhY2NvdW50c0luZm8pOwogICAgICB2YXIgYWNjb3VudEFkZHJlc3NlcyA9IGFjY291bnRzSW5mby5tYXAoZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gYS5hZGRyZXNzOwogICAgICB9KTsKICAgICAgdmFyIG1vc2FpY3NGcm9tQWNjb3VudHNPYnNlcnZhYmxlID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTW9zYWljUmVwb3NpdG9yeSgpLnNlYXJjaCh7CiAgICAgICAgb3duZXJBZGRyZXNzOiBhY2NvdW50QWRkcmVzc2VzWzBdCiAgICAgIH0pOwogICAgICByZXR1cm4gY29tYmluZUxhdGVzdChbcmVzb2x2ZWRCYWxhbmNlc09ic2VydmFibGUsIG1vc2FpY3NGcm9tQWNjb3VudHNPYnNlcnZhYmxlXSkucGlwZShtZXJnZU1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICBiYWxhbmNlcyA9IF9yZWYyWzBdLAogICAgICAgICAgICBvd2VkTW9zYWljcyA9IF9yZWYyWzFdOwoKICAgICAgICB2YXIgbW9zYWljSWRzID0gXy51bmlxQnkoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShiYWxhbmNlcy5tYXAoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiBtLm1vc2FpY0lkOwogICAgICAgIH0pKSwgX3RvQ29uc3VtYWJsZUFycmF5KG93ZWRNb3NhaWNzLmRhdGEubWFwKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICByZXR1cm4gby5pZDsKICAgICAgICB9KSkpLCBmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0udG9IZXgoKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIG5hbWVPYnNlcnZhYmxlcyA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZU5hbWVzcGFjZVJlcG9zaXRvcnkoKS5nZXRNb3NhaWNzTmFtZXMobW9zYWljSWRzKTsKCiAgICAgICAgdmFyIG1vc2FpY0luZm9PYnNlcnZhYmxlID0gX3RoaXMubG9hZE1vc2FpYyhyZXBvc2l0b3J5RmFjdG9yeSwgbW9zYWljSWRzLCBvd2VkTW9zYWljcy5kYXRhKTsKCiAgICAgICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QoW25hbWVPYnNlcnZhYmxlcywgbW9zYWljSW5mb09ic2VydmFibGVdKS5waXBlKG1hcChmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYzLCAyKSwKICAgICAgICAgICAgICBuYW1lcyA9IF9yZWY0WzBdLAogICAgICAgICAgICAgIG1vc2FpY0luZm9zID0gX3JlZjRbMV07CgogICAgICAgICAgcmV0dXJuIF90aGlzLnRvTW9zYWljRHRvcyhiYWxhbmNlcywgbW9zYWljSW5mb3MsIG5hbWVzLCBuZXR3b3JrQ3VycmVuY3ksIGFjY291bnRBZGRyZXNzZXMpOwogICAgICAgIH0pKTsKICAgICAgfSkpLnBpcGUodGFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNhdmVNb3NhaWNEYXRhKGdlbmVyYXRpb25IYXNoLCBkKTsKICAgICAgfSksIE9ic2VydmFibGVIZWxwZXJzLmRlZmF1bHRGaXJzdChtb3NhaWNEYXRhTGlzdCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRNb3NhaWMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRNb3NhaWMocmVwb3NpdG9yeUZhY3RvcnksIG1vc2FpY0lkcywgYWxyZWFkeUxvYWRlZE1vc2FpY3MpIHsKICAgICAgdmFyIHRvTG9hZE1vc2FpY0lkcyA9IG1vc2FpY0lkcy5maWx0ZXIoZnVuY3Rpb24gKG1vc2FpY0lkKSB7CiAgICAgICAgcmV0dXJuICFhbHJlYWR5TG9hZGVkTW9zYWljcy5zb21lKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgICByZXR1cm4gaW5mby5pZC5lcXVhbHMobW9zYWljSWQpOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGlmICh0b0xvYWRNb3NhaWNJZHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZU1vc2FpY1JlcG9zaXRvcnkoKS5nZXRNb3NhaWNzKHRvTG9hZE1vc2FpY0lkcykucGlwZShtYXAoZnVuY3Rpb24gKG5ld01vc2FpY3MpIHsKICAgICAgICAgIHJldHVybiBuZXdNb3NhaWNzLmNvbmNhdChhbHJlYWR5TG9hZGVkTW9zYWljcyk7CiAgICAgICAgfSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBvZihhbHJlYWR5TG9hZGVkTW9zYWljcyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXROYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROYW1lKG1vc2FpY05hbWVzLCBhY2NvdW50TW9zYWljRHRvKSB7CiAgICAgIHJldHVybiBfLmZpcnN0KG1vc2FpY05hbWVzLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLm1vc2FpY0lkLmVxdWFscyhhY2NvdW50TW9zYWljRHRvKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4ubmFtZXMubGVuZ3RoOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5uYW1lc1swXS5uYW1lOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9Nb3NhaWNEdG9zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b01vc2FpY0R0b3MoYmFsYW5jZXMsIG1vc2FpY0R0b3MsIG1vc2FpY05hbWVzLCBuZXR3b3JrQ3VycmVuY3ksIGFjY291bnRBZGRyZXNzZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gXy5mbGF0dGVuKGFjY291bnRBZGRyZXNzZXMubWFwKGZ1bmN0aW9uIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIG1vc2FpY0R0b3MubWFwKGZ1bmN0aW9uIChtb3NhaWNEdG8pIHsKICAgICAgICAgIHZhciBuYW1lID0gX3RoaXMyLmdldE5hbWUobW9zYWljTmFtZXMsIG1vc2FpY0R0by5pZCk7CgogICAgICAgICAgdmFyIGlzQ3VycmVuY3lNb3NhaWMgPSBtb3NhaWNEdG8uaWQudG9IZXgoKSA9PT0gbmV0d29ya0N1cnJlbmN5Lm1vc2FpY0lkSGV4OwogICAgICAgICAgdmFyIGJhbGFuY2UgPSBiYWxhbmNlcy5maW5kKGZ1bmN0aW9uIChiYWxhbmNlKSB7CiAgICAgICAgICAgIHJldHVybiBiYWxhbmNlLm1vc2FpY0lkLmVxdWFscyhtb3NhaWNEdG8uaWQpICYmIGJhbGFuY2UuYWRkcmVzcy5lcXVhbHMoYWRkcmVzcyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBuZXcgTW9zYWljTW9kZWwoYWRkcmVzcy5wbGFpbigpLCBtb3NhaWNEdG8ub3duZXJBZGRyZXNzLnBsYWluKCksIG5hbWUsIGlzQ3VycmVuY3lNb3NhaWMsIGJhbGFuY2UgJiYgYmFsYW5jZS5hbW91bnQuY29tcGFjdCgpIHx8IDAsIG1vc2FpY0R0byk7CiAgICAgICAgfSk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNvbHZlQmFsYW5jZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVCYWxhbmNlcyhyZXBvc2l0b3J5RmFjdG9yeSwgYWNjb3VudHNJbmZvKSB7CiAgICAgIHZhciBtb3NhaWNJZE9yQWxpYXNlcyA9IF8uZmxhdHRlbihhY2NvdW50c0luZm8ubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEubW9zYWljcy5tYXAoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiBtLmlkOwogICAgICAgIH0pOwogICAgICB9KSk7CgogICAgICB2YXIgbW9zYWljSWRPckFsaWFzZXNVbmlxdWUgPSBfLnVuaXFCeShtb3NhaWNJZE9yQWxpYXNlcywgZnVuY3Rpb24gKG0pIHsKICAgICAgICByZXR1cm4gbS50b0hleCgpOwogICAgICB9KTsKCiAgICAgIHJldHVybiB0aGlzLnJlc29sdmVNb3NhaWNJZHMocmVwb3NpdG9yeUZhY3RvcnksIG1vc2FpY0lkT3JBbGlhc2VzVW5pcXVlKS5waXBlKG1hcChmdW5jdGlvbiAocmVzb2x2ZU1vc2FpY0lkcykgewogICAgICAgIHJldHVybiBfLmZsYXR0ZW4oYWNjb3VudHNJbmZvLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgcmV0dXJuIGEubW9zYWljcy5tYXAoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBhZGRyZXNzOiBhLmFkZHJlc3MsCiAgICAgICAgICAgICAgYW1vdW50OiBtLmFtb3VudCwKICAgICAgICAgICAgICBtb3NhaWNJZDogcmVzb2x2ZU1vc2FpY0lkcy5maW5kKGZ1bmN0aW9uIChwYWlyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFpci5mcm9tLmVxdWFscyhtLmlkKTsKICAgICAgICAgICAgICB9KS50bwogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfSkpOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzb2x2ZU1vc2FpY0lkcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU1vc2FpY0lkcyhyZXBvc2l0b3J5RmFjdG9yeSwgaWRzKSB7CiAgICAgIHZhciBuYW1lc3BhY2VSZXBvc2l0b3J5ID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTmFtZXNwYWNlUmVwb3NpdG9yeSgpOwogICAgICByZXR1cm4gZnJvbShpZHMpLnBpcGUobWVyZ2VNYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgaWYgKGlkIGluc3RhbmNlb2YgTW9zYWljSWQpIHsKICAgICAgICAgIHJldHVybiBvZih7CiAgICAgICAgICAgIGZyb206IGlkLAogICAgICAgICAgICB0bzogaWQKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbGlua2VkTW9zYWljSWRPYnNlcnZhYmxlID0gbmFtZXNwYWNlUmVwb3NpdG9yeS5nZXRMaW5rZWRNb3NhaWNJZChpZCk7CiAgICAgICAgICByZXR1cm4gbGlua2VkTW9zYWljSWRPYnNlcnZhYmxlLnBpcGUobWFwKGZ1bmN0aW9uICh0bykgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGZyb206IGlkLAogICAgICAgICAgICAgIHRvOiB0bwogICAgICAgICAgICB9OwogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfSkpLnBpcGUodG9BcnJheSgpKTsKICAgIH0KICAgIC8qKgogICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgbGlzdCBvZiB7QGxpbmsgTmV0d29ya0N1cnJlbmN5TW9kZWx9IG9mIHRoZSBuZXR3b3JrLgogICAgICoKICAgICAqIFRoZSBpbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgdG8gcmVzb2x2ZSB0aGUgY29uZmlndXJlZCBtYWluIChsaWtlIGNhdC5jdXJyZW5jeSBvciBzeW1ib2wueHltKQogICAgICogYW5kIGhhcnZlc3QgY3VycmVuY2llcyAoY2F0LmhhcnZlc3QpIHJldHVybmVkIGJ5IHRoZSBuZXR3b3JrIGNvbmZpZ3VyYXRpb24gZW5kcG9pbnQuCiAgICAgKgogICAgICogQHBhcmFtIHtSZXBvc2l0b3J5RmFjdG9yeX0gcmVwb3NpdG9yeUZhY3RvcnkKICAgICAqIEBwYXJhbSB7Z2VuZXJhdGlvbkhhc2h9IHRoZSBnZW5lcmF0aW9uIGhhc2guCiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxOZXR3b3JrQ3VycmVuY3lNb2RlbFtdPn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXROZXR3b3JrQ3VycmVuY2llcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmV0d29ya0N1cnJlbmNpZXMocmVwb3NpdG9yeUZhY3RvcnksIGdlbmVyYXRpb25IYXNoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHN0b3JlZE5ldHdvcmtDdXJyZW5jaWVzID0gdGhpcy5uZXR3b3JrQ3VycmVuY3lTdG9yYWdlLmdldChnZW5lcmF0aW9uSGFzaCk7CiAgICAgIHJldHVybiByZXBvc2l0b3J5RmFjdG9yeS5nZXRDdXJyZW5jaWVzKCkucGlwZShtYXAoZnVuY3Rpb24gKG5ldHdvcmtNb3NhaWNzKSB7CiAgICAgICAgdmFyIGN1cnJlbmN5ID0gX3RoaXMzLmdldE5ldHdvcmtDdXJyZW5jeShuZXR3b3JrTW9zYWljcy5jdXJyZW5jeSk7CgogICAgICAgIHZhciBoYXJ2ZXN0ID0gX3RoaXMzLmdldE5ldHdvcmtDdXJyZW5jeShuZXR3b3JrTW9zYWljcy5oYXJ2ZXN0KTsKCiAgICAgICAgcmV0dXJuIG5ldyBOZXR3b3JrQ3VycmVuY2llc01vZGVsKGN1cnJlbmN5LCBoYXJ2ZXN0KTsKICAgICAgfSksIHRhcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBfdGhpczMubmV0d29ya0N1cnJlbmN5U3RvcmFnZS5zZXQoZ2VuZXJhdGlvbkhhc2gsIGQpOwogICAgICB9KSwgT2JzZXJ2YWJsZUhlbHBlcnMuZGVmYXVsdEZpcnN0KHN0b3JlZE5ldHdvcmtDdXJyZW5jaWVzKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZE1vc2FpY0RhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRNb3NhaWNEYXRhKGdlbmVyYXRpb25IYXNoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vc2FpY0RhdGFTdG9yYWdlLmdldChnZW5lcmF0aW9uSGFzaCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZU1vc2FpY0RhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVNb3NhaWNEYXRhKGdlbmVyYXRpb25IYXNoLCBtb3NhaWNzKSB7CiAgICAgIHRoaXMubW9zYWljRGF0YVN0b3JhZ2Uuc2V0KGdlbmVyYXRpb25IYXNoLCBtb3NhaWNzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoZ2VuZXJhdGlvbkhhc2gpIHsKICAgICAgdGhpcy5tb3NhaWNEYXRhU3RvcmFnZS5yZW1vdmUoZ2VuZXJhdGlvbkhhc2gpOwogICAgICB0aGlzLm5ldHdvcmtDdXJyZW5jeVN0b3JhZ2UucmVtb3ZlKGdlbmVyYXRpb25IYXNoKTsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldHdvcmsgY3VycmVuY3kgbW9kZWwgZ2l2ZW4gbW9zYWljIGluZm8gYW5kIG1vc2FpYyBuYW1lcwogICAgICogQHBhcmFtIHtNb3NhaWNJbmZvfSBtb3NhaWNJbmZvCiAgICAgKiBAcGFyYW0ge01vc2FpY05hbWVzfSBtb3NhaWNOYW1lCiAgICAgKiBAcmV0dXJucyB7KE5ldHdvcmtDdXJyZW5jeU1vZGVsIHwgdW5kZWZpbmVkKX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXROZXR3b3JrQ3VycmVuY3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5ldHdvcmtDdXJyZW5jeShjdXJyZW5jeSkgewogICAgICB2YXIgbW9zYWljSWQgPSBjdXJyZW5jeS5tb3NhaWNJZDsKICAgICAgdmFyIG5hbWVzcGFjZUlkID0gY3VycmVuY3kubmFtZXNwYWNlSWQ7CiAgICAgIHZhciB0aWNrZXIgPSBuYW1lc3BhY2VJZCAmJiBuYW1lc3BhY2VJZC5mdWxsTmFtZSAmJiBuYW1lc3BhY2VJZC5mdWxsTmFtZS5zcGxpdCgnLicpLnBvcCgpLnRvVXBwZXJDYXNlKCkgfHwgdW5kZWZpbmVkOwogICAgICByZXR1cm4gbmV3IE5ldHdvcmtDdXJyZW5jeU1vZGVsKG1vc2FpY0lkID09PSBudWxsIHx8IG1vc2FpY0lkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb3NhaWNJZC50b0hleCgpLCBuYW1lc3BhY2VJZCA9PT0gbnVsbCB8fCBuYW1lc3BhY2VJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmFtZXNwYWNlSWQudG9IZXgoKSwgbmFtZXNwYWNlSWQuZnVsbE5hbWUsIGN1cnJlbmN5LmRpdmlzaWJpbGl0eSwgY3VycmVuY3kudHJhbnNmZXJhYmxlLCBjdXJyZW5jeS5zdXBwbHlNdXRhYmxlLCBjdXJyZW5jeS5yZXN0cmljdGFibGUsIHRpY2tlcik7CiAgICB9CiAgICAvKioKICAgICAqCiAgICAgKiBVdGlsaXR5IG1ldGhvZCB0aGF0IHJldHVybnMgdGhlIG1vc2FpYyBleHBpcmF0aW9uIHN0YXR1cwogICAgICogQHBhcmFtIG1vc2FpY0luZm8gdGhlIG1vc2FpYyBpbmZvCiAgICAgKiBAcGFyYW0gY3VycmVudEhlaWdodAogICAgICogQHBhcmFtIGJsb2NrR2VuZXJhdGlvblRhcmdldFRpbWUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRNb3NhaWNDb25maWd1cmF0aW9uc0J5QWNjb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TW9zYWljQ29uZmlndXJhdGlvbnNCeUFjY291bnQoYWNjb3VudCkgewogICAgICByZXR1cm4gdGhpcy5nZXRNb3NhaWNDb25maWd1cmF0aW9ucygpW2FjY291bnQuaWRdIHx8IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogImdldE1vc2FpY0NvbmZpZ3VyYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1vc2FpY0NvbmZpZ3VyYXRpb24obW9zYWljSWQsIGFjY291bnQpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9zYWljQ29uZmlndXJhdGlvbnNCeUFjY291bnQoYWNjb3VudClbbW9zYWljSWQudG9IZXgoKV0gfHwgbmV3IE1vc2FpY0NvbmZpZ3VyYXRpb25Nb2RlbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE1vc2FpY0NvbmZpZ3VyYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNb3NhaWNDb25maWd1cmF0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9zYWljQ29uZmlndXJhdGlvbnNTdG9yYWdlLmdldCgpIHx8IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogImNoYW5nZU1vc2FpY0NvbmZpZ3VyYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZU1vc2FpY0NvbmZpZ3VyYXRpb24obW9zYWljSWQsIGFjY291bnQsIG5ld0NvbmZpZ3MpIHsKICAgICAgdmFyIG1vc2FpY0NvbmZpZ3VyYXRpb25zU3RvcmFnZSA9IHRoaXMuZ2V0TW9zYWljQ29uZmlndXJhdGlvbnMoKTsKICAgICAgbW9zYWljQ29uZmlndXJhdGlvbnNTdG9yYWdlW2FjY291bnQuaWRdID0gbW9zYWljQ29uZmlndXJhdGlvbnNTdG9yYWdlW2FjY291bnQuaWRdID8gbW9zYWljQ29uZmlndXJhdGlvbnNTdG9yYWdlW2FjY291bnQuaWRdIDoge307CiAgICAgIG1vc2FpY0NvbmZpZ3VyYXRpb25zU3RvcmFnZVthY2NvdW50LmlkXVttb3NhaWNJZC50b0hleCgpXSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRNb3NhaWNDb25maWd1cmF0aW9uKG1vc2FpY0lkLCBhY2NvdW50KSksIG5ld0NvbmZpZ3MpOwogICAgICB0aGlzLm1vc2FpY0NvbmZpZ3VyYXRpb25zU3RvcmFnZS5zZXQobW9zYWljQ29uZmlndXJhdGlvbnNTdG9yYWdlKTsKICAgICAgcmV0dXJuIG1vc2FpY0NvbmZpZ3VyYXRpb25zU3RvcmFnZVthY2NvdW50LmlkXTsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImdldEV4cGlyYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEV4cGlyYXRpb24obW9zYWljSW5mbywgY3VycmVudEhlaWdodCwgYmxvY2tHZW5lcmF0aW9uVGFyZ2V0VGltZSkgewogICAgICB2YXIgZHVyYXRpb24gPSBtb3NhaWNJbmZvLmR1cmF0aW9uOwogICAgICB2YXIgc3RhcnRIZWlnaHQgPSBtb3NhaWNJbmZvLmhlaWdodDsgLy8gdW5saW1pdGVkIGR1cmF0aW9uIG1vc2FpY3MgYXJlIGZsYWdnZWQgYXMgZHVyYXRpb24gPT0gMAoKICAgICAgaWYgKGR1cmF0aW9uID09PSAwKSB7CiAgICAgICAgcmV0dXJuICd1bmxpbWl0ZWQnOwogICAgICB9IC8vIGdldCBjdXJyZW50IGhlaWdodAogICAgICAvLyBjYWxjdWxhdGUgZXhwaXJhdGlvbgoKCiAgICAgIHZhciBleHBpcmVzSW4gPSBzdGFydEhlaWdodCArIGR1cmF0aW9uIC0gKGN1cnJlbnRIZWlnaHQgfHwgMCk7CgogICAgICBpZiAoZXhwaXJlc0luIDw9IDApIHsKICAgICAgICByZXR1cm4gJ2V4cGlyZWQnOwogICAgICB9IC8vIG51bWJlciBvZiBibG9ja3MgcmVtYWluaW5nCgoKICAgICAgcmV0dXJuIFRpbWVIZWxwZXJzLmR1cmF0aW9uVG9SZWxhdGl2ZVRpbWUoZXhwaXJlc0luLCBibG9ja0dlbmVyYXRpb25UYXJnZXRUaW1lKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBNb3NhaWNTZXJ2aWNlOwp9KCk7"},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/MosaicService.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n// external dependencies\nimport _ from 'lodash';\nimport { AccountInfo, Address, Currency, MosaicId, MosaicInfo, MosaicNames, NamespaceId, RepositoryFactory, UInt64 } from 'symbol-sdk';\nimport { combineLatest, from, Observable, of } from 'rxjs';\nimport { map, mergeMap, tap, toArray } from 'rxjs/operators';\n// internal dependencies\nimport { MosaicConfigurationModel, AccountMosaicConfigurationModel } from '@/core/database/entities/MosaicConfigurationModel';\nimport { MosaicModel } from '@/core/database/entities/MosaicModel';\nimport { NetworkCurrencyModel } from '@/core/database/entities/NetworkCurrencyModel';\nimport { ObservableHelpers } from '@/core/utils/ObservableHelpers';\nimport { TimeHelpers } from '@/core/utils/TimeHelpers';\nimport { NetworkCurrenciesModel } from '@/core/database/entities/NetworkCurrenciesModel';\nimport { MosaicModelStorage } from '@/core/database/storage/MosaicModelStorage';\nimport { NetworkCurrenciesModelStorage } from '@/core/database/storage/NetworkCurrenciesModelStorage';\nimport { MosaicConfigurationModelStorage } from '@/core/database/storage/MosaicConfigurationModelStorage';\nimport { AccountModel } from '@/core/database/entities/AccountModel';\n\n// custom types\nexport type ExpirationStatus = 'unlimited' | 'expired' | string | number;\n\n// TODO. Can this interface be removed?\nexport interface AttachedMosaic {\n    id: MosaicId | NamespaceId;\n    mosaicHex: string;\n    /**\n     * Relative amount\n     */\n    amount: number;\n}\n\ninterface MosaicBalance {\n    mosaicId: MosaicId;\n    amount: UInt64;\n    address: Address;\n}\n\n/**\n * The service in charge of loading and caching anything related to Mosaics from Rest.\n * The cache is done by storing the payloads in SimpleObjectStorage.\n *\n * The service also holds configuration about the current mosaics, for example which mosaic\n * balances are currently hidden.\n */\nexport class MosaicService {\n    /**\n     * Store that caches the mosaic information of the current accounts when returned from rest.\n     */\n    private readonly mosaicDataStorage = MosaicModelStorage.INSTANCE;\n\n    /**\n     * The storage to keep user configuration around mosaics.  For example, the balance hidden\n     * feature.\n     */\n    private readonly mosaicConfigurationsStorage = MosaicConfigurationModelStorage.INSTANCE;\n\n    /**\n     * Store that caches the information around the network currency.\n     */\n    private readonly networkCurrencyStorage = NetworkCurrenciesModelStorage.INSTANCE;\n\n    /**\n     * This method loads and caches the mosaic information for the given accounts.\n     * The returned Observable will announce the cached information first, then the rest returned\n     * information (if possible).\n     *\n     * @param {RepositoryFactory} repositoryFactory\n     * @param {string} generationHash\n     * @param {NetworkCurrencyModel} networkCurrency\n     * @param {AccountInfo[]} accountsInfo\n     * @returns {Observable<MosaicModel[]>}\n     */\n    public getMosaics(\n        repositoryFactory: RepositoryFactory,\n        generationHash: string,\n        networkCurrency: NetworkCurrencyModel,\n        accountsInfo: AccountInfo[],\n    ): Observable<MosaicModel[]> {\n        if (!accountsInfo.length) {\n            return of([]);\n        }\n        const mosaicDataList = this.loadMosaicData(generationHash) || [];\n        const resolvedBalancesObservable = this.resolveBalances(repositoryFactory, accountsInfo);\n        const accountAddresses = accountsInfo.map((a) => a.address);\n        const mosaicsFromAccountsObservable = repositoryFactory.createMosaicRepository().search({ ownerAddress: accountAddresses[0] });\n\n        return combineLatest([resolvedBalancesObservable, mosaicsFromAccountsObservable])\n            .pipe(\n                mergeMap(([balances, owedMosaics]) => {\n                    const mosaicIds: MosaicId[] = _.uniqBy(\n                        [...balances.map((m) => m.mosaicId), ...owedMosaics.data.map((o) => o.id)],\n                        (m) => m.toHex(),\n                    );\n                    const nameObservables = repositoryFactory.createNamespaceRepository().getMosaicsNames(mosaicIds);\n                    const mosaicInfoObservable = this.loadMosaic(repositoryFactory, mosaicIds, owedMosaics.data);\n                    return combineLatest([nameObservables, mosaicInfoObservable]).pipe(\n                        map(([names, mosaicInfos]) => {\n                            return this.toMosaicDtos(balances, mosaicInfos, names, networkCurrency, accountAddresses);\n                        }),\n                    );\n                }),\n            )\n            .pipe(\n                tap((d) => this.saveMosaicData(generationHash, d)),\n                ObservableHelpers.defaultFirst(mosaicDataList),\n            );\n    }\n\n    private loadMosaic(\n        repositoryFactory: RepositoryFactory,\n        mosaicIds: MosaicId[],\n        alreadyLoadedMosaics: MosaicInfo[],\n    ): Observable<MosaicInfo[]> {\n        const toLoadMosaicIds = mosaicIds.filter((mosaicId) => !alreadyLoadedMosaics.some((info) => info.id.equals(mosaicId)));\n        if (toLoadMosaicIds.length) {\n            return repositoryFactory\n                .createMosaicRepository()\n                .getMosaics(toLoadMosaicIds)\n                .pipe(map((newMosaics) => newMosaics.concat(alreadyLoadedMosaics)));\n        } else {\n            return of(alreadyLoadedMosaics);\n        }\n    }\n\n    private getName(mosaicNames: MosaicNames[], accountMosaicDto: MosaicId): string {\n        return _.first(\n            mosaicNames\n                .filter((n) => n.mosaicId.equals(accountMosaicDto))\n                .filter((n) => n.names.length)\n                .map((n) => n.names[0].name),\n        );\n    }\n\n    private toMosaicDtos(\n        balances: MosaicBalance[],\n        mosaicDtos: MosaicInfo[],\n        mosaicNames: MosaicNames[],\n        networkCurrency: NetworkCurrencyModel,\n        accountAddresses: Address[],\n    ): MosaicModel[] {\n        return _.flatten(\n            accountAddresses.map((address) => {\n                return mosaicDtos.map((mosaicDto) => {\n                    const name = this.getName(mosaicNames, mosaicDto.id);\n                    const isCurrencyMosaic = mosaicDto.id.toHex() === networkCurrency.mosaicIdHex;\n                    const balance = balances.find((balance) => balance.mosaicId.equals(mosaicDto.id) && balance.address.equals(address));\n                    return new MosaicModel(\n                        address.plain(),\n                        mosaicDto.ownerAddress.plain(),\n                        name,\n                        isCurrencyMosaic,\n                        (balance && balance.amount.compact()) || 0,\n                        mosaicDto,\n                    );\n                });\n            }),\n        );\n    }\n\n    private resolveBalances(repositoryFactory: RepositoryFactory, accountsInfo: AccountInfo[]): Observable<MosaicBalance[]> {\n        const mosaicIdOrAliases = _.flatten(accountsInfo.map((a) => a.mosaics.map((m) => m.id)));\n        const mosaicIdOrAliasesUnique = _.uniqBy(mosaicIdOrAliases, (m) => m.toHex());\n        return this.resolveMosaicIds(repositoryFactory, mosaicIdOrAliasesUnique).pipe(\n            map((resolveMosaicIds) => {\n                return _.flatten(\n                    accountsInfo.map((a) => {\n                        return a.mosaics.map((m) => {\n                            return {\n                                address: a.address,\n                                amount: m.amount,\n                                mosaicId: resolveMosaicIds.find((pair) => pair.from.equals(m.id)).to,\n                            };\n                        });\n                    }),\n                );\n            }),\n        );\n    }\n\n    private resolveMosaicIds(\n        repositoryFactory: RepositoryFactory,\n        ids: (NamespaceId | MosaicId)[],\n    ): Observable<{ from: NamespaceId | MosaicId; to: MosaicId }[]> {\n        const namespaceRepository = repositoryFactory.createNamespaceRepository();\n        return from(ids)\n            .pipe(\n                mergeMap((id) => {\n                    if (id instanceof MosaicId) {\n                        return of({ from: id, to: id as MosaicId });\n                    } else {\n                        const linkedMosaicIdObservable = namespaceRepository.getLinkedMosaicId(id as NamespaceId);\n                        return linkedMosaicIdObservable.pipe(\n                            map((to) => {\n                                return { from: id, to: to };\n                            }),\n                        );\n                    }\n                }),\n            )\n            .pipe(toArray());\n    }\n\n    /**\n     * This method returns the list of {@link NetworkCurrencyModel} of the network.\n     *\n     * The intent of this method is to resolve the configured main (like cat.currency or symbol.xym)\n     * and harvest currencies (cat.harvest) returned by the network configuration endpoint.\n     *\n     * @param {RepositoryFactory} repositoryFactory\n     * @param {generationHash} the generation hash.\n     * @returns {Observable<NetworkCurrencyModel[]>}\n     */\n    public getNetworkCurrencies(repositoryFactory: RepositoryFactory, generationHash: string): Observable<NetworkCurrenciesModel> {\n        const storedNetworkCurrencies = this.networkCurrencyStorage.get(generationHash);\n        return repositoryFactory.getCurrencies().pipe(\n            map((networkMosaics) => {\n                const currency = this.getNetworkCurrency(networkMosaics.currency);\n                const harvest = this.getNetworkCurrency(networkMosaics.harvest);\n                return new NetworkCurrenciesModel(currency, harvest);\n            }),\n            tap((d) => this.networkCurrencyStorage.set(generationHash, d)),\n            ObservableHelpers.defaultFirst(storedNetworkCurrencies),\n        );\n    }\n\n    private loadMosaicData(generationHash: string): MosaicModel[] {\n        return this.mosaicDataStorage.get(generationHash);\n    }\n\n    private saveMosaicData(generationHash: string, mosaics: MosaicModel[]) {\n        this.mosaicDataStorage.set(generationHash, mosaics);\n    }\n\n    public reset(generationHash: string) {\n        this.mosaicDataStorage.remove(generationHash);\n        this.networkCurrencyStorage.remove(generationHash);\n    }\n\n    /**\n     * Creates a network currency model given mosaic info and mosaic names\n     * @param {MosaicInfo} mosaicInfo\n     * @param {MosaicNames} mosaicName\n     * @returns {(NetworkCurrencyModel | undefined)}\n     */\n    private getNetworkCurrency(currency: Currency): NetworkCurrencyModel {\n        const mosaicId = currency.mosaicId;\n        const namespaceId = currency.namespaceId;\n        const ticker = (namespaceId && namespaceId.fullName && namespaceId.fullName.split('.').pop().toUpperCase()) || undefined;\n        return new NetworkCurrencyModel(\n            mosaicId?.toHex(),\n            namespaceId?.toHex(),\n            namespaceId.fullName,\n            currency.divisibility,\n            currency.transferable,\n            currency.supplyMutable,\n            currency.restrictable,\n            ticker,\n        );\n    }\n\n    /**\n     *\n     * Utility method that returns the mosaic expiration status\n     * @param mosaicInfo the mosaic info\n     * @param currentHeight\n     * @param blockGenerationTargetTime\n     */\n    public static getExpiration(mosaicInfo: MosaicModel, currentHeight: number, blockGenerationTargetTime: number): ExpirationStatus {\n        const duration = mosaicInfo.duration;\n        const startHeight = mosaicInfo.height;\n\n        // unlimited duration mosaics are flagged as duration == 0\n        if (duration === 0) {\n            return 'unlimited';\n        }\n\n        // get current height\n        // calculate expiration\n        const expiresIn = startHeight + duration - (currentHeight || 0);\n        if (expiresIn <= 0) {\n            return 'expired';\n        }\n        // number of blocks remaining\n        return TimeHelpers.durationToRelativeTime(expiresIn, blockGenerationTargetTime);\n    }\n\n    public getMosaicConfigurationsByAccount(account: AccountModel): AccountMosaicConfigurationModel {\n        return this.getMosaicConfigurations()[account.id] || {};\n    }\n\n    public getMosaicConfiguration(mosaicId: MosaicId, account: AccountModel): MosaicConfigurationModel {\n        return this.getMosaicConfigurationsByAccount(account)[mosaicId.toHex()] || new MosaicConfigurationModel();\n    }\n    public getMosaicConfigurations(): Record<string, AccountMosaicConfigurationModel> {\n        return this.mosaicConfigurationsStorage.get() || {};\n    }\n    public changeMosaicConfiguration(mosaicId: MosaicId, account: AccountModel, newConfigs: any): Record<string, MosaicConfigurationModel> {\n        const mosaicConfigurationsStorage = this.getMosaicConfigurations();\n        mosaicConfigurationsStorage[account.id] = mosaicConfigurationsStorage[account.id] ? mosaicConfigurationsStorage[account.id] : {};\n        mosaicConfigurationsStorage[account.id][mosaicId.toHex()] = {\n            ...this.getMosaicConfiguration(mosaicId, account),\n            ...newConfigs,\n        };\n        this.mosaicConfigurationsStorage.set(mosaicConfigurationsStorage);\n        return mosaicConfigurationsStorage[account.id];\n    }\n}\n"],"sourceRoot":""}]}