{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-2!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/backends/NetworkBasedObjectStorage.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/backends/NetworkBasedObjectStorage.ts","mtime":1611927203469},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCi8qCiAqIENvcHlyaWdodCAyMDIwIE5FTSAoaHR0cHM6Ly9uZW0uaW8pCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KaW1wb3J0IHsgTmV0d29ya0Jhc2VkRW50cnlNb2RlbCB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZS9lbnRpdGllcy9OZXR3b3JrQmFzZWRNb2RlbCc7Ci8qKgogKiBBIHN0b3JhZ2Ugc2F2ZSB0aGUgZGF0YSBwZXIgZ2VuZXJhdGlvbiBoYXNoCiAqLwoKZXhwb3J0IHZhciBOZXR3b3JrQmFzZWRPYmplY3RTdG9yYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAvKioKICAgKiBAcGFyYW0gZGVsZWdhdGUgdGhlIGRlbGVnYXRlIHRoYXQgd2lsbCBzdG9yZSB0aGUgZGF0YSB0aGF0IHN0b3JlcyB0aGUgZ2VuZXJhdGlvbiBtb2RlbC4KICAgKi8KICBmdW5jdGlvbiBOZXR3b3JrQmFzZWRPYmplY3RTdG9yYWdlKGRlbGVnYXRlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmV0d29ya0Jhc2VkT2JqZWN0U3RvcmFnZSk7CgogICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlOwogIH0KICAvKioKICAgKiBpdCBnZXRzIHRoZSBzdG9yZWQgdmFsdWUgZm9yIHRoZSBzcGVjaWZpYyBnZW5lcmF0aW9uIGhhc2guCiAgICoKICAgKiBAcGFyYW0gZ2VuZXJhdGlvbkhhc2ggdGhlIGdlbmVyYXRpb24gaGFzaAogICAqIEByZXR1cm4gdGhlIHN0b3JlZCB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIG5ldHdvcmsgaGFzaCBvciB1bmRlZmluZWQKICAgKi8KCgogIF9jcmVhdGVDbGFzcyhOZXR3b3JrQmFzZWRPYmplY3RTdG9yYWdlLCBbewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoZ2VuZXJhdGlvbkhhc2gpIHsKICAgICAgaWYgKCFnZW5lcmF0aW9uSGFzaCkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KCiAgICAgIHZhciBtYXAgPSB0aGlzLmRlbGVnYXRlLmdldCgpIHx8IHt9OwogICAgICByZXR1cm4gbWFwW2dlbmVyYXRpb25IYXNoXSAmJiBtYXBbZ2VuZXJhdGlvbkhhc2hdLmRhdGEgfHwgdW5kZWZpbmVkOwogICAgfQogICAgLyoqCiAgICAgKiBJdCBnZXRzIHRoZSBsYXRlc3Qgc3RvcmVkIGVudHJ5IGFjY29yZGluZyB0byB0aGUgdGltZXN0YW1wLgogICAgICogQHJldHVybiB0aGUgZW50cnkgaWYgYXZhaWxhYmxlLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldExhdGVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGF0ZXN0KCkgewogICAgICB2YXIgbWFwID0gdGhpcy5kZWxlZ2F0ZS5nZXQoKSB8fCB7fTsKICAgICAgdmFyIGxhdGVzdCA9IE9iamVjdC52YWx1ZXMobWFwKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cnJlbnQpIHsKICAgICAgICByZXR1cm4gcHJldiAmJiBwcmV2LnRpbWVzdGFtcCA+IGN1cnJlbnQudGltZXN0YW1wID8gcHJldiA6IGN1cnJlbnQ7CiAgICAgIH0sIHVuZGVmaW5lZCk7CiAgICAgIHJldHVybiBsYXRlc3QgJiYgbGF0ZXN0LmRhdGEgfHwgdW5kZWZpbmVkOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZXMgdGhlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZ2VuZXJhdGlvbiBoYXNoLgogICAgICoKICAgICAqIEBwYXJhbSBnZW5lcmF0aW9uSGFzaCB0aGUgZ2VuZXJhdGlvbiBoYXNoCiAgICAgKiBAcGFyYW0gdmFsdWUgdG8gYmUgc3RvcmVkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoZ2VuZXJhdGlvbkhhc2gsIHZhbHVlKSB7CiAgICAgIGlmICghZ2VuZXJhdGlvbkhhc2gpIHsKICAgICAgICB0aHJvdyBFcnJvcignR2VuZXJhdGlvbiBoYXNoIG11c3QgYmUgcHJvdmlkZWQhJyk7CiAgICAgIH0KCiAgICAgIHZhciBtYXAgPSB0aGlzLmRlbGVnYXRlLmdldCgpIHx8IHt9OwogICAgICBtYXBbZ2VuZXJhdGlvbkhhc2hdID0gbmV3IE5ldHdvcmtCYXNlZEVudHJ5TW9kZWwoZ2VuZXJhdGlvbkhhc2gsIHZhbHVlKTsKICAgICAgdGhpcy5kZWxlZ2F0ZS5zZXQobWFwKTsKICAgIH0KICAgIC8qKgogICAgICogRGVsZXRlcyB0aGUgc3RvcmVkIHZhbHVlIGZvciB0aGUgZ2l2ZW4gZ2VuZXJhdGlvbiBoYXNoCiAgICAgKiBAcGFyYW0gZ2VuZXJhdGlvbkhhc2ggdGhlIGdlbmVyYXRpb24gaGFzaC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShnZW5lcmF0aW9uSGFzaCkgewogICAgICB2YXIgbWFwID0gdGhpcy5kZWxlZ2F0ZS5nZXQoKSB8fCB7fTsKICAgICAgZGVsZXRlIG1hcFtnZW5lcmF0aW9uSGFzaF07CiAgICAgIHRoaXMuZGVsZWdhdGUuc2V0KG1hcCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTmV0d29ya0Jhc2VkT2JqZWN0U3RvcmFnZTsKfSgpOw=="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/core/database/backends/NetworkBasedObjectStorage.ts"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;AAcG;AAEH,SAAS,sBAAT,QAA0D,4CAA1D;AAGA;;AAEG;;AACH,WAAa,yBAAb;AACI;;AAEG;AACH,qCAAoC,QAApC,EAA4E;AAAA;;AAAxC,SAAA,QAAA,GAAA,QAAA;AAA4C;AAEhF;;;;;AAKG;;;AAXP;AAAA;AAAA,wBAYe,cAZf,EAYqC;AAC7B,UAAI,CAAC,cAAL,EAAqB;AACjB,eAAO,SAAP;AACH;;AACD,UAAM,GAAG,GAAG,KAAK,QAAL,CAAc,GAAd,MAAuB,EAAnC;AACA,aAAQ,GAAG,CAAC,cAAD,CAAH,IAAuB,GAAG,CAAC,cAAD,CAAH,CAAoB,IAA5C,IAAqD,SAA5D;AACH;AAED;;;AAGG;;AAvBP;AAAA;AAAA,gCAwBoB;AACZ,UAAM,GAAG,GAAG,KAAK,QAAL,CAAc,GAAd,MAAuB,EAAnC;AACA,UAAM,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,GAAd,EAAmB,MAAnB,CACX,UAAC,IAAD,EAAO,OAAP;AAAA,eAAoB,IAAI,IAAI,IAAI,CAAC,SAAL,GAAiB,OAAO,CAAC,SAAjC,GAA6C,IAA7C,GAAoD,OAAxE;AAAA,OADW,EAEX,SAFW,CAAf;AAIA,aAAQ,MAAM,IAAI,MAAM,CAAC,IAAlB,IAA2B,SAAlC;AACH;AAED;;;;;AAKG;;AAtCP;AAAA;AAAA,wBAuCe,cAvCf,EAuCuC,KAvCvC,EAuC+C;AACvC,UAAI,CAAC,cAAL,EAAqB;AACjB,cAAM,KAAK,CAAC,mCAAD,CAAX;AACH;;AACD,UAAM,GAAG,GAAG,KAAK,QAAL,CAAc,GAAd,MAAuB,EAAnC;AACA,MAAA,GAAG,CAAC,cAAD,CAAH,GAAsB,IAAI,sBAAJ,CAA2B,cAA3B,EAA2C,KAA3C,CAAtB;AACA,WAAK,QAAL,CAAc,GAAd,CAAkB,GAAlB;AACH;AAED;;;AAGG;;AAnDP;AAAA;AAAA,2BAoDkB,cApDlB,EAoDwC;AAChC,UAAM,GAAG,GAAG,KAAK,QAAL,CAAc,GAAd,MAAuB,EAAnC;AACA,aAAO,GAAG,CAAC,cAAD,CAAV;AACA,WAAK,QAAL,CAAc,GAAd,CAAkB,GAAlB;AACH;AAxDL;;AAAA;AAAA","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nimport { NetworkBasedEntryModel, NetworkBasedModel } from '@/core/database/entities/NetworkBasedModel';\nimport { IStorage } from '@/core/database/backends/IStorage';\n\n/**\n * A storage save the data per generation hash\n */\nexport class NetworkBasedObjectStorage<E> {\n    /**\n     * @param delegate the delegate that will store the data that stores the generation model.\n     */\n    public constructor(private readonly delegate: IStorage<NetworkBasedModel<E>>) {}\n\n    /**\n     * it gets the stored value for the specific generation hash.\n     *\n     * @param generationHash the generation hash\n     * @return the stored value for the provided network hash or undefined\n     */\n    public get(generationHash: string): E | undefined {\n        if (!generationHash) {\n            return undefined;\n        }\n        const map = this.delegate.get() || {};\n        return (map[generationHash] && map[generationHash].data) || undefined;\n    }\n\n    /**\n     * It gets the latest stored entry according to the timestamp.\n     * @return the entry if available.\n     */\n    public getLatest(): E | undefined {\n        const map = this.delegate.get() || {};\n        const latest = Object.values(map).reduce(\n            (prev, current) => (prev && prev.timestamp > current.timestamp ? prev : current),\n            undefined,\n        );\n        return (latest && latest.data) || undefined;\n    }\n\n    /**\n     * Stores the value for the provided generation hash.\n     *\n     * @param generationHash the generation hash\n     * @param value to be stored\n     */\n    public set(generationHash: string, value: E): void {\n        if (!generationHash) {\n            throw Error('Generation hash must be provided!');\n        }\n        const map = this.delegate.get() || {};\n        map[generationHash] = new NetworkBasedEntryModel(generationHash, value);\n        this.delegate.set(map);\n    }\n\n    /**\n     * Deletes the stored value for the given generation hash\n     * @param generationHash the generation hash.\n     */\n    public remove(generationHash: string): void {\n        const map = this.delegate.get() || {};\n        delete map[generationHash];\n        this.delegate.set(map);\n    }\n}\n"],"sourceRoot":""}]}