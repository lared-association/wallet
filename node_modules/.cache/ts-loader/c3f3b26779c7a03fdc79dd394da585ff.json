{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-2!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/TransactionAnnouncerService.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/TransactionAnnouncerService.ts","mtime":1611927204309},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmltcG9ydCB7IFRyYW5zYWN0aW9uLCBUcmFuc2FjdGlvblNlcnZpY2UgfSBmcm9tICdzeW1ib2wtc2RrJzsgLy8gaW50ZXJuYWwgZGVwZW5kZW5jaWVzCgppbXBvcnQgeyBCcm9hZGNhc3RSZXN1bHQgfSBmcm9tICdAL2NvcmUvdHJhbnNhY3Rpb25zL0Jyb2FkY2FzdFJlc3VsdCc7CmltcG9ydCB7IG9mLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IGNhdGNoRXJyb3IsIGZsYXRNYXAsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsgLy8gY29uZmlndXJhdGlvbgoKaW1wb3J0IHsgYXBwQ29uZmlnIH0gZnJvbSAnQC9jb25maWcnOwppbXBvcnQgaTE4biBmcm9tICdAL2xhbmd1YWdlJzsKaW1wb3J0IHsgdGltZW91dFdpdGggfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CnZhciBBTk5PVU5DRV9UUkFOU0FDVElPTl9USU1FT1VUID0gYXBwQ29uZmlnLmNvbnN0YW50cy5BTk5PVU5DRV9UUkFOU0FDVElPTl9USU1FT1VUOwpleHBvcnQgdmFyIEFjY291bnRUcmFuc2FjdGlvblNpZ25lciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQWNjb3VudFRyYW5zYWN0aW9uU2lnbmVyKGFjY291bnQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY2NvdW50VHJhbnNhY3Rpb25TaWduZXIpOwoKICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnQ7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQWNjb3VudFRyYW5zYWN0aW9uU2lnbmVyLCBbewogICAga2V5OiAic2lnblRyYW5zYWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaWduVHJhbnNhY3Rpb24odCwgZ2VuZXJhdGlvbkhhc2gpIHsKICAgICAgcmV0dXJuIG9mKHRoaXMuYWNjb3VudC5zaWduKHQsIGdlbmVyYXRpb25IYXNoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2lnbkNvc2lnbmF0dXJlVHJhbnNhY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNpZ25Db3NpZ25hdHVyZVRyYW5zYWN0aW9uKHQpIHsKICAgICAgcmV0dXJuIG9mKHRoaXMuYWNjb3VudC5zaWduQ29zaWduYXR1cmVUcmFuc2FjdGlvbih0KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWNjb3VudFRyYW5zYWN0aW9uU2lnbmVyOwp9KCk7CmV4cG9ydCB2YXIgVHJhbnNhY3Rpb25Bbm5vdW5jZXJTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAvKioKICAgKiBDb25zdHJ1Y3QgYSBzZXJ2aWNlIGluc3RhbmNlIGFyb3VuZCBcYSBzdG9yZQogICAqIEBwYXJhbSBzdG9yZQogICAqLwogIGZ1bmN0aW9uIFRyYW5zYWN0aW9uQW5ub3VuY2VyU2VydmljZShzdG9yZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zYWN0aW9uQW5ub3VuY2VyU2VydmljZSk7CgogICAgdGhpcy50cmFuc2FjdGlvblRpbWVvdXQgPSBBTk5PVU5DRV9UUkFOU0FDVElPTl9USU1FT1VUOwogICAgdGhpcy4kc3RvcmUgPSBzdG9yZTsKICB9CgogIF9jcmVhdGVDbGFzcyhUcmFuc2FjdGlvbkFubm91bmNlclNlcnZpY2UsIFt7CiAgICBrZXk6ICJhbm5vdW5jZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYW5ub3VuY2Uoc2lnbmVkVHJhbnNhY3Rpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBsaXN0ZW5lciA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ25ldHdvcmsvbGlzdGVuZXInXTsKICAgICAgdmFyIHNlcnZpY2UgPSB0aGlzLmNyZWF0ZVNlcnZpY2UoKTsKICAgICAgcmV0dXJuIHNlcnZpY2UuYW5ub3VuY2Uoc2lnbmVkVHJhbnNhY3Rpb24sIGxpc3RlbmVyKS5waXBlKHRoaXMudGltZW91dCh0aGlzLnRpbWVvdXRNZXNzYWdlKHNpZ25lZFRyYW5zYWN0aW9uLnR5cGUpKSwgY2F0Y2hFcnJvcihmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBvZihlKTsKICAgICAgfSkpLnBpcGUobWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZUJyb2FkY2FzdFJlc3VsdChzaWduZWRUcmFuc2FjdGlvbiwgdCk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0aW1lb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0aW1lb3V0KG1lc3NhZ2UpIHsKICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGltZW91dCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAobykgewogICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIG9wZXJhdG9yRnVuY3Rpb24gPSB0aW1lb3V0V2l0aCh0aGlzLnRyYW5zYWN0aW9uVGltZW91dCwgdGhyb3dFcnJvcihuZXcgRXJyb3IobWVzc2FnZSkpKTsKICAgICAgcmV0dXJuIG9wZXJhdG9yRnVuY3Rpb247CiAgICB9CiAgfSwgewogICAga2V5OiAidGltZW91dE1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVvdXRNZXNzYWdlKHRyYW5zYWN0aW9uVHlwZSkgewogICAgICByZXR1cm4gIiIuY29uY2F0KGkxOG4udCgidHJhbnNhY3Rpb25fZGVzY3JpcHRvcl8iLmNvbmNhdCh0cmFuc2FjdGlvblR5cGUpKSwgIiBUcmFuc2FjdGlvbiBoYXMgdGltZWQgb3V0LiIpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZVNlcnZpY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVNlcnZpY2UoKSB7CiAgICAgIHZhciByZXBvc2l0b3J5RmFjdG9yeSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ25ldHdvcmsvcmVwb3NpdG9yeUZhY3RvcnknXTsKICAgICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvblNlcnZpY2UocmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlVHJhbnNhY3Rpb25SZXBvc2l0b3J5KCksIHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZVJlY2VpcHRSZXBvc2l0b3J5KCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImFubm91bmNlSGFzaEFuZEFnZ3JlZ2F0ZUJvbmRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYW5ub3VuY2VIYXNoQW5kQWdncmVnYXRlQm9uZGVkKHNpZ25lZEhhc2hMb2NrVHJhbnNhY3Rpb24sIHNpZ25lZEFnZ3JlZ2F0ZVRyYW5zYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGxpc3RlbmVyID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbmV0d29yay9saXN0ZW5lciddOwogICAgICB2YXIgc2VydmljZSA9IHRoaXMuY3JlYXRlU2VydmljZSgpOwogICAgICByZXR1cm4gc2VydmljZS5hbm5vdW5jZShzaWduZWRIYXNoTG9ja1RyYW5zYWN0aW9uLCBsaXN0ZW5lcikucGlwZSh0aGlzLnRpbWVvdXQodGhpcy50aW1lb3V0TWVzc2FnZShzaWduZWRIYXNoTG9ja1RyYW5zYWN0aW9uLnR5cGUpKSkucGlwZShmbGF0TWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc2VydmljZS5hbm5vdW5jZUFnZ3JlZ2F0ZUJvbmRlZChzaWduZWRBZ2dyZWdhdGVUcmFuc2FjdGlvbiwgbGlzdGVuZXIpLnBpcGUoX3RoaXMyLnRpbWVvdXQoX3RoaXMyLnRpbWVvdXRNZXNzYWdlKHNpZ25lZEFnZ3JlZ2F0ZVRyYW5zYWN0aW9uLnR5cGUpKSk7CiAgICAgIH0pKS5waXBlKGNhdGNoRXJyb3IoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gb2YoZSk7CiAgICAgIH0pKS5waXBlKG1hcChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBfdGhpczIuY3JlYXRlQnJvYWRjYXN0UmVzdWx0KHNpZ25lZEFnZ3JlZ2F0ZVRyYW5zYWN0aW9uLCB0KTsKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImFubm91bmNlQ2hhaW5lZEJpbmFyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYW5ub3VuY2VDaGFpbmVkQmluYXJ5KGZpcnN0LCBzZWNvbmQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgbGlzdGVuZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyduZXR3b3JrL2xpc3RlbmVyJ107CiAgICAgIHZhciBzZXJ2aWNlID0gdGhpcy5jcmVhdGVTZXJ2aWNlKCk7CiAgICAgIHJldHVybiBzZXJ2aWNlLmFubm91bmNlKGZpcnN0LCBsaXN0ZW5lcikucGlwZSh0aGlzLnRpbWVvdXQodGhpcy50aW1lb3V0TWVzc2FnZShmaXJzdC50eXBlKSkpLnBpcGUoZmxhdE1hcChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHNlcnZpY2UuYW5ub3VuY2Uoc2Vjb25kLCBsaXN0ZW5lcikucGlwZShfdGhpczMudGltZW91dChfdGhpczMudGltZW91dE1lc3NhZ2Uoc2Vjb25kLnR5cGUpKSk7CiAgICAgIH0pKS5waXBlKGNhdGNoRXJyb3IoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gb2YoZSk7CiAgICAgIH0pKS5waXBlKG1hcChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBfdGhpczMuY3JlYXRlQnJvYWRjYXN0UmVzdWx0KHNlY29uZCwgdCk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhbm5vdW5jZUFnZ3JlZ2F0ZUJvbmRlZENvc2lnbmF0dXJlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbm5vdW5jZUFnZ3JlZ2F0ZUJvbmRlZENvc2lnbmF0dXJlKHNpbmdlZFRyYW5zYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIHJlcG9zaXRvcnlGYWN0b3J5ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICB2YXIgdHJhbnNhY3Rpb25IdHRwID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlVHJhbnNhY3Rpb25SZXBvc2l0b3J5KCk7CiAgICAgIHJldHVybiB0cmFuc2FjdGlvbkh0dHAuYW5ub3VuY2VBZ2dyZWdhdGVCb25kZWRDb3NpZ25hdHVyZShzaW5nZWRUcmFuc2FjdGlvbikucGlwZSh0aGlzLnRpbWVvdXQoJ0Nvc2lnbmF0dXJlIFRyYW5zYWN0aW9uIGhhcyB0aW1lZCBvdXQnKSkucGlwZShtYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LmNyZWF0ZUJyb2FkY2FzdFJlc3VsdChzaW5nZWRUcmFuc2FjdGlvbiwgdCk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVCcm9hZGNhc3RSZXN1bHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJyb2FkY2FzdFJlc3VsdChzaWduZWRUcmFuc2FjdGlvbiwgdHJhbnNhY3Rpb25PckVycm9yKSB7CiAgICAgIGlmICh0cmFuc2FjdGlvbk9yRXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgIHJldHVybiBuZXcgQnJvYWRjYXN0UmVzdWx0KHNpZ25lZFRyYW5zYWN0aW9uLCB1bmRlZmluZWQsIGZhbHNlLCB0cmFuc2FjdGlvbk9yRXJyb3IubWVzc2FnZSk7CiAgICAgIH0gZWxzZSBpZiAodHJhbnNhY3Rpb25PckVycm9yIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pIHsKICAgICAgICByZXR1cm4gbmV3IEJyb2FkY2FzdFJlc3VsdChzaWduZWRUcmFuc2FjdGlvbiwgdHJhbnNhY3Rpb25PckVycm9yLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IEJyb2FkY2FzdFJlc3VsdChzaWduZWRUcmFuc2FjdGlvbiwgdW5kZWZpbmVkLCB0cnVlKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRyYW5zYWN0aW9uQW5ub3VuY2VyU2VydmljZTsKfSgpOw=="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/services/TransactionAnnouncerService.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport { Store } from 'vuex';\nimport {\n    Account,\n    CosignatureSignedTransaction,\n    CosignatureTransaction,\n    IListener,\n    RepositoryFactory,\n    SignedTransaction,\n    Transaction,\n    TransactionService,\n    TransactionType,\n} from 'symbol-sdk';\n// internal dependencies\nimport { BroadcastResult } from '@/core/transactions/BroadcastResult';\nimport { Observable, of, OperatorFunction, throwError } from 'rxjs';\nimport { catchError, flatMap, map } from 'rxjs/operators';\nimport { TransactionAnnounceResponse } from 'symbol-sdk/dist/src/model/transaction/TransactionAnnounceResponse';\n// configuration\nimport { appConfig } from '@/config';\nimport i18n from '@/language';\nimport { timeoutWith } from 'rxjs/operators';\n\nconst { ANNOUNCE_TRANSACTION_TIMEOUT } = appConfig.constants;\n\n/// end-region custom types\n\nexport interface TransactionSigner {\n    signTransaction(t: Transaction, generationHash: string): Observable<SignedTransaction>;\n\n    signCosignatureTransaction(t: CosignatureTransaction): Observable<CosignatureSignedTransaction>;\n}\n\nexport class AccountTransactionSigner implements TransactionSigner {\n    constructor(private readonly account: Account) {}\n\n    signTransaction(t: Transaction, generationHash: string): Observable<SignedTransaction> {\n        return of(this.account.sign(t, generationHash));\n    }\n    signCosignatureTransaction(t: CosignatureTransaction): Observable<CosignatureSignedTransaction> {\n        return of(this.account.signCosignatureTransaction(t));\n    }\n}\n\nexport class TransactionAnnouncerService {\n    /**\n     * Vuex Store\n     * @var {Vuex.Store}\n     */\n    public $store: Store<any>;\n\n    private readonly transactionTimeout = ANNOUNCE_TRANSACTION_TIMEOUT;\n\n    /**\n     * Construct a service instance around \\a store\n     * @param store\n     */\n    constructor(store: Store<any>) {\n        this.$store = store;\n    }\n\n    public announce(signedTransaction: SignedTransaction): Observable<BroadcastResult> {\n        const listener: IListener = this.$store.getters['network/listener'];\n        const service = this.createService();\n        return service\n            .announce(signedTransaction, listener)\n            .pipe(\n                this.timeout(this.timeoutMessage(signedTransaction.type)),\n                catchError((e) => of(e as Error)),\n            )\n            .pipe(map((t) => this.createBroadcastResult(signedTransaction, t)));\n    }\n\n    private timeout<T, R>(message: string): OperatorFunction<T, T> {\n        if (!this.transactionTimeout) {\n            return (o) => o;\n        }\n        const operatorFunction: any = timeoutWith(this.transactionTimeout, throwError(new Error(message)));\n        return operatorFunction as OperatorFunction<T, T>;\n    }\n\n    private timeoutMessage(transactionType: TransactionType): string {\n        return `${i18n.t(`transaction_descriptor_${transactionType}`)} Transaction has timed out.`;\n    }\n\n    private createService() {\n        const repositoryFactory: RepositoryFactory = this.$store.getters['network/repositoryFactory'];\n        return new TransactionService(repositoryFactory.createTransactionRepository(), repositoryFactory.createReceiptRepository());\n    }\n\n    public announceHashAndAggregateBonded(\n        signedHashLockTransaction: SignedTransaction,\n        signedAggregateTransaction: SignedTransaction,\n    ): Observable<BroadcastResult> {\n        const listener: IListener = this.$store.getters['network/listener'];\n        const service = this.createService();\n        return service\n            .announce(signedHashLockTransaction, listener)\n            .pipe(this.timeout(this.timeoutMessage(signedHashLockTransaction.type)))\n            .pipe(\n                flatMap(() =>\n                    service\n                        .announceAggregateBonded(signedAggregateTransaction, listener)\n                        .pipe(this.timeout(this.timeoutMessage(signedAggregateTransaction.type))),\n                ),\n            )\n\n            .pipe(catchError((e) => of(e as Error)))\n            .pipe(map((t) => this.createBroadcastResult(signedAggregateTransaction, t)));\n    }\n\n    public announceChainedBinary(first: SignedTransaction, second: SignedTransaction): Observable<BroadcastResult> {\n        const listener: IListener = this.$store.getters['network/listener'];\n        const service = this.createService();\n        return service\n            .announce(first, listener)\n            .pipe(this.timeout(this.timeoutMessage(first.type)))\n            .pipe(flatMap(() => service.announce(second, listener).pipe(this.timeout(this.timeoutMessage(second.type)))))\n\n            .pipe(catchError((e) => of(e as Error)))\n            .pipe(map((t) => this.createBroadcastResult(second, t)));\n    }\n\n    public announceAggregateBondedCosignature(singedTransaction: CosignatureSignedTransaction): Observable<BroadcastResult> {\n        const repositoryFactory = this.$store.getters['network/repositoryFactory'] as RepositoryFactory;\n        const transactionHttp = repositoryFactory.createTransactionRepository();\n        return transactionHttp\n            .announceAggregateBondedCosignature(singedTransaction)\n            .pipe(this.timeout('Cosignature Transaction has timed out'))\n            .pipe(map((t) => this.createBroadcastResult(singedTransaction, t)));\n    }\n\n    private createBroadcastResult(\n        signedTransaction: SignedTransaction | CosignatureSignedTransaction,\n        transactionOrError: Error | Transaction | TransactionAnnounceResponse,\n    ): BroadcastResult {\n        if (transactionOrError instanceof Error) {\n            return new BroadcastResult(signedTransaction, undefined, false, transactionOrError.message);\n        } else if (transactionOrError instanceof Transaction) {\n            return new BroadcastResult(signedTransaction, transactionOrError, true);\n        } else {\n            return new BroadcastResult(signedTransaction, undefined, true);\n        }\n    }\n}\n"],"sourceRoot":""}]}