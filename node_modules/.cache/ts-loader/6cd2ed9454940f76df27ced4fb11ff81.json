{"remainingRequest":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Harvesting.ts","dependencies":[{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Harvesting.ts","mtime":1611927227411},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/.babelrc","mtime":1611927226200},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL21udC9jL1VzZXJzL2p1c3RpL0Rlc2t0b3AvU1VQRVJIT1cvU3ltYm9sV2FsbGV0L2xhcmVkLXdhbGxldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgeyBfX2F3YWl0ZXIgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IFVSTEhlbHBlcnMgfSBmcm9tICdAL2NvcmUvdXRpbHMvVVJMSGVscGVycyc7CmltcG9ydCB7IEhhcnZlc3RpbmdTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9IYXJ2ZXN0aW5nU2VydmljZSc7CmltcG9ydCB7IG1hcCwgcmVkdWNlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnOwppbXBvcnQgeyBPcmRlciwgUmVjZWlwdFBhZ2luYXRpb25TdHJlYW1lciwgUmVjZWlwdFR5cGUsIFJlcG9zaXRvcnlGYWN0b3J5SHR0cCwgVUludDY0IH0gZnJvbSAnc3ltYm9sLXNkayc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsgLy8gaW50ZXJuYWwgZGVwZW5kZW5jaWVzCgppbXBvcnQgeyBBd2FpdExvY2sgfSBmcm9tICcuL0F3YWl0TG9jayc7CnZhciBMb2NrID0gQXdhaXRMb2NrLmNyZWF0ZSgpOwpleHBvcnQgdmFyIEhhcnZlc3RpbmdTdGF0dXM7CgooZnVuY3Rpb24gKEhhcnZlc3RpbmdTdGF0dXMpIHsKICBIYXJ2ZXN0aW5nU3RhdHVzWyJBQ1RJVkUiXSA9ICJBQ1RJVkUiOwogIEhhcnZlc3RpbmdTdGF0dXNbIklOQUNUSVZFIl0gPSAiSU5BQ1RJVkUiOwogIEhhcnZlc3RpbmdTdGF0dXNbIktFWVNfTElOS0VEIl0gPSAiS0VZU19MSU5LRUQiOwogIEhhcnZlc3RpbmdTdGF0dXNbIklOUFJPR1JFU1NfQUNUSVZBVElPTiJdID0gIklOUFJPR1JFU1NfQUNUSVZBVElPTiI7CiAgSGFydmVzdGluZ1N0YXR1c1siSU5QUk9HUkVTU19ERUFDVElWQVRJT04iXSA9ICJJTlBST0dSRVNTX0RFQUNUSVZBVElPTiI7Cn0pKEhhcnZlc3RpbmdTdGF0dXMgfHwgKEhhcnZlc3RpbmdTdGF0dXMgPSB7fSkpOwoKdmFyIGluaXRpYWxTdGF0ZSA9IHsKICBpbml0aWFsaXplZDogZmFsc2UsCiAgaGFydmVzdGVkQmxvY2tzOiBudWxsLAogIGlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3M6IGZhbHNlLAogIGhhcnZlc3RlZEJsb2Nrc1BhZ2VJbmZvOiB7CiAgICBwYWdlTnVtYmVyOiAxLAogICAgaXNMYXN0UGFnZTogZmFsc2UKICB9LAogIHN0YXR1czogSGFydmVzdGluZ1N0YXR1cy5JTkFDVElWRSwKICBoYXJ2ZXN0ZWRCbG9ja1N0YXRzOiB7CiAgICB0b3RhbEJsb2NrQ291bnQ6IDAsCiAgICB0b3RhbEZlZXNFYXJuZWQ6IFVJbnQ2NC5mcm9tVWludCgwKQogIH0sCiAgaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHM6IGZhbHNlLAogIGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWw6IG51bGwKfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IGluaXRpYWxTdGF0ZSwKICBnZXR0ZXJzOiB7CiAgICBnZXRJbml0aWFsaXplZDogZnVuY3Rpb24gZ2V0SW5pdGlhbGl6ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmluaXRpYWxpemVkOwogICAgfSwKICAgIGhhcnZlc3RlZEJsb2NrczogZnVuY3Rpb24gaGFydmVzdGVkQmxvY2tzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5oYXJ2ZXN0ZWRCbG9ja3M7CiAgICB9LAogICAgaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrczogZnVuY3Rpb24gaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrczsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja3NQYWdlSW5mbzogZnVuY3Rpb24gaGFydmVzdGVkQmxvY2tzUGFnZUluZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmhhcnZlc3RlZEJsb2Nrc1BhZ2VJbmZvOwogICAgfSwKICAgIHN0YXR1czogZnVuY3Rpb24gc3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0dXM7CiAgICB9LAogICAgaGFydmVzdGVkQmxvY2tTdGF0czogZnVuY3Rpb24gaGFydmVzdGVkQmxvY2tTdGF0cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaGFydmVzdGVkQmxvY2tTdGF0czsKICAgIH0sCiAgICBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0czogZnVuY3Rpb24gaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzOwogICAgfSwKICAgIGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWw6IGZ1bmN0aW9uIGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWw7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldEluaXRpYWxpemVkOiBmdW5jdGlvbiBzZXRJbml0aWFsaXplZChzdGF0ZSwgaW5pdGlhbGl6ZWQpIHsKICAgICAgc3RhdGUuaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplZDsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja3M6IGZ1bmN0aW9uIGhhcnZlc3RlZEJsb2NrcyhzdGF0ZSwgX3JlZikgewogICAgICB2YXIgX2hhcnZlc3RlZEJsb2NrcyA9IF9yZWYuaGFydmVzdGVkQmxvY2tzLAogICAgICAgICAgcGFnZUluZm8gPSBfcmVmLnBhZ2VJbmZvOwogICAgICBWdWUuc2V0KHN0YXRlLCAnaGFydmVzdGVkQmxvY2tzJywgX2hhcnZlc3RlZEJsb2Nrcyk7CiAgICAgIFZ1ZS5zZXQoc3RhdGUsICdoYXJ2ZXN0ZWRCbG9ja3NQYWdlSW5mbycsIHBhZ2VJbmZvKTsKICAgIH0sCiAgICBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzOiBmdW5jdGlvbiBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzKHN0YXRlLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3MnLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2Nrcyk7CiAgICB9LAogICAgc3RhdHVzOiBmdW5jdGlvbiBzdGF0dXMoc3RhdGUsIF9zdGF0dXMpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdzdGF0dXMnLCBfc3RhdHVzKTsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja1N0YXRzOiBmdW5jdGlvbiBoYXJ2ZXN0ZWRCbG9ja1N0YXRzKHN0YXRlLCBfaGFydmVzdGVkQmxvY2tTdGF0cykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2hhcnZlc3RlZEJsb2NrU3RhdHMnLCBfaGFydmVzdGVkQmxvY2tTdGF0cyk7CiAgICB9LAogICAgaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHM6IGZ1bmN0aW9uIGlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzKHN0YXRlLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHMpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0cycsIF9pc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0cyk7CiAgICB9LAogICAgY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbDogZnVuY3Rpb24gY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbChzdGF0ZSwgX2N1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdjdXJyZW50U2lnbmVySGFydmVzdGluZ01vZGVsJywgX2N1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYyLmdldHRlcnM7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGNhbGxiYWNrOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHN0b3JlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OyAvLyBhY3F1aXJlIGFzeW5jIGxvY2sgdW50aWwgaW5pdGlhbGl6ZWQKCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIExvY2suaW5pdGlhbGl6ZShjYWxsYmFjaywgewogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBnZXR0ZXJzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwogICAgfSwKICAgIHVuaW5pdGlhbGl6ZTogZnVuY3Rpb24gdW5pbml0aWFsaXplKF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjMuZ2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgdmFyIGNhbGxiYWNrOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczIsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRJbml0aWFsaXplZCcsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTG9jay51bmluaXRpYWxpemUoY2FsbGJhY2ssIHsKICAgICAgICAgICAgICAgICAgZ2V0dGVyczogZ2V0dGVycwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKICAgIH0sCiAgICAvLy8gcmVnaW9uIHNjb3BlZCBhY3Rpb25zCiAgICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgY29tbWl0KCdoYXJ2ZXN0ZWRCbG9ja3MnLCB7CiAgICAgICAgaGFydmVzdGVkQmxvY2tzOiBudWxsLAogICAgICAgIHBhZ2VJbmZvOiB7CiAgICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgICAgaXNMYXN0UGFnZTogZmFsc2UKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3MnLCBmYWxzZSk7CiAgICB9LAogICAgRkVUQ0hfU1RBVFVTOiBmdW5jdGlvbiBGRVRDSF9TVEFUVVMoX3JlZjUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjUucm9vdEdldHRlcnM7CgogICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lOwoKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgY3VycmVudFNpZ25lckFjY291bnRJbmZvLCBjdXJyZW50U2lnbmVySGFydmVzdGluZ01vZGVsLCBhY2NvdW50VW5sb2NrZWQsIHNlbGVjdGVkTm9kZSwgaGFydmVzdGluZ05vZGVVcmwsIHVubG9ja2VkQWNjb3VudHMsIHJlcG9zaXRvcnlGYWN0b3J5LCBub2RlUmVwb3NpdG9yeSwgcmVtb3RlUHVibGljS2V5LCBhbGxLZXlzTGlua2VkLCBzdGF0dXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjdXJyZW50U2lnbmVyQWNjb3VudEluZm8gPSByb290R2V0dGVyc1snYWNjb3VudC9jdXJyZW50U2lnbmVyQWNjb3VudEluZm8nXTsgLy8gcmVzZXQKCiAgICAgICAgICAgICAgICBjb21taXQoJ3N0YXR1cycsIEhhcnZlc3RpbmdTdGF0dXMuSU5BQ1RJVkUpOwoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2lnbmVyQWNjb3VudEluZm8pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwgPSByb290R2V0dGVyc1snaGFydmVzdGluZy9jdXJyZW50U2lnbmVySGFydmVzdGluZ01vZGVsJ107CiAgICAgICAgICAgICAgICBhY2NvdW50VW5sb2NrZWQgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9maW5kIHRoZSBub2RlIHVybCBmcm9tIGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwgKGxvY2FsU3RvcmFnZSkKICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwuc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZTsKICAgICAgICAgICAgICAgIGhhcnZlc3RpbmdOb2RlVXJsID0gc2VsZWN0ZWROb2RlID09PSBudWxsIHx8IHNlbGVjdGVkTm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWROb2RlLnVybDsKICAgICAgICAgICAgICAgIHVubG9ja2VkQWNjb3VudHMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoIWhhcnZlc3RpbmdOb2RlVXJsKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gbmV3IFJlcG9zaXRvcnlGYWN0b3J5SHR0cChVUkxIZWxwZXJzLmdldE5vZGVVcmwoaGFydmVzdGluZ05vZGVVcmwpKTsKICAgICAgICAgICAgICAgIG5vZGVSZXBvc2l0b3J5ID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTm9kZVJlcG9zaXRvcnkoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSZXBvc2l0b3J5LmdldFVubG9ja2VkQWNjb3VudCgpLnRvUHJvbWlzZSgpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgdW5sb2NrZWRBY2NvdW50cyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgxMyk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICByZW1vdGVQdWJsaWNLZXkgPSAoX2IgPSAoX2EgPSBjdXJyZW50U2lnbmVyQWNjb3VudEluZm8uc3VwcGxlbWVudGFsUHVibGljS2V5cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxpbmtlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnB1YmxpY0tleTsKICAgICAgICAgICAgICAgIGFjY291bnRVbmxvY2tlZCA9IHVubG9ja2VkQWNjb3VudHMgPT09IG51bGwgfHwgdW5sb2NrZWRBY2NvdW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdW5sb2NrZWRBY2NvdW50cy5zb21lKGZ1bmN0aW9uIChwdWJsaWNLZXkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0tleSA9PT0gcmVtb3RlUHVibGljS2V5OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBhbGxLZXlzTGlua2VkID0gKChfYyA9IGN1cnJlbnRTaWduZXJBY2NvdW50SW5mby5zdXBwbGVtZW50YWxQdWJsaWNLZXlzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubGlua2VkKSAmJiAoKF9kID0gY3VycmVudFNpZ25lckFjY291bnRJbmZvLnN1cHBsZW1lbnRhbFB1YmxpY0tleXMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5ub2RlKSAmJiAoKF9lID0gY3VycmVudFNpZ25lckFjY291bnRJbmZvLnN1cHBsZW1lbnRhbFB1YmxpY0tleXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS52cmYpOwoKICAgICAgICAgICAgICAgIGlmIChhbGxLZXlzTGlua2VkKSB7CiAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGFjY291bnRVbmxvY2tlZCA/IEhhcnZlc3RpbmdTdGF0dXMuQUNUSVZFIDogKGN1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwgPT09IG51bGwgfHwgY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbC5pc1BlcnNpc3RlbnREZWxSZXFTZW50KSA/IEhhcnZlc3RpbmdTdGF0dXMuSU5QUk9HUkVTU19BQ1RJVkFUSU9OIDogSGFydmVzdGluZ1N0YXR1cy5LRVlTX0xJTktFRDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGFjY291bnRVbmxvY2tlZCA/IEhhcnZlc3RpbmdTdGF0dXMuSU5QUk9HUkVTU19ERUFDVElWQVRJT04gOiBIYXJ2ZXN0aW5nU3RhdHVzLklOQUNUSVZFOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc3RhdHVzJywgc3RhdHVzKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1sxMywgMTldXSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBMT0FEX0hBUlZFU1RFRF9CTE9DS1M6IGZ1bmN0aW9uIExPQURfSEFSVkVTVEVEX0JMT0NLUyhfcmVmNiwgX3JlZjcpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjYucm9vdEdldHRlcnM7CiAgICAgIHZhciBwYWdlTnVtYmVyID0gX3JlZjcucGFnZU51bWJlciwKICAgICAgICAgIHBhZ2VTaXplID0gX3JlZjcucGFnZVNpemU7CiAgICAgIHZhciByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgIHZhciByZWNlaXB0UmVwb3NpdG9yeSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZVJlY2VpcHRSZXBvc2l0b3J5KCk7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107CgogICAgICBpZiAoIWN1cnJlbnRTaWduZXJBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0QWRkcmVzcyA9IGN1cnJlbnRTaWduZXJBZGRyZXNzOyAvLyBmb3IgdGVzdGluZyA9PiBjb25zdCB0YXJnZXRBZGRyZXNzID0gQWRkcmVzcy5jcmVhdGVGcm9tUmF3QWRkcmVzcygnVEQ1WVRFSk5IT01IVE1TNlhFU1lBRllVRTM2Q09RS1BXNk1RUVFZJyk7CgogICAgICBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3MnLCB0cnVlKTsKICAgICAgcmVjZWlwdFJlcG9zaXRvcnkuc2VhcmNoUmVjZWlwdHMoewogICAgICAgIHRhcmdldEFkZHJlc3M6IHRhcmdldEFkZHJlc3MsCiAgICAgICAgcmVjZWlwdFR5cGVzOiBbUmVjZWlwdFR5cGUuSGFydmVzdF9GZWVdLAogICAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VOdW1iZXIsCiAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplLAogICAgICAgIG9yZGVyOiBPcmRlci5EZXNjCiAgICAgIH0pLnBpcGUobWFwKGZ1bmN0aW9uIChwYWdlVHhTdGF0ZW1lbnQpIHsKICAgICAgICB2YXIgaGFydmVzdGVkQmxvY2tzID0gcGFnZVR4U3RhdGVtZW50LmRhdGEubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgX2E7CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmxvY2tObzogdC5oZWlnaHQsCiAgICAgICAgICAgIGZlZTogKF9hID0gdC5yZWNlaXB0cy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHIudGFyZ2V0QWRkcmVzcy5wbGFpbigpID09PSB0YXJnZXRBZGRyZXNzLnBsYWluKCk7CiAgICAgICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYW1vdW50CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHZhciBwYWdlSW5mbyA9IHsKICAgICAgICAgIGlzTGFzdFBhZ2U6IHBhZ2VUeFN0YXRlbWVudC5pc0xhc3RQYWdlLAogICAgICAgICAgcGFnZU51bWJlcjogcGFnZVR4U3RhdGVtZW50LnBhZ2VOdW1iZXIKICAgICAgICB9OwogICAgICAgIGNvbW1pdCgnaGFydmVzdGVkQmxvY2tzJywgewogICAgICAgICAgaGFydmVzdGVkQmxvY2tzOiBoYXJ2ZXN0ZWRCbG9ja3MsCiAgICAgICAgICBwYWdlSW5mbzogcGFnZUluZm8KICAgICAgICB9KTsKICAgICAgfSkpLnN1YnNjcmliZSh7CiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICAgICAgcmV0dXJuIGNvbW1pdCgnaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcycsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIExPQURfSEFSVkVTVEVEX0JMT0NLU19TVEFUUzogZnVuY3Rpb24gTE9BRF9IQVJWRVNURURfQkxPQ0tTX1NUQVRTKF9yZWY4KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOC5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY4LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgcmVwb3NpdG9yeUZhY3RvcnkgPSByb290R2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICB2YXIgcmVjZWlwdFJlcG9zaXRvcnkgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVSZWNlaXB0UmVwb3NpdG9yeSgpOwogICAgICB2YXIgc3RyZWFtZXIgPSBSZWNlaXB0UGFnaW5hdGlvblN0cmVhbWVyLnRyYW5zYWN0aW9uU3RhdGVtZW50cyhyZWNlaXB0UmVwb3NpdG9yeSk7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107CgogICAgICBpZiAoIWN1cnJlbnRTaWduZXJBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0QWRkcmVzcyA9IGN1cnJlbnRTaWduZXJBZGRyZXNzOyAvLyBmb3IgdGVzdGluZyA9PiBjb25zdCB0YXJnZXRBZGRyZXNzID0gQWRkcmVzcy5jcmVhdGVGcm9tUmF3QWRkcmVzcygnVEQ1WVRFSk5IT01IVE1TNlhFU1lBRllVRTM2Q09RS1BXNk1RUVFZJyk7CgogICAgICBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzJywgdHJ1ZSk7CiAgICAgIHZhciBjb3VudGVyID0gMDsKICAgICAgc3RyZWFtZXIuc2VhcmNoKHsKICAgICAgICB0YXJnZXRBZGRyZXNzOiB0YXJnZXRBZGRyZXNzLAogICAgICAgIHJlY2VpcHRUeXBlczogW1JlY2VpcHRUeXBlLkhhcnZlc3RfRmVlXSwKICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgIHBhZ2VTaXplOiA1MAogICAgICB9KS5waXBlKG1hcChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBibG9ja05vOiB0LmhlaWdodCwKICAgICAgICAgIGZlZTogdC5yZWNlaXB0cy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiByLnRhcmdldEFkZHJlc3MucGxhaW4oKSA9PT0gdGFyZ2V0QWRkcmVzcy5wbGFpbigpOwogICAgICAgICAgfSkuYW1vdW50CiAgICAgICAgfTsKICAgICAgfSksIHJlZHVjZShmdW5jdGlvbiAoYWNjLCBoYXJ2ZXN0ZWRCbG9jaykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b3RhbEJsb2NrQ291bnQ6ICsrY291bnRlciwKICAgICAgICAgIHRvdGFsRmVlc0Vhcm5lZDogYWNjLnRvdGFsRmVlc0Vhcm5lZC5hZGQoaGFydmVzdGVkQmxvY2suZmVlKQogICAgICAgIH07CiAgICAgIH0sIHsKICAgICAgICB0b3RhbEJsb2NrQ291bnQ6IDAsCiAgICAgICAgdG90YWxGZWVzRWFybmVkOiBVSW50NjQuZnJvbVVpbnQoMCkKICAgICAgfSkpLnN1YnNjcmliZSh7CiAgICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dChoYXJ2ZXN0ZWRCbG9ja1N0YXRzKSB7CiAgICAgICAgICBjb21taXQoJ2hhcnZlc3RlZEJsb2NrU3RhdHMnLCBoYXJ2ZXN0ZWRCbG9ja1N0YXRzKTsKICAgICAgICB9LAogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgIHJldHVybiBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgU0VUX0NVUlJFTlRfU0lHTkVSX0hBUlZFU1RJTkdfTU9ERUw6IGZ1bmN0aW9uIFNFVF9DVVJSRU5UX1NJR05FUl9IQVJWRVNUSU5HX01PREVMKF9yZWY5LCBjdXJyZW50U2lnbmVyQWRkcmVzcykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjkuY29tbWl0OwogICAgICB2YXIgaGFydmVzdGluZ1NlcnZpY2UgPSBuZXcgSGFydmVzdGluZ1NlcnZpY2UoKTsKICAgICAgdmFyIGhhcnZlc3RpbmdNb2RlbCA9IGhhcnZlc3RpbmdTZXJ2aWNlLmdldEhhcnZlc3RpbmdNb2RlbChjdXJyZW50U2lnbmVyQWRkcmVzcyk7CgogICAgICBpZiAoIWhhcnZlc3RpbmdNb2RlbCkgewogICAgICAgIGhhcnZlc3RpbmdNb2RlbCA9IHsKICAgICAgICAgIGFjY291bnRBZGRyZXNzOiBjdXJyZW50U2lnbmVyQWRkcmVzcwogICAgICAgIH07CiAgICAgICAgaGFydmVzdGluZ1NlcnZpY2Uuc2F2ZUhhcnZlc3RpbmdNb2RlbChoYXJ2ZXN0aW5nTW9kZWwpOwogICAgICB9CgogICAgICBjb21taXQoJ2N1cnJlbnRTaWduZXJIYXJ2ZXN0aW5nTW9kZWwnLCBoYXJ2ZXN0aW5nTW9kZWwpOwogICAgfSwKICAgIFVQREFURV9BQ0NPVU5UX1NJR05FRF9QRVJTSVNURU5UX0RFTF9SRVFfVFhTOiBmdW5jdGlvbiBVUERBVEVfQUNDT1VOVF9TSUdORURfUEVSU0lTVEVOVF9ERUxfUkVRX1RYUyhfcmVmMTAsIF9yZWYxMSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEwLmNvbW1pdDsKICAgICAgdmFyIGFjY291bnRBZGRyZXNzID0gX3JlZjExLmFjY291bnRBZGRyZXNzLAogICAgICAgICAgc2lnbmVkUGVyc2lzdGVudERlbFJlcVR4cyA9IF9yZWYxMS5zaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzOwogICAgICB2YXIgaGFydmVzdGluZ1NlcnZpY2UgPSBuZXcgSGFydmVzdGluZ1NlcnZpY2UoKTsKICAgICAgdmFyIGhhcnZlc3RpbmdNb2RlbCA9IGhhcnZlc3RpbmdTZXJ2aWNlLmdldEhhcnZlc3RpbmdNb2RlbChhY2NvdW50QWRkcmVzcyk7CiAgICAgIGhhcnZlc3RpbmdTZXJ2aWNlLnVwZGF0ZVNpZ25lZFBlcnNpc3RlbnREZWxSZXFUeHMoaGFydmVzdGluZ01vZGVsLCBzaWduZWRQZXJzaXN0ZW50RGVsUmVxVHhzKTsKICAgICAgY29tbWl0KCdjdXJyZW50U2lnbmVySGFydmVzdGluZ01vZGVsJywgaGFydmVzdGluZ01vZGVsKTsKICAgIH0sCiAgICBVUERBVEVfQUNDT1VOVF9JU19QRVJTSVNURU5UX0RFTF9SRVFfU0VOVDogZnVuY3Rpb24gVVBEQVRFX0FDQ09VTlRfSVNfUEVSU0lTVEVOVF9ERUxfUkVRX1NFTlQoX3JlZjEyLCBfcmVmMTMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMi5jb21taXQ7CiAgICAgIHZhciBhY2NvdW50QWRkcmVzcyA9IF9yZWYxMy5hY2NvdW50QWRkcmVzcywKICAgICAgICAgIGlzUGVyc2lzdGVudERlbFJlcVNlbnQgPSBfcmVmMTMuaXNQZXJzaXN0ZW50RGVsUmVxU2VudDsKICAgICAgdmFyIGhhcnZlc3RpbmdTZXJ2aWNlID0gbmV3IEhhcnZlc3RpbmdTZXJ2aWNlKCk7CiAgICAgIHZhciBoYXJ2ZXN0aW5nTW9kZWwgPSBoYXJ2ZXN0aW5nU2VydmljZS5nZXRIYXJ2ZXN0aW5nTW9kZWwoYWNjb3VudEFkZHJlc3MpOwogICAgICBoYXJ2ZXN0aW5nU2VydmljZS51cGRhdGVJc1BlcnNpc3RlbnREZWxSZXFTZW50KGhhcnZlc3RpbmdNb2RlbCwgaXNQZXJzaXN0ZW50RGVsUmVxU2VudCk7CiAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbCcsIGhhcnZlc3RpbmdNb2RlbCk7CiAgICB9LAogICAgVVBEQVRFX0FDQ09VTlRfU0VMRUNURURfSEFSVkVTVElOR19OT0RFOiBmdW5jdGlvbiBVUERBVEVfQUNDT1VOVF9TRUxFQ1RFRF9IQVJWRVNUSU5HX05PREUoX3JlZjE0LCBfcmVmMTUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNC5jb21taXQ7CiAgICAgIHZhciBhY2NvdW50QWRkcmVzcyA9IF9yZWYxNS5hY2NvdW50QWRkcmVzcywKICAgICAgICAgIHNlbGVjdGVkSGFydmVzdGluZ05vZGUgPSBfcmVmMTUuc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZTsKICAgICAgdmFyIGhhcnZlc3RpbmdTZXJ2aWNlID0gbmV3IEhhcnZlc3RpbmdTZXJ2aWNlKCk7CiAgICAgIHZhciBoYXJ2ZXN0aW5nTW9kZWwgPSBoYXJ2ZXN0aW5nU2VydmljZS5nZXRIYXJ2ZXN0aW5nTW9kZWwoYWNjb3VudEFkZHJlc3MpOwogICAgICBoYXJ2ZXN0aW5nU2VydmljZS51cGRhdGVTZWxlY3RlZEhhcnZlc3RpbmdOb2RlKGhhcnZlc3RpbmdNb2RlbCwgc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZSk7CiAgICAgIGNvbW1pdCgnY3VycmVudFNpZ25lckhhcnZlc3RpbmdNb2RlbCcsIGhhcnZlc3RpbmdNb2RlbCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/mnt/c/Users/justi/Desktop/SUPERHOW/SymbolWallet/lared-wallet/src/store/Harvesting.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport { HarvestingModel } from '@/core/database/entities/HarvestingModel';\nimport { NodeModel } from '@/core/database/entities/NodeModel';\nimport { URLHelpers } from '@/core/utils/URLHelpers';\nimport { HarvestingService } from '@/services/HarvestingService';\nimport { PageInfo } from '@/store/Transaction';\nimport { map, reduce } from 'rxjs/operators';\nimport {\n    AccountInfo,\n    Address,\n    BalanceChangeReceipt,\n    Order,\n    ReceiptPaginationStreamer,\n    ReceiptType,\n    RepositoryFactory,\n    RepositoryFactoryHttp,\n    SignedTransaction,\n    UInt64,\n} from 'symbol-sdk';\nimport Vue from 'vue';\n// internal dependencies\nimport { AwaitLock } from './AwaitLock';\n\nconst Lock = AwaitLock.create();\n\nexport type HarvestedBlock = {\n    blockNo: UInt64;\n    fee: UInt64;\n};\n\nexport type HarvestedBlockStats = {\n    totalBlockCount: number;\n    totalFeesEarned: UInt64;\n};\n\nexport enum HarvestingStatus {\n    ACTIVE = 'ACTIVE',\n    INACTIVE = 'INACTIVE',\n    KEYS_LINKED = 'KEYS_LINKED',\n    INPROGRESS_ACTIVATION = 'INPROGRESS_ACTIVATION',\n    INPROGRESS_DEACTIVATION = 'INPROGRESS_DEACTIVATION',\n}\ninterface HarvestingState {\n    initialized: boolean;\n    harvestedBlocks: HarvestedBlock[];\n    isFetchingHarvestedBlocks: boolean;\n    harvestedBlocksPageInfo: PageInfo;\n    status: HarvestingStatus;\n    harvestedBlockStats: HarvestedBlockStats;\n    isFetchingHarvestedBlockStats: boolean;\n    currentSignerHarvestingModel: HarvestingModel;\n}\n\nconst initialState: HarvestingState = {\n    initialized: false,\n    harvestedBlocks: null,\n    isFetchingHarvestedBlocks: false,\n    harvestedBlocksPageInfo: { pageNumber: 1, isLastPage: false },\n    status: HarvestingStatus.INACTIVE,\n    harvestedBlockStats: {\n        totalBlockCount: 0,\n        totalFeesEarned: UInt64.fromUint(0),\n    },\n    isFetchingHarvestedBlockStats: false,\n    currentSignerHarvestingModel: null,\n};\n\nexport default {\n    namespaced: true,\n    state: initialState,\n    getters: {\n        getInitialized: (state) => state.initialized,\n        harvestedBlocks: (state) => state.harvestedBlocks,\n        isFetchingHarvestedBlocks: (state) => state.isFetchingHarvestedBlocks,\n        harvestedBlocksPageInfo: (state) => state.harvestedBlocksPageInfo,\n        status: (state) => state.status,\n        harvestedBlockStats: (state) => state.harvestedBlockStats,\n        isFetchingHarvestedBlockStats: (state) => state.isFetchingHarvestedBlockStats,\n        currentSignerHarvestingModel: (state) => state.currentSignerHarvestingModel,\n    },\n    mutations: {\n        setInitialized: (state, initialized) => {\n            state.initialized = initialized;\n        },\n        harvestedBlocks: (state, { harvestedBlocks, pageInfo }) => {\n            Vue.set(state, 'harvestedBlocks', harvestedBlocks);\n            Vue.set(state, 'harvestedBlocksPageInfo', pageInfo);\n        },\n        isFetchingHarvestedBlocks: (state, isFetchingHarvestedBlocks) =>\n            Vue.set(state, 'isFetchingHarvestedBlocks', isFetchingHarvestedBlocks),\n        status: (state, status) => Vue.set(state, 'status', status),\n        harvestedBlockStats: (state, harvestedBlockStats) => Vue.set(state, 'harvestedBlockStats', harvestedBlockStats),\n        isFetchingHarvestedBlockStats: (state, isFetchingHarvestedBlockStats) =>\n            Vue.set(state, 'isFetchingHarvestedBlockStats', isFetchingHarvestedBlockStats),\n        currentSignerHarvestingModel: (state, currentSignerHarvestingModel) =>\n            Vue.set(state, 'currentSignerHarvestingModel', currentSignerHarvestingModel),\n    },\n    actions: {\n        async initialize({ commit, getters }) {\n            const callback = async () => {\n                // update store\n                commit('setInitialized', true);\n            };\n\n            // acquire async lock until initialized\n            await Lock.initialize(callback, { getters });\n        },\n        async uninitialize({ commit, getters }) {\n            const callback = async () => {\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n        /// region scoped actions\n        RESET_STATE({ commit }) {\n            commit('harvestedBlocks', { harvestedBlocks: null, pageInfo: { pageNumber: 1, isLastPage: false } });\n            commit('isFetchingHarvestedBlocks', false);\n        },\n        async FETCH_STATUS({ commit, rootGetters }) {\n            const currentSignerAccountInfo: AccountInfo = rootGetters['account/currentSignerAccountInfo'];\n            // reset\n            commit('status', HarvestingStatus.INACTIVE);\n            if (!currentSignerAccountInfo) {\n                return;\n            }\n            const currentSignerHarvestingModel: HarvestingModel = rootGetters['harvesting/currentSignerHarvestingModel'];\n            let accountUnlocked = false;\n\n            if (currentSignerHarvestingModel) {\n                //find the node url from currentSignerHarvestingModel (localStorage)\n                const selectedNode = currentSignerHarvestingModel.selectedHarvestingNode;\n                const harvestingNodeUrl = selectedNode?.url;\n                let unlockedAccounts: string[] = [];\n\n                if (harvestingNodeUrl) {\n                    const repositoryFactory = new RepositoryFactoryHttp(URLHelpers.getNodeUrl(harvestingNodeUrl));\n                    const nodeRepository = repositoryFactory.createNodeRepository();\n                    try {\n                        unlockedAccounts = await nodeRepository.getUnlockedAccount().toPromise();\n                    } catch (error) {\n                        //proceed\n                    }\n                }\n                const remotePublicKey = currentSignerAccountInfo.supplementalPublicKeys?.linked?.publicKey;\n                accountUnlocked = unlockedAccounts?.some((publicKey) => publicKey === remotePublicKey);\n            }\n\n            const allKeysLinked =\n                currentSignerAccountInfo.supplementalPublicKeys?.linked &&\n                currentSignerAccountInfo.supplementalPublicKeys?.node &&\n                currentSignerAccountInfo.supplementalPublicKeys?.vrf;\n\n            let status: HarvestingStatus;\n            if (allKeysLinked) {\n                status = accountUnlocked\n                    ? HarvestingStatus.ACTIVE\n                    : currentSignerHarvestingModel?.isPersistentDelReqSent\n                    ? HarvestingStatus.INPROGRESS_ACTIVATION\n                    : HarvestingStatus.KEYS_LINKED;\n            } else {\n                status = accountUnlocked ? HarvestingStatus.INPROGRESS_DEACTIVATION : HarvestingStatus.INACTIVE;\n            }\n            commit('status', status);\n        },\n        LOAD_HARVESTED_BLOCKS({ commit, rootGetters }, { pageNumber, pageSize }: { pageNumber: number; pageSize: number }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const receiptRepository = repositoryFactory.createReceiptRepository();\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n            if (!currentSignerAddress) {\n                return;\n            }\n\n            const targetAddress = currentSignerAddress;\n            // for testing => const targetAddress = Address.createFromRawAddress('TD5YTEJNHOMHTMS6XESYAFYUE36COQKPW6MQQQY');\n\n            commit('isFetchingHarvestedBlocks', true);\n\n            receiptRepository\n                .searchReceipts({\n                    targetAddress: targetAddress,\n                    receiptTypes: [ReceiptType.Harvest_Fee],\n                    pageNumber: pageNumber,\n                    pageSize: pageSize,\n                    order: Order.Desc,\n                })\n                .pipe(\n                    map((pageTxStatement) => {\n                        const harvestedBlocks = pageTxStatement.data.map(\n                            (t) =>\n                                (({\n                                    blockNo: t.height,\n                                    fee: (t.receipts as BalanceChangeReceipt[]).find(\n                                        (r) => r.targetAddress.plain() === targetAddress.plain(),\n                                    )?.amount,\n                                } as unknown) as HarvestedBlock),\n                        );\n                        const pageInfo = { isLastPage: pageTxStatement.isLastPage, pageNumber: pageTxStatement.pageNumber };\n\n                        commit('harvestedBlocks', { harvestedBlocks, pageInfo });\n                    }),\n                )\n                .subscribe({ complete: () => commit('isFetchingHarvestedBlocks', false) });\n        },\n        LOAD_HARVESTED_BLOCKS_STATS({ commit, rootGetters }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const receiptRepository = repositoryFactory.createReceiptRepository();\n            const streamer = ReceiptPaginationStreamer.transactionStatements(receiptRepository);\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n            if (!currentSignerAddress) {\n                return;\n            }\n\n            const targetAddress = currentSignerAddress;\n            // for testing => const targetAddress = Address.createFromRawAddress('TD5YTEJNHOMHTMS6XESYAFYUE36COQKPW6MQQQY');\n\n            commit('isFetchingHarvestedBlockStats', true);\n            let counter = 0;\n            streamer\n                .search({\n                    targetAddress: targetAddress,\n                    receiptTypes: [ReceiptType.Harvest_Fee],\n                    pageNumber: 1,\n                    pageSize: 50,\n                })\n                .pipe(\n                    map(\n                        (t) =>\n                            (({\n                                blockNo: t.height,\n                                fee: (t.receipts as BalanceChangeReceipt[]).find((r) => r.targetAddress.plain() === targetAddress.plain())\n                                    .amount,\n                            } as unknown) as HarvestedBlock),\n                    ),\n                    reduce(\n                        (acc, harvestedBlock) => ({\n                            totalBlockCount: ++counter,\n                            totalFeesEarned: acc.totalFeesEarned.add(harvestedBlock.fee),\n                        }),\n                        {\n                            totalBlockCount: 0,\n                            totalFeesEarned: UInt64.fromUint(0),\n                        },\n                    ),\n                )\n                .subscribe({\n                    next: (harvestedBlockStats) => {\n                        commit('harvestedBlockStats', harvestedBlockStats);\n                    },\n                    complete: () => commit('isFetchingHarvestedBlockStats', false),\n                });\n        },\n        SET_CURRENT_SIGNER_HARVESTING_MODEL({ commit }, currentSignerAddress) {\n            const harvestingService = new HarvestingService();\n            let harvestingModel = harvestingService.getHarvestingModel(currentSignerAddress);\n            if (!harvestingModel) {\n                harvestingModel = { accountAddress: currentSignerAddress };\n                harvestingService.saveHarvestingModel(harvestingModel);\n            }\n            commit('currentSignerHarvestingModel', harvestingModel);\n        },\n        UPDATE_ACCOUNT_SIGNED_PERSISTENT_DEL_REQ_TXS(\n            { commit },\n            { accountAddress, signedPersistentDelReqTxs }: { accountAddress: string; signedPersistentDelReqTxs: SignedTransaction[] },\n        ) {\n            const harvestingService = new HarvestingService();\n            const harvestingModel = harvestingService.getHarvestingModel(accountAddress);\n            harvestingService.updateSignedPersistentDelReqTxs(harvestingModel, signedPersistentDelReqTxs);\n            commit('currentSignerHarvestingModel', harvestingModel);\n        },\n        UPDATE_ACCOUNT_IS_PERSISTENT_DEL_REQ_SENT(\n            { commit },\n            { accountAddress, isPersistentDelReqSent }: { accountAddress: string; isPersistentDelReqSent: boolean },\n        ) {\n            const harvestingService = new HarvestingService();\n            const harvestingModel = harvestingService.getHarvestingModel(accountAddress);\n            harvestingService.updateIsPersistentDelReqSent(harvestingModel, isPersistentDelReqSent);\n            commit('currentSignerHarvestingModel', harvestingModel);\n        },\n        UPDATE_ACCOUNT_SELECTED_HARVESTING_NODE(\n            { commit },\n            { accountAddress, selectedHarvestingNode }: { accountAddress: string; selectedHarvestingNode: NodeModel },\n        ) {\n            const harvestingService = new HarvestingService();\n            const harvestingModel = harvestingService.getHarvestingModel(accountAddress);\n            harvestingService.updateSelectedHarvestingNode(harvestingModel, selectedHarvestingNode);\n            commit('currentSignerHarvestingModel', harvestingModel);\n        },\n        /// end-region scoped actions\n    },\n};\n"],"sourceRoot":""}]}