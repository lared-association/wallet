{"remainingRequest":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js!/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js!/home/hero/lared-wallet/node_modules/ts-loader/index.js??ref--13-3!/home/hero/lared-wallet/src/store/Harvesting.ts","dependencies":[{"path":"/home/hero/lared-wallet/src/store/Harvesting.ts","mtime":1606213958969},{"path":"/home/hero/lared-wallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hero/lared-wallet/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvaGVyby9sYXJlZC13YWxsZXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKaW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAidHNsaWIiOwovKgogKiBDb3B5cmlnaHQgMjAyMCBORU0gKGh0dHBzOi8vbmVtLmlvKQogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCgppbXBvcnQgeyBPcmRlciwgUmVjZWlwdFBhZ2luYXRpb25TdHJlYW1lciwgUmVjZWlwdFR5cGUsIFJlcG9zaXRvcnlGYWN0b3J5SHR0cCwgVUludDY0IH0gZnJvbSAnc3ltYm9sLXNkayc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgbWFwLCByZWR1Y2UgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7IC8vIGludGVybmFsIGRlcGVuZGVuY2llcwoKaW1wb3J0IHsgQXdhaXRMb2NrIH0gZnJvbSAnLi9Bd2FpdExvY2snOwppbXBvcnQgeyBVUkxIZWxwZXJzIH0gZnJvbSAnQC9jb3JlL3V0aWxzL1VSTEhlbHBlcnMnOwp2YXIgTG9jayA9IEF3YWl0TG9jay5jcmVhdGUoKTsKZXhwb3J0IHZhciBIYXJ2ZXN0aW5nU3RhdHVzOwoKKGZ1bmN0aW9uIChIYXJ2ZXN0aW5nU3RhdHVzKSB7CiAgSGFydmVzdGluZ1N0YXR1c1siQUNUSVZFIl0gPSAiQUNUSVZFIjsKICBIYXJ2ZXN0aW5nU3RhdHVzWyJJTkFDVElWRSJdID0gIklOQUNUSVZFIjsKICBIYXJ2ZXN0aW5nU3RhdHVzWyJLRVlTX0xJTktFRCJdID0gIktFWVNfTElOS0VEIjsKICBIYXJ2ZXN0aW5nU3RhdHVzWyJJTlBST0dSRVNTX0FDVElWQVRJT04iXSA9ICJJTlBST0dSRVNTX0FDVElWQVRJT04iOwogIEhhcnZlc3RpbmdTdGF0dXNbIklOUFJPR1JFU1NfREVBQ1RJVkFUSU9OIl0gPSAiSU5QUk9HUkVTU19ERUFDVElWQVRJT04iOwp9KShIYXJ2ZXN0aW5nU3RhdHVzIHx8IChIYXJ2ZXN0aW5nU3RhdHVzID0ge30pKTsKCnZhciBpbml0aWFsU3RhdGUgPSB7CiAgaW5pdGlhbGl6ZWQ6IGZhbHNlLAogIGhhcnZlc3RlZEJsb2NrczogbnVsbCwKICBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzOiBmYWxzZSwKICBoYXJ2ZXN0ZWRCbG9ja3NQYWdlSW5mbzogewogICAgcGFnZU51bWJlcjogMSwKICAgIGlzTGFzdFBhZ2U6IGZhbHNlCiAgfSwKICBzdGF0dXM6IEhhcnZlc3RpbmdTdGF0dXMuSU5BQ1RJVkUsCiAgaGFydmVzdGVkQmxvY2tTdGF0czogewogICAgdG90YWxCbG9ja0NvdW50OiAwLAogICAgdG90YWxGZWVzRWFybmVkOiBVSW50NjQuZnJvbVVpbnQoMCkKICB9LAogIGlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzOiBmYWxzZQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogaW5pdGlhbFN0YXRlLAogIGdldHRlcnM6IHsKICAgIGdldEluaXRpYWxpemVkOiBmdW5jdGlvbiBnZXRJbml0aWFsaXplZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaW5pdGlhbGl6ZWQ7CiAgICB9LAogICAgaGFydmVzdGVkQmxvY2tzOiBmdW5jdGlvbiBoYXJ2ZXN0ZWRCbG9ja3Moc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmhhcnZlc3RlZEJsb2NrczsKICAgIH0sCiAgICBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzOiBmdW5jdGlvbiBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzOwogICAgfSwKICAgIGhhcnZlc3RlZEJsb2Nrc1BhZ2VJbmZvOiBmdW5jdGlvbiBoYXJ2ZXN0ZWRCbG9ja3NQYWdlSW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaGFydmVzdGVkQmxvY2tzUGFnZUluZm87CiAgICB9LAogICAgc3RhdHVzOiBmdW5jdGlvbiBzdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXR1czsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja1N0YXRzOiBmdW5jdGlvbiBoYXJ2ZXN0ZWRCbG9ja1N0YXRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5oYXJ2ZXN0ZWRCbG9ja1N0YXRzOwogICAgfSwKICAgIGlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzOiBmdW5jdGlvbiBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHM7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldEluaXRpYWxpemVkOiBmdW5jdGlvbiBzZXRJbml0aWFsaXplZChzdGF0ZSwgaW5pdGlhbGl6ZWQpIHsKICAgICAgc3RhdGUuaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplZDsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja3M6IGZ1bmN0aW9uIGhhcnZlc3RlZEJsb2NrcyhzdGF0ZSwgX3JlZikgewogICAgICB2YXIgX2hhcnZlc3RlZEJsb2NrcyA9IF9yZWYuaGFydmVzdGVkQmxvY2tzLAogICAgICAgICAgcGFnZUluZm8gPSBfcmVmLnBhZ2VJbmZvOwogICAgICBWdWUuc2V0KHN0YXRlLCAnaGFydmVzdGVkQmxvY2tzJywgX2hhcnZlc3RlZEJsb2Nrcyk7CiAgICAgIFZ1ZS5zZXQoc3RhdGUsICdoYXJ2ZXN0ZWRCbG9ja3NQYWdlSW5mbycsIHBhZ2VJbmZvKTsKICAgIH0sCiAgICBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzOiBmdW5jdGlvbiBpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tzKHN0YXRlLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3MnLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2Nrcyk7CiAgICB9LAogICAgc3RhdHVzOiBmdW5jdGlvbiBzdGF0dXMoc3RhdGUsIF9zdGF0dXMpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdzdGF0dXMnLCBfc3RhdHVzKTsKICAgIH0sCiAgICBoYXJ2ZXN0ZWRCbG9ja1N0YXRzOiBmdW5jdGlvbiBoYXJ2ZXN0ZWRCbG9ja1N0YXRzKHN0YXRlLCBfaGFydmVzdGVkQmxvY2tTdGF0cykgewogICAgICByZXR1cm4gVnVlLnNldChzdGF0ZSwgJ2hhcnZlc3RlZEJsb2NrU3RhdHMnLCBfaGFydmVzdGVkQmxvY2tTdGF0cyk7CiAgICB9LAogICAgaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHM6IGZ1bmN0aW9uIGlzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzKHN0YXRlLCBfaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrU3RhdHMpIHsKICAgICAgcmV0dXJuIFZ1ZS5zZXQoc3RhdGUsICdpc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0cycsIF9pc0ZldGNoaW5nSGFydmVzdGVkQmxvY2tTdGF0cyk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjIuZ2V0dGVyczsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc3RvcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0SW5pdGlhbGl6ZWQnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH07IC8vIGFjcXVpcmUgYXN5bmMgbG9jayB1bnRpbCBpbml0aWFsaXplZAoKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTG9jay5pbml0aWFsaXplKGNhbGxiYWNrLCB7CiAgICAgICAgICAgICAgICAgIGdldHRlcnM6IGdldHRlcnMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CiAgICB9LAogICAgdW5pbml0aWFsaXplOiBmdW5jdGlvbiB1bmluaXRpYWxpemUoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmMy5nZXR0ZXJzOwogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMiwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEluaXRpYWxpemVkJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBMb2NrLnVuaW5pdGlhbGl6ZShjYWxsYmFjaywgewogICAgICAgICAgICAgICAgICBnZXR0ZXJzOiBnZXR0ZXJzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwogICAgfSwKICAgIC8vLyByZWdpb24gc2NvcGVkIGFjdGlvbnMKICAgIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICBjb21taXQoJ2hhcnZlc3RlZEJsb2NrcycsIHsKICAgICAgICBoYXJ2ZXN0ZWRCbG9ja3M6IG51bGwsCiAgICAgICAgcGFnZUluZm86IHsKICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICBpc0xhc3RQYWdlOiBmYWxzZQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNvbW1pdCgnaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcycsIGZhbHNlKTsKICAgIH0sCiAgICBGRVRDSF9TVEFUVVM6IGZ1bmN0aW9uIEZFVENIX1NUQVRVUyhfcmVmNSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0LAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmNS5yb290R2V0dGVyczsKCiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7CgogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBjdXJyZW50U2lnbmVyQWNjb3VudEluZm8sIGN1cnJlbnRTaWduZXJBY2NvdW50TW9kZWwsIHJlbW90ZVB1YmxpY0tleSwgc2VsZWN0ZWROb2RlLCBoYXJ2ZXN0aW5nTm9kZVVybCwgdW5sb2NrZWRBY2NvdW50cywgcmVwb3NpdG9yeUZhY3RvcnksIG5vZGVSZXBvc2l0b3J5LCBhbGxLZXlzTGlua2VkLCBhY2NvdW50VW5sb2NrZWQsIHN0YXR1czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGN1cnJlbnRTaWduZXJBY2NvdW50SW5mbyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBY2NvdW50SW5mbyddOyAvLyByZXNldAoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc3RhdHVzJywgSGFydmVzdGluZ1N0YXR1cy5JTkFDVElWRSk7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTaWduZXJBY2NvdW50SW5mbykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgY3VycmVudFNpZ25lckFjY291bnRNb2RlbCA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBY2NvdW50TW9kZWwnXTsgLy9maW5kIHRoZSBub2RlIHVybCBmcm9tIGN1cnJlbnRTaWduZXJBY2NvdW50TW9kZWwgKGxvY2FsU3RvcmFnZSkKCiAgICAgICAgICAgICAgICByZW1vdGVQdWJsaWNLZXkgPSAoX2IgPSAoX2EgPSBjdXJyZW50U2lnbmVyQWNjb3VudEluZm8uc3VwcGxlbWVudGFsUHVibGljS2V5cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxpbmtlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnB1YmxpY0tleTsKICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IGN1cnJlbnRTaWduZXJBY2NvdW50TW9kZWwuc2VsZWN0ZWRIYXJ2ZXN0aW5nTm9kZTsKICAgICAgICAgICAgICAgIGhhcnZlc3RpbmdOb2RlVXJsID0gc2VsZWN0ZWROb2RlID09PSBudWxsIHx8IHNlbGVjdGVkTm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWROb2RlLnVybDsKICAgICAgICAgICAgICAgIHVubG9ja2VkQWNjb3VudHMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoIWhhcnZlc3RpbmdOb2RlVXJsKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcG9zaXRvcnlGYWN0b3J5ID0gbmV3IFJlcG9zaXRvcnlGYWN0b3J5SHR0cChVUkxIZWxwZXJzLmdldE5vZGVVcmwoaGFydmVzdGluZ05vZGVVcmwpKTsKICAgICAgICAgICAgICAgIG5vZGVSZXBvc2l0b3J5ID0gcmVwb3NpdG9yeUZhY3RvcnkuY3JlYXRlTm9kZVJlcG9zaXRvcnkoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSZXBvc2l0b3J5LmdldFVubG9ja2VkQWNjb3VudCgpLnRvUHJvbWlzZSgpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgdW5sb2NrZWRBY2NvdW50cyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxODsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgxMik7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBhbGxLZXlzTGlua2VkID0gKChfYyA9IGN1cnJlbnRTaWduZXJBY2NvdW50SW5mby5zdXBwbGVtZW50YWxQdWJsaWNLZXlzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubGlua2VkKSAmJiAoKF9kID0gY3VycmVudFNpZ25lckFjY291bnRJbmZvLnN1cHBsZW1lbnRhbFB1YmxpY0tleXMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5ub2RlKSAmJiAoKF9lID0gY3VycmVudFNpZ25lckFjY291bnRJbmZvLnN1cHBsZW1lbnRhbFB1YmxpY0tleXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS52cmYpOwogICAgICAgICAgICAgICAgYWNjb3VudFVubG9ja2VkID0gdW5sb2NrZWRBY2NvdW50cyA9PT0gbnVsbCB8fCB1bmxvY2tlZEFjY291bnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1bmxvY2tlZEFjY291bnRzLnNvbWUoZnVuY3Rpb24gKHB1YmxpY0tleSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcHVibGljS2V5ID09PSByZW1vdGVQdWJsaWNLZXk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoYWxsS2V5c0xpbmtlZCkgewogICAgICAgICAgICAgICAgICBzdGF0dXMgPSBhY2NvdW50VW5sb2NrZWQgPyBIYXJ2ZXN0aW5nU3RhdHVzLkFDVElWRSA6IGN1cnJlbnRTaWduZXJBY2NvdW50TW9kZWwuaXNQZXJzaXN0ZW50RGVsUmVxU2VudCA/IEhhcnZlc3RpbmdTdGF0dXMuSU5QUk9HUkVTU19BQ1RJVkFUSU9OIDogSGFydmVzdGluZ1N0YXR1cy5LRVlTX0xJTktFRDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGFjY291bnRVbmxvY2tlZCA/IEhhcnZlc3RpbmdTdGF0dXMuSU5QUk9HUkVTU19ERUFDVElWQVRJT04gOiBIYXJ2ZXN0aW5nU3RhdHVzLklOQUNUSVZFOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc3RhdHVzJywgc3RhdHVzKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1sxMiwgMThdXSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBMT0FEX0hBUlZFU1RFRF9CTE9DS1M6IGZ1bmN0aW9uIExPQURfSEFSVkVTVEVEX0JMT0NLUyhfcmVmNiwgX3JlZjcpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjYucm9vdEdldHRlcnM7CiAgICAgIHZhciBwYWdlTnVtYmVyID0gX3JlZjcucGFnZU51bWJlciwKICAgICAgICAgIHBhZ2VTaXplID0gX3JlZjcucGFnZVNpemU7CiAgICAgIHZhciByZXBvc2l0b3J5RmFjdG9yeSA9IHJvb3RHZXR0ZXJzWyduZXR3b3JrL3JlcG9zaXRvcnlGYWN0b3J5J107CiAgICAgIHZhciByZWNlaXB0UmVwb3NpdG9yeSA9IHJlcG9zaXRvcnlGYWN0b3J5LmNyZWF0ZVJlY2VpcHRSZXBvc2l0b3J5KCk7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107CgogICAgICBpZiAoIWN1cnJlbnRTaWduZXJBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0QWRkcmVzcyA9IGN1cnJlbnRTaWduZXJBZGRyZXNzOyAvLyBmb3IgdGVzdGluZyA9PiBjb25zdCB0YXJnZXRBZGRyZXNzID0gQWRkcmVzcy5jcmVhdGVGcm9tUmF3QWRkcmVzcygnVEQ1WVRFSk5IT01IVE1TNlhFU1lBRllVRTM2Q09RS1BXNk1RUVFZJyk7CgogICAgICBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja3MnLCB0cnVlKTsKICAgICAgcmVjZWlwdFJlcG9zaXRvcnkuc2VhcmNoUmVjZWlwdHMoewogICAgICAgIHRhcmdldEFkZHJlc3M6IHRhcmdldEFkZHJlc3MsCiAgICAgICAgcmVjZWlwdFR5cGVzOiBbUmVjZWlwdFR5cGUuSGFydmVzdF9GZWVdLAogICAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VOdW1iZXIsCiAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplLAogICAgICAgIG9yZGVyOiBPcmRlci5EZXNjCiAgICAgIH0pLnBpcGUobWFwKGZ1bmN0aW9uIChwYWdlVHhTdGF0ZW1lbnQpIHsKICAgICAgICB2YXIgaGFydmVzdGVkQmxvY2tzID0gcGFnZVR4U3RhdGVtZW50LmRhdGEubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgX2E7CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmxvY2tObzogdC5oZWlnaHQsCiAgICAgICAgICAgIGZlZTogKF9hID0gdC5yZWNlaXB0cy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHIudGFyZ2V0QWRkcmVzcy5wbGFpbigpID09PSB0YXJnZXRBZGRyZXNzLnBsYWluKCk7CiAgICAgICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYW1vdW50CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHZhciBwYWdlSW5mbyA9IHsKICAgICAgICAgIGlzTGFzdFBhZ2U6IHBhZ2VUeFN0YXRlbWVudC5pc0xhc3RQYWdlLAogICAgICAgICAgcGFnZU51bWJlcjogcGFnZVR4U3RhdGVtZW50LnBhZ2VOdW1iZXIKICAgICAgICB9OwogICAgICAgIGNvbW1pdCgnaGFydmVzdGVkQmxvY2tzJywgewogICAgICAgICAgaGFydmVzdGVkQmxvY2tzOiBoYXJ2ZXN0ZWRCbG9ja3MsCiAgICAgICAgICBwYWdlSW5mbzogcGFnZUluZm8KICAgICAgICB9KTsKICAgICAgfSkpLnN1YnNjcmliZSh7CiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICAgICAgcmV0dXJuIGNvbW1pdCgnaXNGZXRjaGluZ0hhcnZlc3RlZEJsb2NrcycsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIExPQURfSEFSVkVTVEVEX0JMT0NLU19TVEFUUzogZnVuY3Rpb24gTE9BRF9IQVJWRVNURURfQkxPQ0tTX1NUQVRTKF9yZWY4KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmOC5jb21taXQsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY4LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgcmVwb3NpdG9yeUZhY3RvcnkgPSByb290R2V0dGVyc1snbmV0d29yay9yZXBvc2l0b3J5RmFjdG9yeSddOwogICAgICB2YXIgcmVjZWlwdFJlcG9zaXRvcnkgPSByZXBvc2l0b3J5RmFjdG9yeS5jcmVhdGVSZWNlaXB0UmVwb3NpdG9yeSgpOwogICAgICB2YXIgc3RyZWFtZXIgPSBSZWNlaXB0UGFnaW5hdGlvblN0cmVhbWVyLnRyYW5zYWN0aW9uU3RhdGVtZW50cyhyZWNlaXB0UmVwb3NpdG9yeSk7CiAgICAgIHZhciBjdXJyZW50U2lnbmVyQWRkcmVzcyA9IHJvb3RHZXR0ZXJzWydhY2NvdW50L2N1cnJlbnRTaWduZXJBZGRyZXNzJ107CgogICAgICBpZiAoIWN1cnJlbnRTaWduZXJBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0QWRkcmVzcyA9IGN1cnJlbnRTaWduZXJBZGRyZXNzOyAvLyBmb3IgdGVzdGluZyA9PiBjb25zdCB0YXJnZXRBZGRyZXNzID0gQWRkcmVzcy5jcmVhdGVGcm9tUmF3QWRkcmVzcygnVEQ1WVRFSk5IT01IVE1TNlhFU1lBRllVRTM2Q09RS1BXNk1RUVFZJyk7CgogICAgICBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzJywgdHJ1ZSk7CiAgICAgIHZhciBjb3VudGVyID0gMDsKICAgICAgc3RyZWFtZXIuc2VhcmNoKHsKICAgICAgICB0YXJnZXRBZGRyZXNzOiB0YXJnZXRBZGRyZXNzLAogICAgICAgIHJlY2VpcHRUeXBlczogW1JlY2VpcHRUeXBlLkhhcnZlc3RfRmVlXSwKICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgIHBhZ2VTaXplOiA1MAogICAgICB9KS5waXBlKG1hcChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBibG9ja05vOiB0LmhlaWdodCwKICAgICAgICAgIGZlZTogdC5yZWNlaXB0cy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiByLnRhcmdldEFkZHJlc3MucGxhaW4oKSA9PT0gdGFyZ2V0QWRkcmVzcy5wbGFpbigpOwogICAgICAgICAgfSkuYW1vdW50CiAgICAgICAgfTsKICAgICAgfSksIHJlZHVjZShmdW5jdGlvbiAoYWNjLCBoYXJ2ZXN0ZWRCbG9jaykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b3RhbEJsb2NrQ291bnQ6ICsrY291bnRlciwKICAgICAgICAgIHRvdGFsRmVlc0Vhcm5lZDogYWNjLnRvdGFsRmVlc0Vhcm5lZC5hZGQoaGFydmVzdGVkQmxvY2suZmVlKQogICAgICAgIH07CiAgICAgIH0sIHsKICAgICAgICB0b3RhbEJsb2NrQ291bnQ6IDAsCiAgICAgICAgdG90YWxGZWVzRWFybmVkOiBVSW50NjQuZnJvbVVpbnQoMCkKICAgICAgfSkpLnN1YnNjcmliZSh7CiAgICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dChoYXJ2ZXN0ZWRCbG9ja1N0YXRzKSB7CiAgICAgICAgICBjb21taXQoJ2hhcnZlc3RlZEJsb2NrU3RhdHMnLCBoYXJ2ZXN0ZWRCbG9ja1N0YXRzKTsKICAgICAgICB9LAogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgIHJldHVybiBjb21taXQoJ2lzRmV0Y2hpbmdIYXJ2ZXN0ZWRCbG9ja1N0YXRzJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/hero/lared-wallet/src/store/Harvesting.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 NEM (https://nem.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport {\n    AccountInfo,\n    Address,\n    BalanceChangeReceipt,\n    Order,\n    ReceiptPaginationStreamer,\n    ReceiptType,\n    RepositoryFactory,\n    RepositoryFactoryHttp,\n    UInt64,\n} from 'symbol-sdk';\nimport Vue from 'vue';\nimport { map, reduce } from 'rxjs/operators';\n// internal dependencies\nimport { AwaitLock } from './AwaitLock';\nimport { PageInfo } from '@/store/Transaction';\nimport { AccountModel } from '@/core/database/entities/AccountModel';\nimport { URLHelpers } from '@/core/utils/URLHelpers';\n\nconst Lock = AwaitLock.create();\n\nexport type HarvestedBlock = {\n    blockNo: UInt64;\n    fee: UInt64;\n};\n\nexport type HarvestedBlockStats = {\n    totalBlockCount: number;\n    totalFeesEarned: UInt64;\n};\n\nexport enum HarvestingStatus {\n    ACTIVE = 'ACTIVE',\n    INACTIVE = 'INACTIVE',\n    KEYS_LINKED = 'KEYS_LINKED',\n    INPROGRESS_ACTIVATION = 'INPROGRESS_ACTIVATION',\n    INPROGRESS_DEACTIVATION = 'INPROGRESS_DEACTIVATION',\n}\ninterface HarvestingState {\n    initialized: boolean;\n    harvestedBlocks: HarvestedBlock[];\n    isFetchingHarvestedBlocks: boolean;\n    harvestedBlocksPageInfo: PageInfo;\n    status: HarvestingStatus;\n    harvestedBlockStats: HarvestedBlockStats;\n    isFetchingHarvestedBlockStats: boolean;\n}\n\nconst initialState: HarvestingState = {\n    initialized: false,\n    harvestedBlocks: null,\n    isFetchingHarvestedBlocks: false,\n    harvestedBlocksPageInfo: { pageNumber: 1, isLastPage: false },\n    status: HarvestingStatus.INACTIVE,\n    harvestedBlockStats: {\n        totalBlockCount: 0,\n        totalFeesEarned: UInt64.fromUint(0),\n    },\n    isFetchingHarvestedBlockStats: false,\n};\n\nexport default {\n    namespaced: true,\n    state: initialState,\n    getters: {\n        getInitialized: (state) => state.initialized,\n        harvestedBlocks: (state) => state.harvestedBlocks,\n        isFetchingHarvestedBlocks: (state) => state.isFetchingHarvestedBlocks,\n        harvestedBlocksPageInfo: (state) => state.harvestedBlocksPageInfo,\n        status: (state) => state.status,\n        harvestedBlockStats: (state) => state.harvestedBlockStats,\n        isFetchingHarvestedBlockStats: (state) => state.isFetchingHarvestedBlockStats,\n    },\n    mutations: {\n        setInitialized: (state, initialized) => {\n            state.initialized = initialized;\n        },\n        harvestedBlocks: (state, { harvestedBlocks, pageInfo }) => {\n            Vue.set(state, 'harvestedBlocks', harvestedBlocks);\n            Vue.set(state, 'harvestedBlocksPageInfo', pageInfo);\n        },\n        isFetchingHarvestedBlocks: (state, isFetchingHarvestedBlocks) =>\n            Vue.set(state, 'isFetchingHarvestedBlocks', isFetchingHarvestedBlocks),\n        status: (state, status) => Vue.set(state, 'status', status),\n        harvestedBlockStats: (state, harvestedBlockStats) => Vue.set(state, 'harvestedBlockStats', harvestedBlockStats),\n        isFetchingHarvestedBlockStats: (state, isFetchingHarvestedBlockStats) =>\n            Vue.set(state, 'isFetchingHarvestedBlockStats', isFetchingHarvestedBlockStats),\n    },\n    actions: {\n        async initialize({ commit, getters }) {\n            const callback = async () => {\n                // update store\n                commit('setInitialized', true);\n            };\n\n            // acquire async lock until initialized\n            await Lock.initialize(callback, { getters });\n        },\n        async uninitialize({ commit, getters }) {\n            const callback = async () => {\n                commit('setInitialized', false);\n            };\n            await Lock.uninitialize(callback, { getters });\n        },\n        /// region scoped actions\n        RESET_STATE({ commit }) {\n            commit('harvestedBlocks', { harvestedBlocks: null, pageInfo: { pageNumber: 1, isLastPage: false } });\n            commit('isFetchingHarvestedBlocks', false);\n        },\n        async FETCH_STATUS({ commit, rootGetters }) {\n            const currentSignerAccountInfo: AccountInfo = rootGetters['account/currentSignerAccountInfo'];\n            // reset\n            commit('status', HarvestingStatus.INACTIVE);\n            if (!currentSignerAccountInfo) {\n                return;\n            }\n            const currentSignerAccountModel: AccountModel = rootGetters['account/currentSignerAccountModel'];\n\n            //find the node url from currentSignerAccountModel (localStorage)\n            const remotePublicKey = currentSignerAccountInfo.supplementalPublicKeys?.linked?.publicKey;\n            const selectedNode = currentSignerAccountModel.selectedHarvestingNode;\n            const harvestingNodeUrl = selectedNode?.url;\n            let unlockedAccounts: string[] = [];\n\n            if (harvestingNodeUrl) {\n                const repositoryFactory = new RepositoryFactoryHttp(URLHelpers.getNodeUrl(harvestingNodeUrl));\n                const nodeRepository = repositoryFactory.createNodeRepository();\n                try {\n                    unlockedAccounts = await nodeRepository.getUnlockedAccount().toPromise();\n                } catch (error) {\n                    //proceed\n                }\n            }\n\n            const allKeysLinked =\n                currentSignerAccountInfo.supplementalPublicKeys?.linked &&\n                currentSignerAccountInfo.supplementalPublicKeys?.node &&\n                currentSignerAccountInfo.supplementalPublicKeys?.vrf;\n            const accountUnlocked = unlockedAccounts?.some((publicKey) => publicKey === remotePublicKey);\n\n            let status: HarvestingStatus;\n            if (allKeysLinked) {\n                status = accountUnlocked\n                    ? HarvestingStatus.ACTIVE\n                    : currentSignerAccountModel.isPersistentDelReqSent\n                    ? HarvestingStatus.INPROGRESS_ACTIVATION\n                    : HarvestingStatus.KEYS_LINKED;\n            } else {\n                status = accountUnlocked ? HarvestingStatus.INPROGRESS_DEACTIVATION : HarvestingStatus.INACTIVE;\n            }\n            commit('status', status);\n        },\n        LOAD_HARVESTED_BLOCKS({ commit, rootGetters }, { pageNumber, pageSize }: { pageNumber: number; pageSize: number }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const receiptRepository = repositoryFactory.createReceiptRepository();\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n            if (!currentSignerAddress) {\n                return;\n            }\n\n            const targetAddress = currentSignerAddress;\n            // for testing => const targetAddress = Address.createFromRawAddress('TD5YTEJNHOMHTMS6XESYAFYUE36COQKPW6MQQQY');\n\n            commit('isFetchingHarvestedBlocks', true);\n\n            receiptRepository\n                .searchReceipts({\n                    targetAddress: targetAddress,\n                    receiptTypes: [ReceiptType.Harvest_Fee],\n                    pageNumber: pageNumber,\n                    pageSize: pageSize,\n                    order: Order.Desc,\n                })\n                .pipe(\n                    map((pageTxStatement) => {\n                        const harvestedBlocks = pageTxStatement.data.map(\n                            (t) =>\n                                (({\n                                    blockNo: t.height,\n                                    fee: (t.receipts as BalanceChangeReceipt[]).find(\n                                        (r) => r.targetAddress.plain() === targetAddress.plain(),\n                                    )?.amount,\n                                } as unknown) as HarvestedBlock),\n                        );\n                        const pageInfo = { isLastPage: pageTxStatement.isLastPage, pageNumber: pageTxStatement.pageNumber };\n\n                        commit('harvestedBlocks', { harvestedBlocks, pageInfo });\n                    }),\n                )\n                .subscribe({ complete: () => commit('isFetchingHarvestedBlocks', false) });\n        },\n        LOAD_HARVESTED_BLOCKS_STATS({ commit, rootGetters }) {\n            const repositoryFactory: RepositoryFactory = rootGetters['network/repositoryFactory'];\n            const receiptRepository = repositoryFactory.createReceiptRepository();\n            const streamer = ReceiptPaginationStreamer.transactionStatements(receiptRepository);\n\n            const currentSignerAddress: Address = rootGetters['account/currentSignerAddress'];\n            if (!currentSignerAddress) {\n                return;\n            }\n\n            const targetAddress = currentSignerAddress;\n            // for testing => const targetAddress = Address.createFromRawAddress('TD5YTEJNHOMHTMS6XESYAFYUE36COQKPW6MQQQY');\n\n            commit('isFetchingHarvestedBlockStats', true);\n            let counter = 0;\n            streamer\n                .search({\n                    targetAddress: targetAddress,\n                    receiptTypes: [ReceiptType.Harvest_Fee],\n                    pageNumber: 1,\n                    pageSize: 50,\n                })\n                .pipe(\n                    map(\n                        (t) =>\n                            (({\n                                blockNo: t.height,\n                                fee: (t.receipts as BalanceChangeReceipt[]).find((r) => r.targetAddress.plain() === targetAddress.plain())\n                                    .amount,\n                            } as unknown) as HarvestedBlock),\n                    ),\n                    reduce(\n                        (acc, harvestedBlock) => ({\n                            totalBlockCount: ++counter,\n                            totalFeesEarned: acc.totalFeesEarned.add(harvestedBlock.fee),\n                        }),\n                        {\n                            totalBlockCount: 0,\n                            totalFeesEarned: UInt64.fromUint(0),\n                        },\n                    ),\n                )\n                .subscribe({\n                    next: (harvestedBlockStats) => {\n                        commit('harvestedBlockStats', harvestedBlockStats);\n                    },\n                    complete: () => commit('isFetchingHarvestedBlockStats', false),\n                });\n        },\n        /// end-region scoped actions\n    },\n};\n"],"sourceRoot":""}]}